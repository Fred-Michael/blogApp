"use strict";(self.webpackChunkblogApp=self.webpackChunkblogApp||[]).push([[792],{4783:(ht,Te,O)=>{O.d(Te,{BM:()=>Se,Gt:()=>re,bf:()=>Ue,e7:()=>le,iB:()=>V,rx:()=>Pe,uP:()=>he});var h=O(7705),Z=O(7935),P=O(1161);ht=O.hmd(ht);const ee=["ngOnDestroy"],re=(Ve,Et,ft,ne={})=>new Proxy(Ve,{get:(_e,te)=>ft.runOutsideAngular(()=>{var Ce;if(Ve[te])return!(null===(Ce=ne?.spy)||void 0===Ce)&&Ce.get&&ne.spy.get(te,Ve[te]),Ve[te];if(ee.indexOf(te)>-1)return()=>{};const Fe=Et.toPromise().then(Ke=>{const ue=Ke&&Ke[te];return"function"==typeof ue?ue.bind(Ke):ue&&ue.then?ue.then(Ct=>ft.run(()=>Ct)):ft.run(()=>ue)});return new Proxy(()=>{},{get:(Ke,ue)=>Fe[ue],apply:(Ke,ue,Ct)=>Fe.then(Gt=>{var hr;const Xr=Gt&&Gt(...Ct);return!(null===(hr=ne?.spy)||void 0===hr)&&hr.apply&&ne.spy.apply(te,Ct,Xr),Xr})})})}),le=(Ve,Et)=>{Et.forEach(ft=>{Object.getOwnPropertyNames(ft.prototype||ft).forEach(ne=>{Object.defineProperty(Ve.prototype,ne,Object.getOwnPropertyDescriptor(ft.prototype||ft,ne))})})};class ge{constructor(Et){return Et}}const Pe=new h.nKC("angularfire2.app.options"),he=new h.nKC("angularfire2.app.name");function V(Ve,Et,ft){const _e="object"==typeof ft&&ft||{};_e.name=_e.name||"string"==typeof ft&&ft||"[DEFAULT]";const Ce=Z.A.apps.filter(Fe=>Fe&&Fe.name===_e.name)[0]||Et.runOutsideAngular(()=>Z.A.initializeApp(Ve,_e));try{JSON.stringify(Ve)!==JSON.stringify(Ce.options)&&$("error",`${Ce.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(Ce)}const $=(Ve,...Et)=>{(0,h.naY)()&&typeof console<"u"&&console[Ve](...Et)},X={provide:ge,useFactory:V,deps:[Pe,h.SKi,[new h.Xx1,he]]};let Ue=(()=>{class Ve{constructor(ft){Z.A.registerVersion("angularfire",P.xv.full,"core"),Z.A.registerVersion("angularfire",P.xv.full,"app-compat"),Z.A.registerVersion("angular",h.xvI.full,ft.toString())}static initializeApp(ft,ne){return{ngModule:Ve,providers:[{provide:Pe,useValue:ft},{provide:he,useValue:ne}]}}}return Ve.\u0275fac=function(ft){return new(ft||Ve)(h.KVO(h.Agw))},Ve.\u0275mod=h.$C({type:Ve}),Ve.\u0275inj=h.G2t({providers:[X]}),Ve})();function Se(Ve,Et,ft,ne,_e){const[,te,Ce]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Ve)||[];if(te)return function qe(Ve,Et){try{return Ve.toString()===Et.toString()}catch{return Ve===Et}}(_e,Ce)||(ze("error",`${Et} was already initialized on the ${ft} Firebase App with different settings.${Re?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:_e,was:Ce})),te;{const Fe=ne();return globalThis.\u0275AngularfireInstanceCache.push([Ve,Fe,_e]),Fe}}const Re=!!ht.hot,ze=(Ve,...Et)=>{(0,h.naY)()&&typeof console<"u"&&console[Ve](...Et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},1161:(ht,Te,O)=>{O.d(Te,{xv:()=>so,U0:()=>Vp,u0:()=>ao,CA:()=>Ma,lR:()=>Du});var h=O(7705),Z=O(2214),P=O(467),ee=O(7852),re=O(1076),le=O(1362),ge=O(8041);const Pe=(I,b)=>b.some(M=>I instanceof M);let he,V;const Ue=new WeakMap,Se=new WeakMap,qe=new WeakMap,Re=new WeakMap,ze=new WeakMap;let ft={get(I,b,M){if(I instanceof IDBTransaction){if("done"===b)return Se.get(I);if("objectStoreNames"===b)return I.objectStoreNames||qe.get(I);if("store"===b)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Ce(I[b])},set:(I,b,M)=>(I[b]=M,!0),has:(I,b)=>I instanceof IDBTransaction&&("done"===b||"store"===b)||b in I};function te(I){return"function"==typeof I?function _e(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function X(){return V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...b){return I.apply(Fe(this),b),Ce(Ue.get(this))}:function(...b){return Ce(I.apply(Fe(this),b))}:function(b,...M){const k=I.call(Fe(this),b,...M);return qe.set(k,b.sort?b.sort():[b]),Ce(k)}}(I):(I instanceof IDBTransaction&&function Et(I){if(Se.has(I))return;const b=new Promise((M,k)=>{const H=()=>{I.removeEventListener("complete",q),I.removeEventListener("error",fe),I.removeEventListener("abort",fe)},q=()=>{M(),H()},fe=()=>{k(I.error||new DOMException("AbortError","AbortError")),H()};I.addEventListener("complete",q),I.addEventListener("error",fe),I.addEventListener("abort",fe)});Se.set(I,b)}(I),Pe(I,function $(){return he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,ft):I)}function Ce(I){if(I instanceof IDBRequest)return function Ve(I){const b=new Promise((M,k)=>{const H=()=>{I.removeEventListener("success",q),I.removeEventListener("error",fe)},q=()=>{M(Ce(I.result)),H()},fe=()=>{k(I.error),H()};I.addEventListener("success",q),I.addEventListener("error",fe)});return b.then(M=>{M instanceof IDBCursor&&Ue.set(M,I)}).catch(()=>{}),ze.set(b,I),b}(I);if(Re.has(I))return Re.get(I);const b=te(I);return b!==I&&(Re.set(I,b),ze.set(b,I)),b}const Fe=I=>ze.get(I),Ct=["get","getKey","getAll","getAllKeys","count"],Gt=["put","add","delete","clear"],hr=new Map;function Xr(I,b){if(!(I instanceof IDBDatabase)||b in I||"string"!=typeof b)return;if(hr.get(b))return hr.get(b);const M=b.replace(/FromIndex$/,""),k=b!==M,H=Gt.includes(M);if(!(M in(k?IDBIndex:IDBObjectStore).prototype)||!H&&!Ct.includes(M))return;const q=function(){var fe=(0,P.A)(function*(He,...Be){const st=this.transaction(He,H?"readwrite":"readonly");let At=st.store;return k&&(At=At.index(Be.shift())),(yield Promise.all([At[M](...Be),H&&st.done]))[0]});return function(Be){return fe.apply(this,arguments)}}();return hr.set(b,q),q}!function ne(I){ft=I(ft)}(I=>({...I,get:(b,M,k)=>Xr(b,M)||I.get(b,M,k),has:(b,M)=>!!Xr(b,M)||I.has(b,M)}));const bs="@firebase/installations",Hn="0.6.4",ua=1e4,Ts=`w:${Hn}`,oe="FIS_v2",de="https://firebaseinstallations.googleapis.com/v1",ye=36e5,Ye=new re.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(I){return I instanceof re.g&&I.code.includes("request-failed")}function Dn({projectId:I}){return`${de}/projects/${I}/installations`}function wt(I){return{token:I.token,requestStatus:2,expiresIn:fr(I.expiresIn),creationTime:Date.now()}}function en(I,b){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,P.A)(function*(I,b){const k=(yield b.json()).error;return Ye.create("request-failed",{requestName:I,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function is({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Mn(I){return tn.apply(this,arguments)}function tn(){return(tn=(0,P.A)(function*(I){const b=yield I();return b.status>=500&&b.status<600?I():b})).apply(this,arguments)}function fr(I){return Number(I.replace("s","000"))}function fi(){return(fi=(0,P.A)(function*({appConfig:I,heartbeatServiceProvider:b},{fid:M}){const k=Dn(I),H=is(I),q=b.getImmediate({optional:!0});if(q){const st=yield q.getHeartbeatsHeader();st&&H.append("x-firebase-client",st)}const He={method:"POST",headers:H,body:JSON.stringify({fid:M,authVersion:oe,appId:I.appId,sdkVersion:Ts})},Be=yield Mn(()=>fetch(k,He));if(Be.ok){const st=yield Be.json();return{fid:st.fid||M,registrationStatus:2,refreshToken:st.refreshToken,authToken:wt(st.authToken)}}throw yield en("Create Installation",Be)})).apply(this,arguments)}function pi(I){return new Promise(b=>{setTimeout(b,I)})}const eu=/^[cdef][\w-]{21}$/,yt="";function zt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function xt(I){return function Ys(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return eu.test(M)?M:yt}catch{return yt}}function fn(I){return`${I.appName}!${I.appId}`}const Tn=new Map;function Yr(I,b){const M=fn(I);tu(M,b),function lt(I,b){const M=function $t(){return!Zr&&"BroadcastChannel"in self&&(Zr=new BroadcastChannel("[Firebase] FID Change"),Zr.onmessage=I=>{tu(I.data.key,I.data.fid)}),Zr}();M&&M.postMessage({key:I,fid:b}),function Zs(){0===Tn.size&&Zr&&(Zr.close(),Zr=null)}()}(M,b)}function tu(I,b){const M=Tn.get(I);if(M)for(const k of M)k(b)}let Zr=null;const As="firebase-installations-database",nu=1,Lr="firebase-installations-store";let Js=null;function $i(){return Js||(Js=function Ke(I,b,{blocked:M,upgrade:k,blocking:H,terminated:q}={}){const fe=indexedDB.open(I,b),He=Ce(fe);return k&&fe.addEventListener("upgradeneeded",Be=>{k(Ce(fe.result),Be.oldVersion,Be.newVersion,Ce(fe.transaction))}),M&&fe.addEventListener("blocked",()=>M()),He.then(Be=>{q&&Be.addEventListener("close",()=>q()),H&&Be.addEventListener("versionchange",()=>H())}).catch(()=>{}),He}(As,nu,{upgrade:(I,b)=>{0===b&&I.createObjectStore(Lr)}})),Js}function sr(I,b){return or.apply(this,arguments)}function or(){return(or=(0,P.A)(function*(I,b){const M=fn(I),H=(yield $i()).transaction(Lr,"readwrite"),q=H.objectStore(Lr),fe=yield q.get(M);return yield q.put(b,M),yield H.done,(!fe||fe.fid!==b.fid)&&Yr(I,b.fid),b})).apply(this,arguments)}function Ss(I){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,P.A)(function*(I){const b=fn(I),k=(yield $i()).transaction(Lr,"readwrite");yield k.objectStore(Lr).delete(b),yield k.done})).apply(this,arguments)}function Hi(I,b){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,P.A)(function*(I,b){const M=fn(I),H=(yield $i()).transaction(Lr,"readwrite"),q=H.objectStore(Lr),fe=yield q.get(M),He=b(fe);return void 0===He?yield q.delete(M):yield q.put(He,M),yield H.done,He&&(!fe||fe.fid!==He.fid)&&Yr(I,He.fid),He})).apply(this,arguments)}function B(I){return U.apply(this,arguments)}function U(){return U=(0,P.A)(function*(I){let b;const M=yield Hi(I.appConfig,k=>{const H=function K(I){return Gn(I||{fid:zt(),registrationStatus:0})}(k),q=function Ie(I,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ye.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},k=function ie(I,b){return rt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:k}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:It(I)}:{installationEntry:b}}(I,H);return b=q.registrationPromise,q.installationEntry});return M.fid===yt?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}}),U.apply(this,arguments)}function rt(){return rt=(0,P.A)(function*(I,b){try{const M=yield function vo(I,b){return fi.apply(this,arguments)}(I,b);return sr(I.appConfig,M)}catch(M){throw Ge(M)&&409===M.customData.serverCode?yield Ss(I.appConfig):yield sr(I.appConfig,{fid:b.fid,registrationStatus:0}),M}}),rt.apply(this,arguments)}function It(I){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,P.A)(function*(I){let b=yield nn(I.appConfig);for(;1===b.registrationStatus;)yield pi(100),b=yield nn(I.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:k}=yield B(I);return k||M}return b})).apply(this,arguments)}function nn(I){return Hi(I,b=>{if(!b)throw Ye.create("installation-not-found");return Gn(b)})}function Gn(I){return function Rt(I){return 1===I.registrationStatus&&I.registrationTime+ua<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function gr(){return(gr=(0,P.A)(function*({appConfig:I,heartbeatServiceProvider:b},M){const k=function Jr(I,{fid:b}){return`${Dn(I)}/${b}/authTokens:generate`}(I,M),H=function qt(I,{refreshToken:b}){const M=is(I);return M.append("Authorization",function Fr(I){return`${oe} ${I}`}(b)),M}(I,M),q=b.getImmediate({optional:!0});if(q){const st=yield q.getHeartbeatsHeader();st&&H.append("x-firebase-client",st)}const He={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:Ts,appId:I.appId}})},Be=yield Mn(()=>fetch(k,He));if(Be.ok)return wt(yield Be.json());throw yield en("Generate Auth Token",Be)})).apply(this,arguments)}function Ms(I){return ru.apply(this,arguments)}function ru(){return ru=(0,P.A)(function*(I,b=!1){let M;const k=yield Hi(I.appConfig,q=>{if(!Je(q))throw Ye.create("not-registered");const fe=q.authToken;if(!b&&function Jt(I){return 2===I.requestStatus&&!function zn(I){const b=Date.now();return b<I.creationTime||I.creationTime+I.expiresIn<b+ye}(I)}(fe))return q;if(1===fe.requestStatus)return M=function pe(I,b){return J.apply(this,arguments)}(I,b),q;{if(!navigator.onLine)throw Ye.create("app-offline");const He=function kn(I){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:b})}(q);return M=function ct(I,b){return gt.apply(this,arguments)}(I,He),He}});return M?yield M:k.authToken}),ru.apply(this,arguments)}function J(){return(J=(0,P.A)(function*(I,b){let M=yield Oe(I.appConfig);for(;1===M.authToken.requestStatus;)yield pi(100),M=yield Oe(I.appConfig);const k=M.authToken;return 0===k.requestStatus?Ms(I,b):k})).apply(this,arguments)}function Oe(I){return Hi(I,b=>{if(!Je(b))throw Ye.create("not-registered");return function ss(I){return 1===I.requestStatus&&I.requestTime+ua<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function gt(){return gt=(0,P.A)(function*(I,b){try{const M=yield function Qt(I,b){return gr.apply(this,arguments)}(I,b),k=Object.assign(Object.assign({},b),{authToken:M});return yield sr(I.appConfig,k),M}catch(M){if(!Ge(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const k=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield sr(I.appConfig,k)}else yield Ss(I.appConfig);throw M}}),gt.apply(this,arguments)}function Je(I){return void 0!==I&&2===I.registrationStatus}function Ns(){return(Ns=(0,P.A)(function*(I){const b=I,{installationEntry:M,registrationPromise:k}=yield B(b);return k?k.catch(console.error):Ms(b).catch(console.error),M.fid})).apply(this,arguments)}function iu(){return iu=(0,P.A)(function*(I,b=!1){const M=I;return yield function Ju(I){return Ti.apply(this,arguments)}(M),(yield Ms(M,b)).token}),iu.apply(this,arguments)}function Ti(){return(Ti=(0,P.A)(function*(I){const{registrationPromise:b}=yield B(I);b&&(yield b)})).apply(this,arguments)}function br(I){return Ye.create("missing-app-config-values",{valueName:I})}const oh="installations",Gm=I=>{const b=I.getProvider("app").getImmediate(),M=function tc(I){if(!I||!I.options)throw br("App Configuration");if(!I.name)throw br("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!I.options[M])throw br(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,ee._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},_o=I=>{const b=I.getProvider("app").getImmediate(),M=(0,ee._getProvider)(b,oh).getImmediate();return{getId:()=>function ei(I){return Ns.apply(this,arguments)}(M),getToken:H=>function dl(I){return iu.apply(this,arguments)}(M,H)}};(function vp(){(0,ee._registerComponent)(new le.uA(oh,Gm,"PUBLIC")),(0,ee._registerComponent)(new le.uA("installations-internal",_o,"PRIVATE"))})(),(0,ee.registerVersion)(bs,Hn),(0,ee.registerVersion)(bs,Hn,"esm2017");const nc="@firebase/remote-config",mr=new re.FA("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $e{constructor(b,M,k,H){this.client=b,this.storage=M,this.storageCache=k,this.logger=H}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-M,H=k<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${H}.`),H}fetch(b){var M=this;return(0,P.A)(function*(){const[k,H]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(H&&M.isCachedDataFresh(b.cacheMaxAgeMillis,k))return H;b.eTag=H&&H.eTag;const q=yield M.client.fetch(b),fe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===q.status&&fe.push(M.storage.setLastSuccessfulFetchResponse(q)),yield Promise.all(fe),q})()}}function Ft(I=navigator){return I.languages&&I.languages[0]||I.language}class dn{constructor(b,M,k,H,q,fe){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=k,this.projectId=H,this.apiKey=q,this.appId=fe}fetch(b){var M=this;return(0,P.A)(function*(){const[k,H]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,He={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Be={sdk_version:M.sdkVersion,app_instance_id:k,app_instance_id_token:H,app_id:M.appId,language_code:Ft()},st={method:"POST",headers:He,body:JSON.stringify(Be)},At=fetch(fe,st),Nt=new Promise((Oi,jr)=>{b.signal.addEventListener(()=>{const Cu=new Error("The operation was aborted.");Cu.name="AbortError",jr(Cu)})});let Yi;try{yield Promise.race([At,Nt]),Yi=yield At}catch(Oi){let jr="fetch-client-network";throw"AbortError"===Oi?.name&&(jr="fetch-timeout"),mr.create(jr,{originalErrorMessage:Oi?.message})}let yn=Yi.status;const Na=Yi.headers.get("ETag")||void 0;let xa,vn;if(200===Yi.status){let Oi;try{Oi=yield Yi.json()}catch(jr){throw mr.create("fetch-client-parse",{originalErrorMessage:jr?.message})}xa=Oi.entries,vn=Oi.state}if("INSTANCE_STATE_UNSPECIFIED"===vn?yn=500:"NO_CHANGE"===vn?yn=304:("NO_TEMPLATE"===vn||"EMPTY_CONFIG"===vn)&&(xa={}),304!==yn&&200!==yn)throw mr.create("fetch-status",{httpStatus:yn});return{status:yn,eTag:Na,config:xa}})()}}class Ur{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,P.A)(function*(){const k=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,k)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:k}){var H=this;return(0,P.A)(function*(){yield function gi(I,b){return new Promise((M,k)=>{const H=Math.max(b-Date.now(),0),q=setTimeout(M,H);I.addEventListener(()=>{clearTimeout(q),k(mr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const q=yield H.client.fetch(b);return yield H.storage.deleteThrottleMetadata(),q}catch(q){if(!function la(I){if(!(I instanceof re.g&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}(q))throw q;const fe={throttleEndTimeMillis:Date.now()+(0,re.p9)(k),backoffCount:k+1};return yield H.storage.setThrottleMetadata(fe),H.attemptFetch(b,fe)}})()}}class no{constructor(b,M,k,H,q){this.app=b,this._client=M,this._storageCache=k,this._storage=H,this._logger=q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function zi(I,b){const M=I.target.error||void 0;return mr.create(b,{originalErrorMessage:M&&M?.message})}const mt="app_namespace_store";class Jn{constructor(b,M,k,H=function Rs(){return new Promise((I,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=k=>{b(zi(k,"storage-open"))},M.onsuccess=k=>{I(k.target.result)},M.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(mt,{keyPath:"compositeKey"})}}catch(M){b(mr.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=b,this.appName=M,this.namespace=k,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,P.A)(function*(){const k=yield M.openDbPromise;return new Promise((H,q)=>{const He=k.transaction([mt],"readonly").objectStore(mt),Be=M.createCompositeKey(b);try{const st=He.get(Be);st.onerror=At=>{q(zi(At,"storage-get"))},st.onsuccess=At=>{const Nt=At.target.result;H(Nt?Nt.value:void 0)}}catch(st){q(mr.create("storage-get",{originalErrorMessage:st?.message}))}})})()}set(b,M){var k=this;return(0,P.A)(function*(){const H=yield k.openDbPromise;return new Promise((q,fe)=>{const Be=H.transaction([mt],"readwrite").objectStore(mt),st=k.createCompositeKey(b);try{const At=Be.put({compositeKey:st,value:M});At.onerror=Nt=>{fe(zi(Nt,"storage-set"))},At.onsuccess=()=>{q()}}catch(At){fe(mr.create("storage-set",{originalErrorMessage:At?.message}))}})})()}delete(b){var M=this;return(0,P.A)(function*(){const k=yield M.openDbPromise;return new Promise((H,q)=>{const He=k.transaction([mt],"readwrite").objectStore(mt),Be=M.createCompositeKey(b);try{const st=He.delete(Be);st.onerror=At=>{q(zi(At,"storage-delete"))},st.onsuccess=()=>{H()}}catch(st){q(mr.create("storage-delete",{originalErrorMessage:st?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class da{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,P.A)(function*(){const M=b.storage.getLastFetchStatus(),k=b.storage.getLastSuccessfulFetchTimestampMillis(),H=b.storage.getActiveConfig(),q=yield M;q&&(b.lastFetchStatus=q);const fe=yield k;fe&&(b.lastSuccessfulFetchTimestampMillis=fe);const He=yield H;He&&(b.activeConfig=He)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function uh(){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,P.A)(function*(){if(!(0,re.zW)())return!1;try{return yield(0,re.eX)()}catch{return!1}})).apply(this,arguments)}!function ni(){(0,ee._registerComponent)(new le.uA("remote-config",function I(b,{instanceIdentifier:M}){const k=b.getProvider("app").getImmediate(),H=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw mr.create("registration-window");if(!(0,re.zW)())throw mr.create("indexed-db-unavailable");const{projectId:q,apiKey:fe,appId:He}=k.options;if(!q)throw mr.create("registration-project-id");if(!fe)throw mr.create("registration-api-key");if(!He)throw mr.create("registration-app-id");const Be=new Jn(He,k.name,M=M||"firebase"),st=new da(Be),At=new ge.Vy(nc);At.logLevel=ge.$b.ERROR;const Nt=new dn(H,ee.SDK_VERSION,M,q,fe,He),Yi=new Ur(Nt,Be),yn=new $e(Yi,Be,st,At),Na=new no(k,yn,st,Be,At);return function yr(I){const b=(0,re.Ku)(I);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Na),Na},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(nc,"0.4.4"),(0,ee.registerVersion)(nc,"0.4.4","esm2017")}();const Os=(I,b)=>b.some(M=>I instanceof M);let ro,os;const ou=new WeakMap,as=new WeakMap,mi=new WeakMap,Tr=new WeakMap,Ps=new WeakMap;let ac={get(I,b,M){if(I instanceof IDBTransaction){if("done"===b)return as.get(I);if("objectStoreNames"===b)return I.objectStoreNames||mi.get(I);if("store"===b)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Sr(I[b])},set:(I,b,M)=>(I[b]=M,!0),has:(I,b)=>I instanceof IDBTransaction&&("done"===b||"store"===b)||b in I};function Dl(I){return"function"==typeof I?function Ar(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Il(){return os||(os=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...b){return I.apply(wo(this),b),Sr(ou.get(this))}:function(...b){return Sr(I.apply(wo(this),b))}:function(b,...M){const k=I.call(wo(this),b,...M);return mi.set(k,b.sort?b.sort():[b]),Sr(k)}}(I):(I instanceof IDBTransaction&&function ar(I){if(as.has(I))return;const b=new Promise((M,k)=>{const H=()=>{I.removeEventListener("complete",q),I.removeEventListener("error",fe),I.removeEventListener("abort",fe)},q=()=>{M(),H()},fe=()=>{k(I.error||new DOMException("AbortError","AbortError")),H()};I.addEventListener("complete",q),I.addEventListener("error",fe),I.addEventListener("abort",fe)});as.set(I,b)}(I),Os(I,function Xt(){return ro||(ro=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,ac):I)}function Sr(I){if(I instanceof IDBRequest)return function au(I){const b=new Promise((M,k)=>{const H=()=>{I.removeEventListener("success",q),I.removeEventListener("error",fe)},q=()=>{M(Sr(I.result)),H()},fe=()=>{k(I.error),H()};I.addEventListener("success",q),I.addEventListener("error",fe)});return b.then(M=>{M instanceof IDBCursor&&ou.set(M,I)}).catch(()=>{}),Ps.set(b,I),b}(I);if(Tr.has(I))return Tr.get(I);const b=Dl(I);return b!==I&&(Tr.set(I,b),Ps.set(b,I)),b}const wo=I=>Ps.get(I);function ii(I,b,{blocked:M,upgrade:k,blocking:H,terminated:q}={}){const fe=indexedDB.open(I,b),He=Sr(fe);return k&&fe.addEventListener("upgradeneeded",Be=>{k(Sr(fe.result),Be.oldVersion,Be.newVersion,Sr(fe.transaction))}),M&&fe.addEventListener("blocked",()=>M()),He.then(Be=>{q&&Be.addEventListener("close",()=>q()),H&&Be.addEventListener("versionchange",()=>H())}).catch(()=>{}),He}function io(I,{blocked:b}={}){const M=indexedDB.deleteDatabase(I);return b&&M.addEventListener("blocked",()=>b()),Sr(M).then(()=>{})}const Cl=["get","getKey","getAll","getAllKeys","count"],Ep=["put","add","delete","clear"],bl=new Map;function Tl(I,b){if(!(I instanceof IDBDatabase)||b in I||"string"!=typeof b)return;if(bl.get(b))return bl.get(b);const M=b.replace(/FromIndex$/,""),k=b!==M,H=Ep.includes(M);if(!(M in(k?IDBIndex:IDBObjectStore).prototype)||!H&&!Cl.includes(M))return;const q=function(){var fe=(0,P.A)(function*(He,...Be){const st=this.transaction(He,H?"readwrite":"readonly");let At=st.store;return k&&(At=At.index(Be.shift())),(yield Promise.all([At[M](...Be),H&&st.done]))[0]});return function(Be){return fe.apply(this,arguments)}}();return bl.set(b,q),q}!function Br(I){ac=I(ac)}(I=>({...I,get:(b,M,k)=>Tl(b,M)||I.get(b,M,k),has:(b,M)=>!!Tl(b,M)||I.has(b,M)}));const Al="/firebase-messaging-sw.js",Sl="/firebase-cloud-messaging-push-scope",ch="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zm="https://fcmregistrations.googleapis.com/v1",Cn="google.c.a.c_id",Km="google.c.a.c_l",wp="google.c.a.ts";var lh=function(I){return I.PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",I}(lh||{});function ks(I){const b=new Uint8Array(I);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ml(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(M),H=new Uint8Array(k.length);for(let q=0;q<k.length;++q)H[q]=k.charCodeAt(q);return H}const uc="fcm_token_details_db",Nl=5,Io="fcm_token_object_Store";function uu(){return uu=(0,P.A)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(q=>q.name).includes(uc))return null;let b=null;return(yield ii(uc,Nl,{upgrade:(k=(0,P.A)(function*(H,q,fe,He){var Be;if(q<2||!H.objectStoreNames.contains(Io))return;const st=He.objectStore(Io),At=yield st.index("fcmSenderId").get(I);if(yield st.clear(),At)if(2===q){const Nt=At;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;b={token:Nt.fcmToken,createTime:null!==(Be=Nt.createTime)&&void 0!==Be?Be:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:ks(Nt.vapidKey)}}}else if(3===q){const Nt=At;b={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ks(Nt.auth),p256dh:ks(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ks(Nt.vapidKey)}}}else if(4===q){const Nt=At;b={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ks(Nt.auth),p256dh:ks(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ks(Nt.vapidKey)}}}}),function(q,fe,He,Be){return k.apply(this,arguments)})})).close(),yield io(uc),yield io("fcm_vapid_details_db"),yield io("undefined"),function Wm(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:b}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}(b)?b:null;var k}),uu.apply(this,arguments)}const Fs="firebase-messaging-database",us=1,Ni="firebase-messaging-store";let xl=null;function Kn(){return xl||(xl=ii(Fs,us,{upgrade:(I,b)=>{0===b&&I.createObjectStore(Ni)}})),xl}function ha(I){return _r.apply(this,arguments)}function _r(){return _r=(0,P.A)(function*(I){const b=fa(I),k=yield(yield Kn()).transaction(Ni).objectStore(Ni).get(b);if(k)return k;{const H=yield function U_(I){return uu.apply(this,arguments)}(I.appConfig.senderId);if(H)return yield cc(I,H),H}}),_r.apply(this,arguments)}function cc(I,b){return cu.apply(this,arguments)}function cu(){return(cu=(0,P.A)(function*(I,b){const M=fa(I),H=(yield Kn()).transaction(Ni,"readwrite");return yield H.objectStore(Ni).put(b,M),yield H.done,b})).apply(this,arguments)}function lu(){return(lu=(0,P.A)(function*(I){const b=fa(I),k=(yield Kn()).transaction(Ni,"readwrite");yield k.objectStore(Ni).delete(b),yield k.done})).apply(this,arguments)}function fa({appConfig:I}){return I.appId}const ur=new re.FA("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function lc(I,b){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,P.A)(function*(I,b){const M=yield dc(I),k=qm(b),H={method:"POST",headers:M,body:JSON.stringify(k)};let q;try{q=yield(yield fetch(Ls(I.appConfig),H)).json()}catch(fe){throw ur.create("token-subscribe-failed",{errorInfo:fe?.toString()})}if(q.error)throw ur.create("token-subscribe-failed",{errorInfo:q.error.message});if(!q.token)throw ur.create("token-subscribe-no-token");return q.token})).apply(this,arguments)}function Pl(){return(Pl=(0,P.A)(function*(I,b){const M=yield dc(I),k=qm(b.subscriptionOptions),H={method:"PATCH",headers:M,body:JSON.stringify(k)};let q;try{q=yield(yield fetch(`${Ls(I.appConfig)}/${b.token}`,H)).json()}catch(fe){throw ur.create("token-update-failed",{errorInfo:fe?.toString()})}if(q.error)throw ur.create("token-update-failed",{errorInfo:q.error.message});if(!q.token)throw ur.create("token-update-no-token");return q.token})).apply(this,arguments)}function pa(I,b){return Do.apply(this,arguments)}function Do(){return(Do=(0,P.A)(function*(I,b){const k={method:"DELETE",headers:yield dc(I)};try{const q=yield(yield fetch(`${Ls(I.appConfig)}/${b}`,k)).json();if(q.error)throw ur.create("token-unsubscribe-failed",{errorInfo:q.error.message})}catch(H){throw ur.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function Ls({projectId:I}){return`${zm}/projects/${I}/registrations`}function dc(I){return hc.apply(this,arguments)}function hc(){return(hc=(0,P.A)(function*({appConfig:I,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function qm({p256dh:I,auth:b,endpoint:M,vapidKey:k}){const H={web:{endpoint:M,auth:b,p256dh:I}};return k!==ch&&(H.web.applicationPubKey=k),H}const Cp=6048e5;function fc(){return fc=(0,P.A)(function*(I){const b=yield function gc(I,b){return hh.apply(this,arguments)}(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:b.endpoint,auth:ks(b.getKey("auth")),p256dh:ks(b.getKey("p256dh"))},k=yield ha(I.firebaseDependencies);if(k){if(function fh(I,b){return b.vapidKey===I.vapidKey&&b.endpoint===I.endpoint&&b.auth===I.auth&&b.p256dh===I.p256dh}(k.subscriptionOptions,M))return Date.now()>=k.createTime+Cp?function Fl(I,b){return pc.apply(this,arguments)}(I,{token:k.token,createTime:Date.now(),subscriptionOptions:M}):k.token;try{yield pa(I.firebaseDependencies,k.token)}catch(H){console.warn(H)}return Ll(I.firebaseDependencies,M)}return Ll(I.firebaseDependencies,M)}),fc.apply(this,arguments)}function kl(){return kl=(0,P.A)(function*(I){const b=yield ha(I.firebaseDependencies);b&&(yield pa(I.firebaseDependencies,b.token),yield function dh(I){return lu.apply(this,arguments)}(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),kl.apply(this,arguments)}function pc(){return pc=(0,P.A)(function*(I,b){try{const M=yield function Ol(I,b){return Pl.apply(this,arguments)}(I.firebaseDependencies,b),k=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield cc(I.firebaseDependencies,k),M}catch(M){throw yield function bp(I){return kl.apply(this,arguments)}(I),M}}),pc.apply(this,arguments)}function Ll(I,b){return Co.apply(this,arguments)}function Co(){return(Co=(0,P.A)(function*(I,b){const k={token:yield lc(I,b),createTime:Date.now(),subscriptionOptions:b};return yield cc(I,k),k.token})).apply(this,arguments)}function hh(){return(hh=(0,P.A)(function*(I,b){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ml(b)})})).apply(this,arguments)}function du(I){const b={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function hu(I,b){if(!b.notification)return;I.notification={};const M=b.notification.title;M&&(I.notification.title=M);const k=b.notification.body;k&&(I.notification.body=k);const H=b.notification.image;H&&(I.notification.image=H);const q=b.notification.icon;q&&(I.notification.icon=q)}(b,I),function Tp(I,b){b.data&&(I.data=b.data)}(b,I),function Vl(I,b){var M,k,H,q,fe;if(!(b.fcmOptions||null!==(M=b.notification)&&void 0!==M&&M.click_action))return;I.fcmOptions={};const He=null!==(H=null===(k=b.fcmOptions)||void 0===k?void 0:k.link)&&void 0!==H?H:null===(q=b.notification)||void 0===q?void 0:q.click_action;He&&(I.fcmOptions.link=He);const Be=null===(fe=b.fcmOptions)||void 0===fe?void 0:fe.analytics_label;Be&&(I.fcmOptions.analyticsLabel=Be)}(b,I),b}function ph(I,b){const M=[];for(let k=0;k<I.length;k++)M.push(I.charAt(k)),k<b.length&&M.push(b.charAt(k));return M.join("")}function mc(I){return ur.create("missing-app-config-values",{valueName:I})}ph("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ph("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ym{constructor(b,M,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function gh(I){if(!I||!I.options)throw mc("App Configuration Object");if(!I.name)throw mc("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const k of b)if(!M[k])throw mc(k);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:H,installations:M,analyticsProvider:k}}_delete(){return Promise.resolve()}}function ga(){return(ga=(0,P.A)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Al,{scope:Sl}),I.swRegistration.update().catch(()=>{})}catch(b){throw ur.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function bo(){return(bo=(0,P.A)(function*(I,b){if(!b&&!I.swRegistration&&(yield function mh(I){return ga.apply(this,arguments)}(I)),b||!I.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");I.swRegistration=b}})).apply(this,arguments)}function To(){return(To=(0,P.A)(function*(I,b){b?I.vapidKey=b:I.vapidKey||(I.vapidKey=ch)})).apply(this,arguments)}function Bl(){return Bl=(0,P.A)(function*(I,b){if(!navigator)throw ur.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ur.create("permission-blocked");return yield function Vs(I,b){return To.apply(this,arguments)}(I,b?.vapidKey),yield function yh(I,b){return bo.apply(this,arguments)}(I,b?.serviceWorkerRegistration),function Qm(I){return fc.apply(this,arguments)}(I)}),Bl.apply(this,arguments)}function vh(){return(vh=(0,P.A)(function*(I,b,M){const k=function cs(I){switch(I){case lh.NOTIFICATION_CLICKED:return"notification_open";case lh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(b);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:M[Cn],message_name:M[Km],message_time:M[wp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ao(){return Ao=(0,P.A)(function*(I,b){const M=b.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===lh.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(du(M)):I.onMessageHandler.next(du(M)));const k=M.data;(function Xm(I){return"object"==typeof I&&!!I&&Cn in I})(k)&&"1"===k["google.c.a.e"]&&(yield function jl(I,b,M){return vh.apply(this,arguments)}(I,M.messageType,k))}),Ao.apply(this,arguments)}const on="@firebase/messaging",So=I=>{const b=new Ym(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function _h(I,b){return Ao.apply(this,arguments)}(b,M)),b},si=I=>{const b=I.getProvider("messaging").getImmediate();return{getToken:k=>function Ul(I,b){return Bl.apply(this,arguments)}(b,k)}};function $l(){return ls.apply(this,arguments)}function ls(){return(ls=(0,P.A)(function*(){try{yield(0,re.eX)()}catch{return!1}return typeof window<"u"&&(0,re.zW)()&&(0,re.dM)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Eh(){(0,ee._registerComponent)(new le.uA("messaging",So,"PUBLIC")),(0,ee._registerComponent)(new le.uA("messaging-internal",si,"PRIVATE")),(0,ee.registerVersion)(on,"0.12.4"),(0,ee.registerVersion)(on,"0.12.4","esm2017")}();const En="analytics",Sp="firebase_id",Gl="origin",St=6e4,vc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zl="https://www.googletagmanager.com/gtag/js",cr=new ge.Vy("@firebase/analytics"),Mr=new re.FA("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function va(I){if(!I.startsWith(zl)){const b=Mr.create("invalid-gtag-resource",{gtagURL:I});return cr.warn(b.message),""}return I}function Us(I){return Promise.all(I.map(b=>b.catch(M=>M)))}function fu(){return(fu=(0,P.A)(function*(I,b,M,k,H,q){const fe=k[H];try{if(fe)yield b[fe];else{const Be=(yield Us(M)).find(st=>st.measurementId===H);Be&&(yield b[Be.appId])}}catch(He){cr.error(He)}I("config",H,q)})).apply(this,arguments)}function Lt(){return(Lt=(0,P.A)(function*(I,b,M,k,H){try{let q=[];if(H&&H.send_to){let fe=H.send_to;Array.isArray(fe)||(fe=[fe]);const He=yield Us(M);for(const Be of fe){const st=He.find(Nt=>Nt.measurementId===Be),At=st&&b[st.appId];if(!At){q=[];break}q.push(At)}}0===q.length&&(q=Object.values(b)),yield Promise.all(q),I("event",k,H||{})}catch(q){cr.error(q)}})).apply(this,arguments)}const ql=30,Xl=new class oi{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Yl(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Mp(){return(Mp=(0,P.A)(function*(I){var b;const{appId:M,apiKey:k}=I,H={method:"GET",headers:Yl(k)},q=vc.replace("{app-id}",M),fe=yield fetch(q,H);if(200!==fe.status&&304!==fe.status){let He="";try{const Be=yield fe.json();null!==(b=Be.error)&&void 0!==b&&b.message&&(He=Be.error.message)}catch{}throw Mr.create("config-fetch-failed",{httpStatus:fe.status,responseMessage:He})}return fe.json()})).apply(this,arguments)}function tr(){return(tr=(0,P.A)(function*(I,b=Xl,M){const{appId:k,apiKey:H,measurementId:q}=I.options;if(!k)throw Mr.create("no-app-id");if(!H){if(q)return{measurementId:q,appId:k};throw Mr.create("no-api-key")}const fe=b.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new Ih;return setTimeout((0,P.A)(function*(){He.abort()}),void 0!==M?M:St),Bs({appId:k,apiKey:H,measurementId:q},fe,He,b)})).apply(this,arguments)}function Bs(I,b,M){return Zl.apply(this,arguments)}function Zl(){return Zl=(0,P.A)(function*(I,{throttleEndTimeMillis:b,backoffCount:M},k,H=Xl){var q;const{appId:fe,measurementId:He}=I;try{yield function xo(I,b){return new Promise((M,k)=>{const H=Math.max(b-Date.now(),0),q=setTimeout(M,H);I.addEventListener(()=>{clearTimeout(q),k(Mr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(k,b)}catch(Be){if(He)return cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${He} provided in the "measurementId" field in the local Firebase config. [${Be?.message}]`),{appId:fe,measurementId:He};throw Be}try{const Be=yield function ey(I){return Mp.apply(this,arguments)}(I);return H.deleteThrottleMetadata(fe),Be}catch(Be){const st=Be;if(!function Wi(I){if(!(I instanceof re.g&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}(st)){if(H.deleteThrottleMetadata(fe),He)return cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${He} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:fe,measurementId:He};throw Be}const At=503===Number(null===(q=st?.customData)||void 0===q?void 0:q.httpStatus)?(0,re.p9)(M,H.intervalMillis,ql):(0,re.p9)(M,H.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+At,backoffCount:M+1};return H.setThrottleMetadata(fe,Nt),cr.debug(`Calling attemptFetch again in ${At} millis`),Bs(I,Nt,k,H)}}),Zl.apply(this,arguments)}class Ih{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let pu,Dc;function Dh(){return(Dh=(0,P.A)(function*(I,b,M,k,H){if(H&&H.global)I("event",M,k);else{const q=yield b;I("event",M,Object.assign(Object.assign({},k),{send_to:q}))}})).apply(this,arguments)}function Ln(){return(Ln=(0,P.A)(function*(){if(!(0,re.zW)())return cr.warn(Mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eX)()}catch(I){return cr.warn(Mr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function et(){return et=(0,P.A)(function*(I,b,M,k,H,q,fe){var He;const Be=function Np(I){return tr.apply(this,arguments)}(I);Be.then(yn=>{M[yn.measurementId]=yn.appId,I.options.measurementId&&yn.measurementId!==I.options.measurementId&&cr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${yn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yn=>cr.error(yn)),b.push(Be);const st=function wa(){return Ln.apply(this,arguments)}().then(yn=>{if(yn)return k.getId()}),[At,Nt]=yield Promise.all([Be,st]);(function er(I){const b=window.document.getElementsByTagName("script");for(const M of Object.values(b))if(M.src&&M.src.includes(zl)&&M.src.includes(I))return M;return null})(q)||function Ec(I,b){const M=function _c(I,b){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(I,b)),M}("firebase-js-sdk-policy",{createScriptURL:va}),k=document.createElement("script"),H=`${zl}?l=${I}&id=${b}`;k.src=M?M?.createScriptURL(H):H,k.async=!0,document.head.appendChild(k)}(q,At.measurementId),Dc&&(H("consent","default",Dc),function Ro(I){Dc=I}(void 0)),H("js",new Date);const Yi=null!==(He=fe?.config)&&void 0!==He?He:{};return Yi[Gl]="firebase",Yi.update=!0,null!=Nt&&(Yi[Sp]=Nt),H("config",At.measurementId,Yi),pu&&(H("set",pu),function mu(I){pu=I}(void 0)),At.measurementId}),et.apply(this,arguments)}class Oo{constructor(b){this.app=b}_delete(){return delete xi[this.app.options.appId],Promise.resolve()}}let xi={},Jl=[];const ed={};let Ri,mn,yu="dataLayer",td=!1;function Ca(I,b,M){!function Cc(){const I=[];if((0,re.sr)()&&I.push("This is a browser extension environment."),(0,re.dM)()||I.push("Cookies are not available."),I.length>0){const b=I.map((k,H)=>`(${H+1}) ${k}`).join(" "),M=Mr.create("invalid-analytics-context",{errorInfo:b});cr.warn(M.message)}}();const k=I.options.appId;if(!k)throw Mr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Mr.create("no-api-key");cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xi[k])throw Mr.create("already-exists",{id:k});if(!td){!function Jm(I){let b=[];Array.isArray(window[I])?b=window[I]:window[I]=b}(yu);const{wrappedGtag:q,gtagCore:fe}=function Wl(I,b,M,k,H){let q=function(...fe){window[k].push(arguments)};return window[H]&&"function"==typeof window[H]&&(q=window[H]),window[H]=function wc(I,b,M,k){function q(){return q=(0,P.A)(function*(fe,...He){try{if("event"===fe){const[Be,st]=He;yield function Ae(I,b,M,k,H){return Lt.apply(this,arguments)}(I,b,M,Be,st)}else if("config"===fe){const[Be,st]=He;yield function Kl(I,b,M,k,H,q){return fu.apply(this,arguments)}(I,b,M,k,Be,st)}else if("consent"===fe){const[Be]=He;I("consent","update",Be)}else if("get"===fe){const[Be,st,At]=He;I("get",Be,st,At)}else if("set"===fe){const[Be]=He;I("set",Be)}else I(fe,...He)}catch(Be){cr.error(Be)}}),q.apply(this,arguments)}return function H(fe){return q.apply(this,arguments)}}(q,I,b,M),{gtagCore:q,wrappedGtag:window[H]}}(xi,Jl,ed,yu,"gtag");mn=q,Ri=fe,td=!0}return xi[k]=function Vn(I,b,M,k,H,q,fe){return et.apply(this,arguments)}(I,Jl,ed,b,Ri,yu,M),new Oo(I)}function Qi(){return bc.apply(this,arguments)}function bc(){return(bc=(0,P.A)(function*(){if((0,re.sr)()||!(0,re.dM)()||!(0,re.zW)())return!1;try{return yield(0,re.eX)()}catch{return!1}})).apply(this,arguments)}const rd="@firebase/analytics";!function ba(){(0,ee._registerComponent)(new le.uA(En,(b,{options:M})=>Ca(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ee._registerComponent)(new le.uA("analytics-internal",function I(b){try{const M=b.getProvider(En).getImmediate();return{logEvent:(k,H,q)=>function Tc(I,b,M,k){I=(0,re.Ku)(I),function ty(I,b,M,k,H){return Dh.apply(this,arguments)}(mn,xi[I.app.options.appId],b,M,k).catch(H=>cr.error(H))}(M,k,H,q)}}catch(M){throw Mr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ee.registerVersion)(rd,"0.10.0"),(0,ee.registerVersion)(rd,"0.10.0","esm2017")}();var Ta=O(6780),Ac=O(9687);const Pp=new class ko extends Ac.q{}(class Aa extends Ta.R{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(b,M,k):(b.flush(this),0)}});var Eu=O(3236),Sh=O(8141),ai=O(6745),wu=O(941);const so=new h.RxE("7.6.1"),Fo="__angularfire_symbol__analyticsIsSupportedValue",Lo="__angularfire_symbol__analyticsIsSupported",Vo="__angularfire_symbol__remoteConfigIsSupportedValue",oo="__angularfire_symbol__remoteConfigIsSupported",Uo="__angularfire_symbol__messagingIsSupportedValue",Sa="__angularfire_symbol__messagingIsSupported";function Du(I,b,M){if(b){if(1===b.length)return b[0];const q=b.filter(fe=>fe.app===M);if(1===q.length)return q[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Lo]||(globalThis[Lo]=Qi().then(I=>globalThis[Fo]=I).catch(()=>globalThis[Fo]=!1)),globalThis[Sa]||(globalThis[Sa]=$l().then(I=>globalThis[Uo]=I).catch(()=>globalThis[Uo]=!1)),globalThis[oo]||(globalThis[oo]=uh().then(I=>globalThis[Vo]=I).catch(()=>globalThis[Vo]=!1));const Ma=(I,b)=>{const M=b?[b]:(0,Z.Dk)(),k=[];return M.forEach(H=>{H.container.getProvider(I).instances.forEach(fe=>{k.includes(fe)||k.push(fe)})}),k};function jo(){}class Sc{constructor(b,M=Pp){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,k){const H=this.zone;return this.delegate.schedule(function(fe){H.runGuarded(()=>{b.apply(this,[fe])})},M,k)}}class Mc{constructor(b){this.zone=b,this.task=null}call(b,M){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jo,{},jo,jo)),M.pipe((0,Sh.M)({next:k,complete:k,error:k})).subscribe(b).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ao=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Sc(Zone.current)),this.insideAngular=M.run(()=>new Sc(Zone.current,Eu.E)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(h.KVO(h.SKi))},I.\u0275prov=h.jDH({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ds(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Vp(I){return ds(),function Up(I){return function(M){return(M=M.lift(new Mc(I.ngZone))).pipe((0,ai._)(I.outsideAngular),(0,wu.Q)(I.insideAngular))}}(ds())(I)}},1076:(ht,Te,O)=>{O.d(Te,{Am:()=>eu,Bd:()=>Ct,FA:()=>be,Fy:()=>Ce,I9:()=>yt,Im:()=>Fr,K3:()=>le,Ku:()=>Vr,Ll:()=>ue,T9:()=>ne,Uj:()=>he,XA:()=>_e,ZQ:()=>Fe,bD:()=>fi,cY:()=>te,dM:()=>ye,eX:()=>de,g:()=>ve,gR:()=>tn,hp:()=>zt,jZ:()=>Ke,lT:()=>bs,lV:()=>hr,nr:()=>Ts,p9:()=>Ss,sr:()=>Gt,tD:()=>fn,u:()=>V,zW:()=>oe,zw:()=>X});const ee=function(B){const U=[];let K=0;for(let Ie=0;Ie<B.length;Ie++){let ie=B.charCodeAt(Ie);ie<128?U[K++]=ie:ie<2048?(U[K++]=ie>>6|192,U[K++]=63&ie|128):55296==(64512&ie)&&Ie+1<B.length&&56320==(64512&B.charCodeAt(Ie+1))?(ie=65536+((1023&ie)<<10)+(1023&B.charCodeAt(++Ie)),U[K++]=ie>>18|240,U[K++]=ie>>12&63|128,U[K++]=ie>>6&63|128,U[K++]=63&ie|128):(U[K++]=ie>>12|224,U[K++]=ie>>6&63|128,U[K++]=63&ie|128)}return U},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,U){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ie=0;ie<B.length;ie+=3){const rt=B[ie],It=ie+1<B.length,Yt=It?B[ie+1]:0,nn=ie+2<B.length,Gn=nn?B[ie+2]:0;let gr=(15&Yt)<<2|Gn>>6,Jr=63&Gn;nn||(Jr=64,It||(gr=64)),Ie.push(K[rt>>2],K[(3&rt)<<4|Yt>>4],K[gr],K[Jr])}return Ie.join("")},encodeString(B,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(B):this.encodeByteArray(ee(B),U)},decodeString(B,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(B):function(B){const U=[];let K=0,Ie=0;for(;K<B.length;){const ie=B[K++];if(ie<128)U[Ie++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const rt=B[K++];U[Ie++]=String.fromCharCode((31&ie)<<6|63&rt)}else if(ie>239&&ie<365){const nn=((7&ie)<<18|(63&B[K++])<<12|(63&B[K++])<<6|63&B[K++])-65536;U[Ie++]=String.fromCharCode(55296+(nn>>10)),U[Ie++]=String.fromCharCode(56320+(1023&nn))}else{const rt=B[K++],It=B[K++];U[Ie++]=String.fromCharCode((15&ie)<<12|(63&rt)<<6|63&It)}}return U.join("")}(this.decodeStringToByteArray(B,U))},decodeStringToByteArray(B,U){this.init_();const K=U?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ie=0;ie<B.length;){const rt=K[B.charAt(ie++)],Yt=ie<B.length?K[B.charAt(ie)]:0;++ie;const Gn=ie<B.length?K[B.charAt(ie)]:64;++ie;const Qt=ie<B.length?K[B.charAt(ie)]:64;if(++ie,null==rt||null==Yt||null==Gn||null==Qt)throw new ge;Ie.push(rt<<2|Yt>>4),64!==Gn&&(Ie.push(Yt<<4&240|Gn>>2),64!==Qt&&Ie.push(Gn<<6&192|Qt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const he=function(B){return function(B){const U=ee(B);return le.encodeByteArray(U,!0)}(B).replace(/\./g,"")},V=function(B){try{return le.decodeString(B,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function X(B,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return U}for(const K in U)!U.hasOwnProperty(K)||!Ue(K)||(B[K]=X(B[K],U[K]));return B}function Ue(B){return"__proto__"!==B}const Ve=()=>{try{return function Se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=B&&V(B[1]);return U&&JSON.parse(U)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},ne=()=>{var B;return null===(B=Ve())||void 0===B?void 0:B.config},_e=B=>{var U;return null===(U=Ve())||void 0===U?void 0:U[`_${B}`]};class te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,K)=>{this.resolve=U,this.reject=K})}wrapCallback(U){return(K,Ie)=>{K?this.reject(K):this.resolve(Ie),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(K):U(K,Ie))}}}function Ce(B,U){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=U||"demo-project",ie=B.iat||0,rt=B.sub||B.user_id;if(!rt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const It=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ie,exp:ie+3600,auth_time:ie,sub:rt,user_id:rt,firebase:{sign_in_provider:"custom",identities:{}}},B);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(It)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ke(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function ue(){var B;const U=null===(B=Ve())||void 0===B?void 0:B.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ct(){return"object"==typeof self&&self.self===self}function Gt(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function hr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bs(){const B=Fe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ts(){return!ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oe(){try{return"object"==typeof indexedDB}catch{return!1}}function de(){return new Promise((B,U)=>{try{let K=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(Ie);ie.onsuccess=()=>{ie.result.close(),K||self.indexedDB.deleteDatabase(Ie),B(!0)},ie.onupgradeneeded=()=>{K=!1},ie.onerror=()=>{var rt;U((null===(rt=ie.error)||void 0===rt?void 0:rt.message)||"")}}catch(K){U(K)}})}function ye(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ve extends Error{constructor(U,K,Ie){super(K),this.code=U,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,be.prototype.create)}}class be{constructor(U,K,Ie){this.service=U,this.serviceName=K,this.errors=Ie}create(U,...K){const Ie=K[0]||{},ie=`${this.service}/${U}`,rt=this.errors[U],It=rt?function Ye(B,U){return B.replace(Ge,(K,Ie)=>{const ie=U[Ie];return null!=ie?String(ie):`<${Ie}?>`})}(rt,Ie):"Error";return new ve(ie,`${this.serviceName}: ${It} (${ie}).`,Ie)}}const Ge=/\{\$([^}]+)}/g;function tn(B,U){return Object.prototype.hasOwnProperty.call(B,U)}function Fr(B){for(const U in B)if(Object.prototype.hasOwnProperty.call(B,U))return!1;return!0}function fi(B,U){if(B===U)return!0;const K=Object.keys(B),Ie=Object.keys(U);for(const ie of K){if(!Ie.includes(ie))return!1;const rt=B[ie],It=U[ie];if(pi(rt)&&pi(It)){if(!fi(rt,It))return!1}else if(rt!==It)return!1}for(const ie of Ie)if(!K.includes(ie))return!1;return!0}function pi(B){return null!==B&&"object"==typeof B}function eu(B){const U=[];for(const[K,Ie]of Object.entries(B))Array.isArray(Ie)?Ie.forEach(ie=>{U.push(encodeURIComponent(K)+"="+encodeURIComponent(ie))}):U.push(encodeURIComponent(K)+"="+encodeURIComponent(Ie));return U.length?"&"+U.join("&"):""}function yt(B){const U={};return B.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ie,rt]=Ie.split("=");U[decodeURIComponent(ie)]=decodeURIComponent(rt)}}),U}function zt(B){const U=B.indexOf("?");if(!U)return"";const K=B.indexOf("#",U);return B.substring(U,K>0?K:void 0)}function fn(B,U){const K=new Tn(B,U);return K.subscribe.bind(K)}class Tn{constructor(U,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{U(this)}).catch(Ie=>{this.error(Ie)})}next(U){this.forEachObserver(K=>{K.next(U)})}error(U){this.forEachObserver(K=>{K.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,K,Ie){let ie;if(void 0===U&&void 0===K&&void 0===Ie)throw new Error("Missing Observer.");ie=function an(B,U){if("object"!=typeof B||null===B)return!1;for(const K of U)if(K in B&&"function"==typeof B[K])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:K,complete:Ie},void 0===ie.next&&(ie.next=pr),void 0===ie.error&&(ie.error=pr),void 0===ie.complete&&(ie.complete=pr);const rt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch{}}),this.observers.push(ie),rt}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,U)}sendOne(U,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{K(this.observers[U])}catch(Ie){typeof console<"u"&&console.error&&console.error(Ie)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pr(){}const Js=1e3,$i=2,sr=144e5,or=.5;function Ss(B,U=Js,K=$i){const Ie=U*Math.pow(K,B),ie=Math.round(or*Ie*(Math.random()-.5)*2);return Math.min(sr,Ie+ie)}function Vr(B){return B&&B._delegate?B._delegate:B}},5283:(ht,Te,O)=>{var h=O(7705);let Z=null;function P(){return Z}class re{}const le=new h.nKC("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)(he)},providedIn:"platform"})}return n})();const Pe=new h.nKC("Location Initialized");let he=(()=>{class n extends ge{constructor(){super(),this._doc=(0,h.WQX)(le),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function V(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)(qe)},providedIn:"root"})}return n})();const Se=new h.nKC("appBaseHref");let qe=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.WQX)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+X(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+X(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(ge),h.KVO(Se,8))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Re=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=V(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+X(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+X(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(ge),h.KVO(Se,8))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})(),ze=(()=>{class n{constructor(t){this._subject=new h.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ne(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}($(ft(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function Et(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ft(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=V;static#n=this.stripTrailingSlash=$;static#r=this.\u0275fac=function(r){return new(r||n)(h.KVO(Ue))};static#i=this.\u0275prov=h.jDH({token:n,factory:function(){return function Ve(){return new ze((0,h.KVO)(Ue))}()},providedIn:"root"})}return n})();function ft(n){return n.replace(/\/index.html$/,"")}const Ns=/\s+/,dl=[];let iu=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this.initialClasses=dl,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Ns):dl}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ns):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],s=t[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Ns).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(h._q3),h.rXU(h.MKu),h.rXU(h.aKT),h.rXU(h.sFG))};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class ec{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new ec(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),hl(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{hl(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(h.c1b),h.rXU(h.C4Q),h.rXU(h._q3))};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function hl(n,e){n.context.$implicit=e.item}let xs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yp("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yp("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(h.c1b),h.rXU(h.C4Q))};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class mp{constructor(){this.$implicit=null,this.ngIf=null}}function yp(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.Tbb)(e)}'.`)}let to=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.$C({type:n});static#n=this.\u0275inj=h.G2t({})}return n})();function su(n){return"server"===n}let ni=(()=>{class n{static#e=this.\u0275prov=(0,h.jDH)({token:n,providedIn:"root",factory:()=>new ri((0,h.KVO)(le),window)})}return n})();class ri{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Mi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class fh extends re{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class du extends fh{static makeCurrent(){!function ee(n){Z||(Z=n)}(new du)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Tp(){return hu=hu||document.querySelector("base"),hu?hu.getAttribute("href"):null}();return null==t?null:function Xm(n){Vl=Vl||document.createElement("a"),Vl.setAttribute("href",n);const e=Vl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ei(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Vl,hu=null,gh=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();const mc=new h.nKC("EventManagerPlugins");let Ym=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new h.wOt(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(mc),h.KVO(h.SKi))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();class mh{constructor(e){this._doc=e}}const ga="ng-app-id";let yh=(()=>{class n{constructor(t,r,s,u={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=su(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${ga}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const u=s.get(t);return u.usage+=r,u.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,u=s?.get(r);if(u?.parentNode===t)return s.delete(r),u.removeAttribute(ga),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(ga,this.appId),l}}addStyleToHost(t,r){const s=this.getStyleElement(t,r);t.appendChild(s);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(s):u.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(le),h.KVO(h.sZ2),h.KVO(h.BIS,8),h.KVO(h.Agw))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();const bo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vs=/%COMP%/g,vh=new h.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ao(n,e){return e.map(t=>t.replace(Vs,n))}let on=(()=>{class n{constructor(t,r,s,u,l,m,v,D=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=u,this.doc=l,this.platformId=m,this.ngZone=v,this.nonce=D,this.rendererByCompId=new Map,this.platformIsServer=su(m),this.defaultRenderer=new ma(t,l,v,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.gXe.ShadowDom&&(r={...r,encapsulation:h.gXe.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof yi?s.applyToHost(t):s instanceof ls&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.doc,m=this.ngZone,v=this.eventManager,D=this.sharedStylesHost,T=this.removeStylesOnCompDestroy,N=this.platformIsServer;switch(r.encapsulation){case h.gXe.Emulated:u=new yi(v,D,r,this.appId,T,l,m,N);break;case h.gXe.ShadowDom:return new $l(v,D,t,r,l,m,this.nonce,N);default:u=new ls(v,D,r,T,l,m,N)}s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(Ym),h.KVO(yh),h.KVO(h.sZ2),h.KVO(vh),h.KVO(le),h.KVO(h.Agw),h.KVO(h.SKi),h.KVO(h.BIS))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();class ma{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(bo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Eh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Eh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.wOt(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=bo[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=bo[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.czy.DashCase|h.czy.Important)?e.style.setProperty(t,r,s&h.czy.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.czy.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=P().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Eh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $l extends ma{constructor(e,t,r,s,u,l,m,v){super(e,u,l,v),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=Ao(s.id,s.styles);for(const T of D){const N=document.createElement("style");m&&N.setAttribute("nonce",m),N.textContent=T,this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ls extends ma{constructor(e,t,r,s,u,l,m,v){super(e,u,l,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=v?Ao(v,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class yi extends ls{constructor(e,t,r,s,u,l,m,v){const D=s+"-"+r.id;super(e,t,r,u,l,m,v,D),this.contentAttr=function cs(n){return"_ngcontent-%COMP%".replace(Vs,n)}(D),this.hostAttr=function _h(n){return"_nghost-%COMP%".replace(Vs,n)}(D)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let ya=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(le))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();const Ap=["alt","control","meta","shift"],Mo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},No={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yc=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Ap.forEach(D=>{const T=r.indexOf(D);T>-1&&(r.splice(T,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=s,v.fullKey=l,v}static matchEventFullKeyCode(t,r){let s=Mo[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Ap.forEach(l=>{l!==s&&(0,No[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(le))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();const cr=(0,h.oH4)(h.fpN,"browser",[{provide:h.Agw,useValue:"browser"},{provide:h.PLl,useValue:function Gl(){du.makeCurrent()},multi:!0},{provide:le,useFactory:function vc(){return(0,h.TL$)(document),document},deps:[]}]),wh=new h.nKC(""),Mr=[{provide:h.e01,useClass:class ph{addToWindow(e){h.JZv.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new h.wOt(5103,!1);return u},h.JZv.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.JZv.getAllAngularRootElements=()=>e.getAllRootElements(),h.JZv.frameworkStabilizers||(h.JZv.frameworkStabilizers=[]),h.JZv.frameworkStabilizers.push(r=>{const s=h.JZv.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(v){l=l||v,u--,0==u&&r(l)};s.forEach(v=>{v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.WHO,useClass:h.NYb,deps:[h.SKi,h.giA,h.e01]},{provide:h.NYb,useClass:h.NYb,deps:[h.SKi,h.giA,h.e01]}],va=[{provide:h.H8p,useValue:"root"},{provide:h.zcH,useFactory:function St(){return new h.zcH},deps:[]},{provide:mc,useClass:ya,multi:!0,deps:[le,h.SKi,h.Agw]},{provide:mc,useClass:yc,multi:!0,deps:[le]},on,yh,Ym,{provide:h._9s,useExisting:on},{provide:class Ki{},useClass:gh,deps:[]},[]];let Us=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.sZ2,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(wh,12))};static#t=this.\u0275mod=h.$C({type:n});static#n=this.\u0275inj=h.G2t({providers:[...va,...Mr],imports:[to,h.Hbi]})}return n})(),fu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(le))};static#t=this.\u0275prov=h.jDH({token:n,factory:function(r){let s=null;return s=r?new r:function Kl(){return new fu((0,h.KVO)(le))}(),s},providedIn:"root"})}return n})();typeof window<"u"&&window;let xo=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:function(r){let s=null;return s=r?new(r||n):h.KVO(Ih),s},providedIn:"root"})}return n})(),Ih=(()=>{class n extends xo{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.WPN.NONE:return r;case h.WPN.HTML:return(0,h.ZF7)(r,"HTML")?(0,h.rcV)(r):(0,h.h9k)(this._doc,String(r)).toString();case h.WPN.STYLE:return(0,h.ZF7)(r,"Style")?(0,h.rcV)(r):r;case h.WPN.SCRIPT:if((0,h.ZF7)(r,"Script"))return(0,h.rcV)(r);throw new h.wOt(5200,!1);case h.WPN.URL:return(0,h.ZF7)(r,"URL")?(0,h.rcV)(r):(0,h.$MX)(String(r));case h.WPN.RESOURCE_URL:if((0,h.ZF7)(r,"ResourceURL"))return(0,h.rcV)(r);throw new h.wOt(5201,!1);default:throw new h.wOt(5202,!1)}}bypassSecurityTrustHtml(t){return(0,h.Kcf)(t)}bypassSecurityTrustStyle(t){return(0,h.cWb)(t)}bypassSecurityTrustScript(t){return(0,h.UyX)(t)}bypassSecurityTrustUrl(t){return(0,h.osQ)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.e5t)(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(le))};static#t=this.\u0275prov=h.jDH({token:n,factory:function(r){let s=null;return s=r?new r:function Wi(n){return new Ih(n.get(le))}(h.KVO(h.zZn)),s},providedIn:"root"})}return n})();var pn=O(8455),qi=O(1985);const{isArray:_a}=Array,{getPrototypeOf:bh,prototype:Ea,keys:Dc}=Object;function Ro(n){if(1===n.length){const e=n[0];if(_a(e))return{args:e,keys:null};if(function mu(n){return n&&"object"==typeof n&&bh(n)===Ea}(e)){const t=Dc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var wa=O(8750),Ln=O(3794),Vn=O(4360),et=O(6354);const{isArray:Oo}=Array;function Jl(n){return(0,et.T)(e=>function xi(n,e){return Oo(e)?n(...e):n(e)}(n,e))}function ed(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let Ia=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(h.sFG),h.rXU(h.aKT))};static#t=this.\u0275dir=h.FsC({type:n})}return n})(),Ri=(()=>{class n extends Ia{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=h.xGo(n)))(s||n)}}();static#t=this.\u0275dir=h.FsC({type:n,features:[h.Vt3]})}return n})();const mn=new h.nKC("NgValueAccessor"),Cc={provide:mn,useExisting:(0,h.Rfq)(()=>Po),multi:!0},Th=new h.nKC("CompositionEventMode");let Po=(()=>{class n extends Ia{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ca(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(h.sFG),h.rXU(h.aKT),h.rXU(Th,8))};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&h.bIt("input",function(l){return s._handleInput(l.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(l){return s._compositionEnd(l.target.value)})},features:[h.Jv_([Cc]),h.Vt3]})}return n})();function Qi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const bn=new h.nKC("NgValidators"),Xi=new h.nKC("NgAsyncValidators"),nd=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Rp(n){return Qi(n.value)?{required:!0}:null}function Op(n){return Qi(n.value)||nd.test(n.value)?null:{email:!0}}function Ta(n){return null}function Aa(n){return null!=n}function Ac(n){return(0,h.jNT)(n)?(0,pn.H)(n):n}function ko(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Pp(n,e){return e.map(t=>t(n))}function Eu(n){return n.map(e=>function kp(n){return!n.validate}(e)?e:t=>e.validate(t))}function ai(n){return null!=n?function Sh(n){if(!n)return null;const e=n.filter(Aa);return 0==e.length?null:function(t){return ko(Pp(t,e))}}(Eu(n)):null}function so(n){return null!=n?function wu(n){if(!n)return null;const e=n.filter(Aa);return 0==e.length?null:function(t){return function yu(...n){const e=(0,Ln.ms)(n),{args:t,keys:r}=Ro(n),s=new qi.c(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let v=l,D=l;for(let T=0;T<l;T++){let N=!1;(0,wa.Tg)(t[T]).subscribe((0,Vn._)(u,L=>{N||(N=!0,D--),m[T]=L},()=>v--,void 0,()=>{(!v||!N)&&(D||u.next(r?ed(r,m):m),u.complete())}))}});return e?s.pipe(Jl(e)):s}(Pp(t,e).map(Ac)).pipe((0,et.T)(ko))}}(Eu(n)):null}function Fo(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function oo(n){return n?Array.isArray(n)?n:[n]:[]}function Uo(n,e){return Array.isArray(n)?n.includes(e):n===e}function Sa(n,e){const t=oo(e);return oo(n).forEach(s=>{Uo(t,s)||t.push(s)}),t}function Iu(n,e){return oo(e).filter(t=>!Uo(n,t))}class id{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ai(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=so(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Er extends id{get formDirective(){return null}get path(){return null}}class Bo extends id{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Du{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Sc=(()=>{class n extends Du{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(Bo,2))};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&h.AVh("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[h.Vt3]})}return n})(),Mc=(()=>{class n extends Du{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(Er,10))};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&h.AVh("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[h.Vt3]})}return n})();const He="VALID",Be="INVALID",st="PENDING",At="DISABLED";function Nt(n){return(xa(n)?n.validators:n)||null}function yn(n,e){return(xa(e)?e.asyncValidators:n)||null}function xa(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class jr{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===He}get invalid(){return this.status===Be}get pending(){return this.status==st}get disabled(){return this.status===At}get enabled(){return this.status!==At}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Sa(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Sa(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Iu(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Iu(e,this._rawAsyncValidators))}hasValidator(e){return Uo(this._rawValidators,e)}hasAsyncValidator(e){return Uo(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=st,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=At,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=He,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===He||this.status===st)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?At:He}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=st,this._hasOwnPendingAsyncValidator=!0;const t=Ac(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.bkB,this.statusChanges=new h.bkB}_calculateStatus(){return this._allControlsDisabled()?At:this.errors?Be:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(st)?st:this._anyControlsHaveStatus(Be)?Be:He}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xa(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Yi(n){return Array.isArray(n)?ai(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Na(n){return Array.isArray(n)?so(n):n||null}(this._rawAsyncValidators)}}class Cu extends jr{constructor(e,t,r){super(Nt(t),yn(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Oi(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new h.wOt(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function vn(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.wOt(1e3,"");if(!r[t])throw new h.wOt(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e?e[s]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const $s=new h.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>bu}),bu="always";function xc(n,e,t=bu){Ra(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Hp(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&$_(n,e)})}(n,e),function Tu(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function j_(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&$_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function jp(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ui(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ra(n,e){const t=function Lo(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Fo(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Vo(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Fo(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();ui(e._rawValidators,s),ui(e._rawAsyncValidators,s)}function $_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const ay={provide:Er,useExisting:(0,h.Rfq)(()=>cd)},ud=(()=>Promise.resolve())();let cd=(()=>{class n extends Er{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.bkB,this.form=new Cu({},ai(t),so(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ud.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),xc(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ud.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ud.then(()=>{const r=this._findContainer(t.path),s=new Cu({});(function iy(n,e){Ra(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ud.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ud.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function oy(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(bn,10),h.rXU(Xi,10),h.rXU($s,8))};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&h.bIt("submit",function(l){return s.onSubmit(l)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h.Jv_([ay]),h.Vt3]})}return n})();function Pa(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ka(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const uy=class extends jr{constructor(e=null,t,r){super(Nt(t),yn(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xa(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ka(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pa(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pa(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ka(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},cy={provide:Bo,useExisting:(0,h.Rfq)(()=>ly)},Xp=(()=>Promise.resolve())();let ly=(()=>{class n extends Bo{constructor(t,r,s,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new uy,this._registered=!1,this.name="",this.update=new h.bkB,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Rc(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Po?t=u:function xh(n){return Object.getPrototypeOf(n.constructor)===Ri}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ad(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){xc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Xp.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,h.L39)(r);Xp.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Nh(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(Er,9),h.rXU(bn,10),h.rXU(Xi,10),h.rXU(mn,10),h.rXU(h.gRc,8),h.rXU($s,8))};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h.Jv_([cy]),h.Vt3,h.OA$]})}return n})(),kh=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),z_=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.$C({type:n});static#n=this.\u0275inj=h.G2t({})}return n})(),vi=(()=>{class n{constructor(){this._validator=Ta}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ta,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=h.FsC({type:n,features:[h.OA$]})}return n})();const xr={provide:bn,useExisting:(0,h.Rfq)(()=>gd),multi:!0};let gd=(()=>{class n extends vi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.L39,this.createValidator=t=>Rp}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=h.xGo(n)))(s||n)}}();static#t=this.\u0275dir=h.FsC({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){2&r&&h.BMQ("required",s._enabled?"":null)},inputs:{required:"required"},features:[h.Jv_([xr]),h.Vt3]})}return n})();const Q_={provide:bn,useExisting:(0,h.Rfq)(()=>_),multi:!0};let _=(()=>{class n extends vi{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=h.L39,this.createValidator=t=>Op}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=h.xGo(n)))(s||n)}}();static#t=this.\u0275dir=h.FsC({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[h.Jv_([Q_]),h.Vt3]})}return n})(),tt=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.$C({type:n});static#n=this.\u0275inj=h.G2t({imports:[z_]})}return n})(),md=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$s,useValue:t.callSetDisabledState??bu}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.$C({type:n});static#n=this.\u0275inj=h.G2t({imports:[tt]})}return n})();var hs=O(4783),ig=O(3236),Tt=O(7673),$r=O(1161),Mu=O(6365);function vy(...n){return function X_(){return(0,Mu.U)(1)}()((0,pn.H)(n,(0,Ln.lI)(n)))}var Pi=O(9974);function zh(...n){const e=(0,Ln.lI)(n);return(0,Pi.N)((t,r)=>{(e?vy(n,t,e):vy(n,t)).subscribe(r)})}function sg(){return(0,Pi.N)((n,e)=>{let t,r=!1;n.subscribe((0,Vn._)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function _y(n,e){return(0,Pi.N)(function PA(n,e,t,r,s){return(u,l)=>{let m=t,v=e,D=0;u.subscribe((0,Vn._)(l,T=>{const N=D++;v=m?n(v,T,N):(m=!0,T),r&&l.next(v)},s&&(()=>{m&&l.next(v),l.complete()})))}}(n,e,arguments.length>=2,!0))}var Y_=O(3294);function co(n,e){return(0,Pi.N)((t,r)=>{let s=0;t.subscribe((0,Vn._)(r,u=>n.call(e,u,s++)&&r.next(u)))})}O(6922);var nt,pD=O(3345),Ee=O(467),yd=O(7852),Z_=O(1362),$o=O(8041),hn=O(1076),gD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lo={},og=og||{},Bt=gD||self;function vd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Nu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ag="closure_uid_"+(1e9*Math.random()>>>0),Ey=0;function yD(n,e,t){return n.call.apply(n.bind,arguments)}function J_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Rr(n,e,t){return(Rr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yD:J_).apply(null,arguments)}function wy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Hr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function Fc(){this.s=this.s,this.o=this.o}Fc.prototype.s=!1,Fc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function mD(n){Object.prototype.hasOwnProperty.call(n,ag)&&n[ag]||(n[ag]=++Ey)}(this)},Fc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vD=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Iy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function e0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(vd(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Gr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Gr.prototype.h=function(){this.defaultPrevented=!0};var t0=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",()=>{},e),Bt.removeEventListener("test",()=>{},e)}catch{}return n}();function La(n){return/^[\s\xa0]*$/.test(n)}function Dy(){var n=Bt.navigator;return n&&(n=n.userAgent)?n:""}function Va(n){return-1!=Dy().indexOf(n)}function _D(n){return _D[" "](n),n}_D[" "]=function(){};var by,n,n0=Va("Opera"),Wh=Va("Trident")||Va("MSIE"),_d=Va("Edge"),qh=_d||Wh,Cy=Va("Gecko")&&!(-1!=Dy().toLowerCase().indexOf("webkit")&&!Va("Edge"))&&!(Va("Trident")||Va("MSIE"))&&!Va("Edge"),ED=-1!=Dy().toLowerCase().indexOf("webkit")&&!Va("Edge");function r0(){var n=Bt.document;return n?n.documentMode:void 0}e:{var xu="",s0=(n=Dy(),Cy?/rv:([^\);]+)(\)|;)/.exec(n):_d?/Edge\/([\d\.]+)/.exec(n):Wh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ED?/WebKit\/(\S+)/.exec(n):n0?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(s0&&(xu=s0?s0[1]:""),Wh){var o0=r0();if(null!=o0&&o0>parseFloat(xu)){by=String(o0);break e}}by=xu}var LA=Bt.document&&Wh&&(r0()||parseInt(by,10))||void 0;function Gs(n,e){if(Gr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Cy){e:{try{_D(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Qh[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Gs.$.h.call(this)}}Hr(Gs,Gr);var Qh={2:"touch",3:"pen",4:"mouse"};Gs.prototype.h=function(){Gs.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ug="closure_listenable_"+(1e6*Math.random()|0),VA=0;function UA(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++VA,this.fa=this.ia=!1}function Ty(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function u0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function c0(n){const e={};for(const t in n)e[t]=n[t];return e}const ID="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function DD(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<ID.length;u++)t=ID[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ay(n){this.src=n,this.g={},this.h=0}function l0(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=vD(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Ty(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Xh(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Ay.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Xh(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new UA(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Ho="closure_lm_"+(1e6*Math.random()|0),Ed={};function d0(n,e,t,r,s){if(r&&r.once)return jA(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)d0(n,e[u],t,r,s);return null}return t=My(t),n&&n[ug]?n.O(e,t,Nu(r)?!!r.capture:!!r,s):h0(n,e,t,!1,r,s)}function h0(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Nu(s)?!!s.capture:!!s,m=TD(n);if(m||(n[Ho]=m=new Ay(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function CD(){const e=f0;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)t0||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Sy(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jA(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)jA(n,e[u],t,r,s);return null}return t=My(t),n&&n[ug]?n.P(e,t,Nu(r)?!!r.capture:!!r,s):h0(n,e,t,!0,r,s)}function $A(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)$A(n,e[u],t,r,s);else r=Nu(r)?!!r.capture:!!r,t=My(t),n&&n[ug]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Xh(u=n.g[e],t,r,s))&&(Ty(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=TD(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Xh(e,t,r,s)),(t=-1<n?e[n]:null)&&bD(t))}function bD(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[ug])l0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Sy(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=TD(e))?(l0(t,n),0==t.h&&(t.src=null,e[Ho]=null)):Ty(n)}}}function Sy(n){return n in Ed?Ed[n]:Ed[n]="on"+n}function f0(n,e){if(n.fa)n=!0;else{e=new Gs(e,this);var t=n.listener,r=n.la||n.src;n.ia&&bD(n),n=t.call(r,e)}return n}function TD(n){return(n=n[Ho])instanceof Ay?n:null}var AD="__closure_events_fn_"+(1e9*Math.random()>>>0);function My(n){return"function"==typeof n?n:(n[AD]||(n[AD]=function(e){return n.handleEvent(e)}),n[AD])}function di(){Fc.call(this),this.i=new Ay(this),this.S=this,this.J=null}function _i(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Gr(e,n);else if(e instanceof Gr)e.target=e.target||n;else{var s=e;DD(e=new Gr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=Ny(l,r,!0,e)&&s}if(s=Ny(l=e.g=n,r,!0,e)&&s,s=Ny(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Ny(l=e.g=t[u],r,!1,e)&&s}function Ny(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,v=l.la||l.src;l.ia&&l0(n.i,l),s=!1!==m.call(v,r)&&s}}return s&&!r.defaultPrevented}Hr(di,Fc),di.prototype[ug]=!0,di.prototype.removeEventListener=function(n,e,t,r){$A(this,n,e,t,r)},di.prototype.N=function(){if(di.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ty(t[r]);delete n.g[e],n.h--}}this.J=null},di.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},di.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var p0=Bt.JSON.stringify;function xy(){var n=Oy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ry=new class SD{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new HA,n=>n.reset());class HA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wd(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function ND(n){Bt.setTimeout(()=>{throw n},0)}let cg,Id=!1,Oy=new class MD{constructor(){this.h=this.g=null}add(e,t){const r=Ry.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},xD=()=>{const n=Bt.Promise.resolve(void 0);cg=()=>{n.then(GA)}};var GA=()=>{for(var n;n=xy();){try{n.h.call(n.g)}catch(t){ND(t)}var e=Ry;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Id=!1};function Py(n,e){di.call(this),this.h=n||1,this.g=e||Bt,this.j=Rr(this.qb,this),this.l=Date.now()}function g0(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function ky(n,e,t){if("function"==typeof n)t&&(n=Rr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Rr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function zA(n){n.g=ky(()=>{n.g=null,n.i&&(n.i=!1,zA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hr(Py,di),(nt=Py.prototype).ga=!1,nt.T=null,nt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_i(this,"tick"),this.ga&&(g0(this),this.start()))}},nt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.N=function(){Py.$.N.call(this),g0(this),delete this.g};class Bx extends Fc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zA(this)}N(){super.N(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ru(n){Fc.call(this),this.h=n,this.g={}}Hr(Ru,Fc);var Yh=[];function m0(n,e,t,r){Array.isArray(t)||(t&&(Yh[0]=t.toString()),t=Yh);for(var s=0;s<t.length;s++){var u=d0(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function y0(n){u0(n.g,function(e,t){this.g.hasOwnProperty(t)&&bD(e)},n),n.g={}}function Zh(){this.g=!0}function Dd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Fy(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return p0(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ru.prototype.N=function(){Ru.$.N.call(this),y0(this)},Ru.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zh.prototype.Ea=function(){this.g=!1},Zh.prototype.info=function(){};var Jh={},Ly=null;function Vy(){return Ly=Ly||new di}function Uy(n){Gr.call(this,Jh.Ta,n)}function ef(n){const e=Vy();_i(e,new Uy(e))}function _0(n,e){Gr.call(this,Jh.STAT_EVENT,n),this.stat=e}function wr(n){const e=Vy();_i(e,new _0(e,n))}function OD(n,e){Gr.call(this,Jh.Ua,n),this.size=e}function Cd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}Jh.Ta="serverreachability",Hr(Uy,Gr),Jh.STAT_EVENT="statevent",Hr(_0,Gr),Jh.Ua="timingevent",Hr(OD,Gr);var bd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},PD={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function lg(){}function Go(){}lg.prototype.h=null;var w0,Ua={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function hg(){Gr.call(this,"d")}function E0(){Gr.call(this,"c")}function fg(){}function Ba(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ru(this),this.P=WA,this.V=new Py(n=qh?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kD}function kD(){this.i=null,this.g="",this.h=!1}Hr(hg,Gr),Hr(E0,Gr),Hr(fg,lg),fg.prototype.g=function(){return new XMLHttpRequest},fg.prototype.i=function(){return{}},w0=new fg;var WA=45e3,I0={},tf={};function By(n,e,t){n.L=1,n.v=Sd(zs(e)),n.s=t,n.S=!0,FD(n,null)}function FD(n,e){n.G=Date.now(),pg(n),n.A=zs(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),jD(t.i,"t",r),n.C=0,t=n.l.J,n.h=new kD,n.g=U0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Bx(Rr(n.Pa,n,n.g),n.O)),m0(n.U,n.g,"readystatechange",n.nb),e=n.I?c0(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),ef(),function v0(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),v=0;v<m.length;v++){var D=m[v].split("=");if(1<D.length){var T=D[0];D=D[1];var N=T.split("_");l=2<=N.length&&"type"==N[1]?l+(T+"=")+D+"&":l+(T+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function D0(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function jy(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=jx(n,t),s==tf){4==e&&(n.o=4,wr(14),r=!1),Dd(n.j,n.m,null,"[Incomplete Response]");break}if(s==I0){n.o=4,wr(15),Dd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Dd(n.j,n.m,s,null),rf(n,s)}D0(n)&&s!=tf&&s!=I0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,wr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),YD(e),e.M=!0,wr(11))):(Dd(n.j,n.m,t,"[Invalid Chunked Response]"),nf(n),Hy(n))}function jx(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?tf:(t=Number(e.substring(t,r)),isNaN(t)?I0:(r+=1)+t>e.length?tf:(e=e.slice(r,r+t),n.C=r+t,e))}function pg(n){n.Y=Date.now()+n.P,LD(n,n.P)}function LD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Cd(Rr(n.lb,n),e)}function $y(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Hy(n){0==n.l.H||n.J||Xy(n.l,n)}function nf(n){$y(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,g0(n.V),y0(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function rf(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Wy(t.i,n)))if(!n.K&&Wy(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Qy(t),zo(t)}L0(t),wr(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Cd(Rr(t.ib,t),6e3));if(1>=$D(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else xd(t,11)}else if((n.K||t.g==n)&&Qy(t),!La(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let D=s[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const T=D[3];null!=T&&(t.ra=T,t.l.info("VER="+t.ra));const N=D[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const L=D[5];null!=L&&"number"==typeof L&&0<L&&(t.L=r=1.5*L,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const Q=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var u=r.i;u.g||-1==Q.indexOf("spdy")&&-1==Q.indexOf("quic")&&-1==Q.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(N0(u,u.h),u.h=null))}if(r.F){const ce=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.Da=ce,An(r.I,r.F,ce))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=V0(r,r.J?r.pa:null,r.Y),l.K){x0(r.i,l);var m=l,v=r.L;v&&m.setTimeout(v),m.B&&($y(m),pg(m)),r.g=l}else F0(r);0<t.j.length&&qy(t)}else"stop"!=D[0]&&"close"!=D[0]||xd(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?xd(t,7):Ig(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}ef()}catch{}}function Gy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(vd(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function C0(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(vd(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function qA(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(vd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(nt=Ba.prototype).setTimeout=function(n){this.P=n},nt.nb=function(n){n=n.target;const e=this.M;e&&3==ja(n)?e.l():this.Pa(n)},nt.Pa=function(n){try{if(n==this.g)e:{const T=ja(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||qh||this.g&&(this.h.h||this.g.ja()||iS(this.g)))){this.J||4!=T||7==e||ef(),$y(this);var t=this.g.da();this.ca=t;t:if(D0(this)){var r=iS(this.g);n="";var s=r.length,u=4==ja(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){nf(this),Hy(this);var l="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function KA(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!La(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,wr(12),nf(this),Hy(this);break e}Dd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rf(this,t)}this.S?(jy(this,T,l),qh&&this.i&&3==T&&(m0(this.U,this.V,"tick",this.mb),this.V.start())):(Dd(this.j,this.m,l,null),rf(this,l)),4==T&&nf(this),this.i&&!this.J&&(4==T?Xy(this.l,this):(this.i=!1,pg(this)))}else(function QD(n){const e={};n=(n.g&&2<=ja(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(La(n[r]))continue;var t=wd(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function BA(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,wr(12)):(this.o=0,wr(13)),nf(this),Hy(this)}}}catch{}},nt.mb=function(){if(this.g){var n=ja(this.g),e=this.g.ja();this.C<e.length&&($y(this),jy(this,n,e),this.i&&4!=n&&pg(this))}},nt.cancel=function(){this.J=!0,nf(this)},nt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function RD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ef(),wr(17)),nf(this),this.o=2,Hy(this)):LD(this,this.Y-n)};var Td=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ou(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ou){this.h=n.h,Ad(this,n.j),this.s=n.s,this.g=n.g,Pu(this,n.m),this.l=n.l;var e=n.i,t=new sf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),zy(this,t),this.o=n.o}else n&&(e=String(n).match(Td))?(this.h=!1,Ad(this,e[1]||"",!0),this.s=Ky(e[2]||""),this.g=Ky(e[3]||"",!0),Pu(this,e[4]),this.l=Ky(e[5]||"",!0),zy(this,e[6]||"",!0),this.o=Ky(e[7]||"")):(this.h=!1,this.i=new sf(null,this.h))}function zs(n){return new Ou(n)}function Ad(n,e,t){n.j=t?Ky(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Pu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function zy(n,e,t){e instanceof sf?(n.i=e,function A0(n,e){e&&!n.j&&(Lc(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(BD(this,r),jD(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Md(e,XA)),n.i=new sf(e,n.h))}function An(n,e,t){n.i.set(e,t)}function Sd(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ky(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Md(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gg),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gg(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ou.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Md(e,VD,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Md(e,VD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Md(t,"/"==t.charAt(0)?QA:UD,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Md(t,T0)),n.join("")};var VD=/[#\/\?@]/g,UD=/[#\?:]/g,QA=/[#\?]/g,XA=/[#\?@]/g,T0=/#/g;function sf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Lc(n){n.g||(n.g=new Map,n.h=0,n.i&&function b0(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function BD(n,e){Lc(n),e=ku(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function YA(n,e){return Lc(n),e=ku(n,e),n.g.has(e)}function jD(n,e,t){BD(n,e),0<t.length&&(n.i=null,n.g.set(ku(n,e),Iy(t)),n.h+=t.length)}function ku(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function S0(n){this.l=n||M0,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ka&&Bt.g.Ka()&&Bt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=sf.prototype).add=function(n,e){Lc(this),this.i=null,n=ku(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){Lc(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},nt.ta=function(){Lc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},nt.Z=function(n){Lc(this);let e=[];if("string"==typeof n)YA(this,n)&&(e=e.concat(this.g.get(ku(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},nt.set=function(n,e){return Lc(this),this.i=null,YA(this,n=ku(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var M0=10;function mg(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $D(n){return n.h?1:n.g?n.g.size:0}function Wy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function N0(n,e){n.g?n.g.add(e):n.h=e}function x0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function JA(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Iy(n.i)}S0.prototype.cancel=function(){if(this.i=JA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var eS=class{stringify(n){return Bt.JSON.stringify(n,void 0)}parse(n){return Bt.JSON.parse(n,void 0)}};function yg(){this.g=new eS}function tS(n,e,t){const r=t||"";try{Gy(n,function(s,u){let l=s;Nu(s)&&(l=p0(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Vc(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function vg(n){this.l=n.fc||null,this.j=n.ob||!1}function _g(n,e){di.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=R0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hr(vg,lg),vg.prototype.g=function(){return new _g(this.l,this.j)},vg.prototype.i=function(n){return function(){return n}}({}),Hr(_g,di);var R0=0;function HD(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Eg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,uf(n)}function uf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=_g.prototype).open=function(n,e){if(this.readyState!=R0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,uf(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Bt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Eg(this)),this.readyState=R0},nt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,uf(this)),this.g&&(this.readyState=3,uf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;HD(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},nt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Eg(this):uf(this),3==this.readyState&&HD(this)}},nt.Za=function(n){this.g&&(this.response=this.responseText=n,Eg(this))},nt.Ya=function(n){this.g&&(this.response=n,Eg(this))},nt.ka=function(){this.g&&Eg(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_g.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var GD=Bt.JSON.parse;function qn(n){di.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nS,this.L=this.M=!1}Hr(qn,di);var nS="",O0=/^https?$/i,zD=["POST","PUT"];function KD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,P0(n),wg(n)}function P0(n){n.F||(n.F=!0,_i(n,"complete"),_i(n,"error"))}function WD(n){if(n.h&&typeof og<"u"&&(!n.C[1]||4!=ja(n)||2!=n.da()))if(n.v&&4==ja(n))ky(n.La,0,n);else if(_i(n,"readystatechange"),4==ja(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(Td)[1]||null;!s&&Bt.self&&Bt.self.location&&(s=Bt.self.location.protocol.slice(0,-1)),r=!O0.test(s?s.toLowerCase():"")}t=r}if(t)_i(n,"complete"),_i(n,"success");else{n.m=6;try{var u=2<ja(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",P0(n)}}finally{wg(n)}}}function wg(n,e){if(n.g){qD(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||_i(n,"ready");try{t.onreadystatechange=r}catch{}}}function qD(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function ja(n){return n.g?n.g.readyState:0}function iS(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case nS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function k0(n){let e="";return u0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Ks(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=k0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function cf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function sS(n){this.Ga=0,this.j=[],this.l=new Zh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cf("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cf("baseRetryDelayMs",5e3,n),this.hb=cf("retryDelaySeedMs",1e4,n),this.eb=cf("forwardChannelMaxRetries",2,n),this.xa=cf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new S0(n&&n.concurrentRequestLimit),this.Ja=new yg,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ig(n){if(Dg(n),3==n.H){var e=n.W++,t=zs(n.I);if(An(t,"SID",n.K),An(t,"RID",e),An(t,"TYPE","terminate"),Nd(n,t),(e=new Ba(n,n.l,e)).L=2,e.v=Sd(zs(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon)try{t=Bt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=U0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),pg(e)}Yy(n)}function zo(n){n.g&&(YD(n),n.g.cancel(),n.g=null)}function Dg(n){zo(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),Qy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function qy(n){if(!mg(n.i)&&!n.m){n.m=!0;var e=n.Na;cg||xD(),Id||(cg(),Id=!0),Oy.add(e,n),n.C=0}}function XD(n,e){var t;t=e?e.m:n.W++;const r=zs(n.I);An(r,"SID",n.K),An(r,"RID",t),An(r,"AID",n.V),Nd(n,r),n.o&&n.s&&Ks(r,n.o,n.s),t=new Ba(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Ko(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),N0(n.i,t),By(t,r,e)}function Nd(n,e){n.na&&u0(n.na,function(t,r){An(e,r,t)}),n.h&&Gy({},function(t,r){An(e,r,t)})}function Ko(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Rr(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let D=s[v].g;const T=s[v].map;if(D-=u,0>D)u=Math.max(0,s[v].g-100),m=!1;else try{tS(T,l,"req"+D+"_")}catch{r&&r(T)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function F0(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;cg||xD(),Id||(cg(),Id=!0),Oy.add(e,n),n.A=0}}function L0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Cd(Rr(n.Ma,n),ZD(n,n.A)),n.A++,0))}function YD(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function zr(n){n.g=new Ba(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=zs(n.wa);An(e,"RID","rpc"),An(e,"SID",n.K),An(e,"AID",n.V),An(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&An(e,"TO",n.qa),An(e,"TYPE","xmlhttp"),Nd(n,e),n.o&&n.s&&Ks(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Sd(zs(e)),t.s=null,t.S=!0,FD(t,n)}function Qy(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function Xy(n,e){var t=null;if(n.g==e){Qy(n),YD(n),n.g=null;var r=2}else{if(!Wy(n.i,e))return;t=e.F,x0(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;_i(r=Vy(),new OD(r,t)),qy(n)}else F0(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function oS(n,e){return!($D(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Cd(Rr(n.Na,n,e),ZD(n,n.C)),n.C++,0)))}(n,e)||2==r&&L0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:xd(n,5);break;case 4:xd(n,10);break;case 3:xd(n,6);break;default:xd(n,2)}}function ZD(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function xd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Rr(n.pb,n);t||(t=new Ou("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||Ad(t,"https"),Sd(t)),function af(n,e){const t=new Zh;if(Bt.Image){const r=new Image;r.onload=wy(Vc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=wy(Vc,t,r,"TestLoadImage: error",!1,e),r.onabort=wy(Vc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=wy(Vc,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else wr(2);n.H=0,n.h&&n.h.za(e),Yy(n),Dg(n)}function Yy(n){if(n.H=0,n.ma=[],n.h){const e=JA(n.i);(0!=e.length||0!=n.j.length)&&(e0(n.ma,e),e0(n.ma,n.j),n.i.i.length=0,Iy(n.j),n.j.length=0),n.h.ya()}}function V0(n,e,t){var r=t instanceof Ou?zs(t):new Ou(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Pu(r,r.m);else{var s=Bt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ou(null);r&&Ad(u,r),e&&(u.g=e),s&&Pu(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&An(r,t,e),An(r,"VER",n.ra),Nd(n,r),r}function U0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qn(t&&n.Ha&&!n.va?new vg({ob:!0}):n.va)).Oa(n.J),e}function JD(){}function Cg(){if(Wh&&!(10<=Number(LA)))throw Error("Environmental error: no available transport.")}function fs(n,e){di.call(this),this.g=new sS(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!La(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!La(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lf(this)}function eC(n){hg.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tC(){E0.call(this),this.status=1}function lf(n){this.g=n}function ki(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Wo(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function un(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(nt=qn.prototype).Oa=function(n){this.M=n},nt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():w0.g(),this.C=function dg(n){return n.h||(n.h=n.i())}(this.u?this.u:w0),this.g.onreadystatechange=Rr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void KD(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Bt.FormData&&n instanceof Bt.FormData,!(0<=vD(zD,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{qD(this),0<this.B&&((this.L=function rS(n){return Wh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rr(this.ua,this)):this.A=ky(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){KD(this,u)}},nt.ua=function(){typeof og<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_i(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_i(this,"complete"),_i(this,"abort"),wg(this))},nt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wg(this,!0)),qn.$.N.call(this)},nt.La=function(){this.s||(this.G||this.v||this.l?WD(this):this.kb())},nt.kb=function(){WD(this)},nt.isActive=function(){return!!this.g},nt.da=function(){try{return 2<ja(this)?this.g.status:-1}catch{return-1}},nt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),GD(e)}},nt.Ia=function(){return this.m},nt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=sS.prototype).ra=8,nt.H=1,nt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Ba(this,this.l,n);let u=this.s;if(this.U&&(u?(u=c0(u),DD(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ko(this,s,e),An(t=zs(this.I),"RID",n),An(t,"CVER",22),this.F&&An(t,"X-HTTP-Session-Id",this.F),Nd(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(k0(u)))+"&"+e:this.o&&Ks(t,this.o,u)),N0(this.i,s),this.bb&&An(t,"TYPE","init"),this.P?(An(t,"$req",e),An(t,"SID","null"),s.aa=!0,By(s,t,null)):By(s,t,e),this.H=2}}else 3==this.H&&(n?XD(this,n):0==this.j.length||mg(this.i)||XD(this))},nt.Ma=function(){if(this.u=null,zr(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Cd(Rr(this.jb,this),n)}},nt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,wr(10),zo(this),zr(this))},nt.ib=function(){null!=this.v&&(this.v=null,zo(this),L0(this),wr(19))},nt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),wr(2)):(this.l.info("Failed to ping google.com"),wr(1))},nt.isActive=function(){return!!this.h&&this.h.isActive(this)},(nt=JD.prototype).Ba=function(){},nt.Aa=function(){},nt.za=function(){},nt.ya=function(){},nt.isActive=function(){return!0},nt.Va=function(){},Cg.prototype.g=function(n,e){return new fs(n,e)},Hr(fs,di),fs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;wr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=V0(n,null,n.Y),qy(n)},fs.prototype.close=function(){Ig(this.g)},fs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=p0(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&qy(e)},fs.prototype.N=function(){this.g.h=null,delete this.j,Ig(this.g),delete this.g,fs.$.N.call(this)},Hr(eC,hg),Hr(tC,E0),Hr(lf,JD),lf.prototype.Ba=function(){_i(this.g,"a")},lf.prototype.Aa=function(n){_i(this.g,new eC(n))},lf.prototype.za=function(n){_i(this.g,new tC)},lf.prototype.ya=function(){_i(this.g,"b")},Hr(ki,function nC(){this.blockSize=-1}),ki.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ki.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)Wo(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){Wo(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){Wo(this,r),s=0;break}}this.h=s,this.i+=e},ki.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var aS={};function B0(n){return-128<=n&&128>n?function FA(n,e){var t=aS;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new un([0|e],0>e?-1:0)}):new un([0|n],0>n?-1:0)}function qo(n){if(isNaN(n)||!isFinite(n))return $a;if(0>n)return Ei(qo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=bg;return new un(e,0)}var bg=4294967296,$a=B0(0),df=B0(1),$0=B0(16777216);function Ha(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ho(n){return-1==n.h}function Ei(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new un(t,~n.h).add(df)}function Zy(n,e){return n.add(Ei(e))}function Jy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function hf(n,e){this.g=n,this.h=e}function H0(n,e){if(Ha(e))throw Error("division by zero");if(Ha(n))return new hf($a,$a);if(ho(n))return e=H0(Ei(n),e),new hf(Ei(e.g),Ei(e.h));if(ho(e))return e=H0(n,Ei(e)),new hf(Ei(e.g),e.h);if(30<n.g.length){if(ho(n)||ho(e))throw Error("slowDivide_ only works with positive integers.");for(var t=df,r=e;0>=r.X(n);)t=rC(t),r=rC(r);var s=Tg(t,1),u=Tg(r,1);for(r=Tg(r,2),t=Tg(t,2);!Ha(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=Tg(r,1),t=Tg(t,1)}return e=Zy(n,s.R(e)),new hf(s,e)}for(s=$a;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=qo(t)).R(e);ho(l)||0<l.X(n);)l=(u=qo(t-=r)).R(e);Ha(u)&&(u=df),s=s.add(u),n=Zy(n,l)}return new hf(s,n)}function rC(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new un(t,n.h)}function Tg(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new un(s,n.h)}(nt=un.prototype).ea=function(){if(ho(this))return-Ei(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:bg+r)*e,e*=bg}return n},nt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ha(this))return"0";if(ho(this))return"-"+Ei(this).toString(n);for(var e=qo(Math.pow(n,6)),t=this,r="";;){var s=H0(t,e).g,u=((0<(t=Zy(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ha(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},nt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},nt.X=function(n){return ho(n=Zy(this,n))?-1:Ha(n)?0:1},nt.abs=function(){return ho(this)?Ei(this):this},nt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new un(t,-2147483648&t[t.length-1]?-1:0)},nt.R=function(n){if(Ha(this)||Ha(n))return $a;if(ho(this))return ho(n)?Ei(this).R(Ei(n)):Ei(Ei(this).R(n));if(ho(n))return Ei(this.R(Ei(n)));if(0>this.X($0)&&0>n.X($0))return qo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(s)>>>16,v=65535&n.D(s);t[2*r+2*s]+=l*v,Jy(t,2*r+2*s),t[2*r+2*s+1]+=u*v,Jy(t,2*r+2*s+1),t[2*r+2*s+1]+=l*m,Jy(t,2*r+2*s+1),t[2*r+2*s+2]+=u*m,Jy(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new un(t,0)},nt.gb=function(n){return H0(this,n).h},nt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new un(t,this.h&n.h)},nt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new un(t,this.h|n.h)},nt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new un(t,this.h^n.h)},Cg.prototype.createWebChannel=Cg.prototype.g,fs.prototype.send=fs.prototype.u,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,bd.NO_ERROR=0,bd.TIMEOUT=8,bd.HTTP_ERROR=6,PD.COMPLETE="complete",Go.EventType=Ua,Ua.OPEN="a",Ua.CLOSE="b",Ua.ERROR="c",Ua.MESSAGE="d",di.prototype.listen=di.prototype.O,qn.prototype.listenOnce=qn.prototype.P,qn.prototype.getLastError=qn.prototype.Sa,qn.prototype.getLastErrorCode=qn.prototype.Ia,qn.prototype.getStatus=qn.prototype.da,qn.prototype.getResponseJson=qn.prototype.Wa,qn.prototype.getResponseText=qn.prototype.ja,qn.prototype.send=qn.prototype.ha,qn.prototype.setWithCredentials=qn.prototype.Oa,ki.prototype.digest=ki.prototype.l,ki.prototype.reset=ki.prototype.reset,ki.prototype.update=ki.prototype.j,un.prototype.add=un.prototype.add,un.prototype.multiply=un.prototype.R,un.prototype.modulo=un.prototype.gb,un.prototype.compare=un.prototype.X,un.prototype.toNumber=un.prototype.ea,un.prototype.toString=un.prototype.toString,un.prototype.getBits=un.prototype.D,un.fromNumber=qo,un.fromString=function j0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ei(j0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=qo(Math.pow(e,8)),r=$a,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=qo(Math.pow(e,u)),r=r.R(u).add(qo(l))):r=(r=r.R(t)).add(qo(l))}return r};var $x=lo.createWebChannelTransport=function(){return new Cg},iC=lo.getStatEventTarget=function(){return Vy()},ev=lo.ErrorCode=bd,Hx=lo.EventType=PD,tv=lo.Event=Jh,G0=lo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},sC=lo.FetchXmlHttpFactory=vg,nv=lo.WebChannel=Go,oC=lo.XhrIo=qn,aC=lo.Md5=ki,Ot=lo.Integer=un;const z0="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let Qo="9.23.0";const Fu=new $o.Vy("@firebase/firestore");function K0(){return Fu.logLevel}function ke(n,...e){if(Fu.logLevel<=$o.$b.DEBUG){const t=e.map(iv);Fu.debug(`Firestore (${Qo}): ${n}`,...t)}}function nr(n,...e){if(Fu.logLevel<=$o.$b.ERROR){const t=e.map(iv);Fu.error(`Firestore (${Qo}): ${n}`,...t)}}function Fi(n,...e){if(Fu.logLevel<=$o.$b.WARN){const t=e.map(iv);Fu.warn(`Firestore (${Qo}): ${n}`,...t)}}function iv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function pt(n,e){n||it()}function Ze(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends hn.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class uC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class uS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cS{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=l;e.enqueueRetryable((0,Ee.A)(function*(){yield D.promise,yield u(r.currentUser)}))},v=D=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>v(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?v(D):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new uC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new Kr(e)}}class lS{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class dS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new lS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lC{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.T=t.token,new q0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function hS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ps{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=hS(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function ff(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function fS(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new On(0,0))}static max(){return new vt(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ag{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ag.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ag?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends Ag{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const pS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends Ag{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return pS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Me(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Me(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Me(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Me(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(cn.fromString(e))}static fromName(e){return new Xe(cn.fromString(e).popFirst(5))}static empty(){return new Xe(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new cn(e.slice()))}}class sv{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Sg(n){return n.fields.find(e=>2===e.kind)}function Rd(n){return n.fields.filter(e=>2!==e.kind)}sv.UNKNOWN_ID=-1;class ov{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mg(0,Ws.min())}}function Xo(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=vt.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new Ws(s,Xe.empty(),e)}function av(n){return new Ws(n.readTime,n.key,-1)}class Ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ws(vt.min(),Xe.empty(),-1)}static max(){return new Ws(vt.max(),Xe.empty(),-1)}}function uv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}const dC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Lu(n){return pf.apply(this,arguments)}function pf(){return pf=(0,Ee.A)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==dC)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),pf.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},v=>r(v))}),l=!0,u===s&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(s=>s?se.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let v=0;v<u;v++){const D=v;t(e[D]).next(T=>{l[D]=T,++m,m===u&&r(l)},T=>s(T))}})}static doWhile(e,t){return new se((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class X0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Wr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new gf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=Z0(r.target.error);this.v.reject(new gf(e,s))}}static open(e,t,r,s){try{return new X0(t,e.transaction(s,r))}catch(u){throw new gf(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Y0(t)}}class fo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===fo.S((0,hn.ZQ)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Ji(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,hn.zW)())return!1;if(fo.C())return!0;const e=(0,hn.ZQ)(),t=fo.S(e),r=0<t&&t<10,s=fo.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ee.A)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new gf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Me(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new gf(e,m))},u.onupgradeneeded=l=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Ee.A)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const v=X0.open(u.db,e,l?"readonly":"readwrite",r),D=s(v).next(T=>(v.P(),T)).catch(T=>(v.abort(T),se.reject(T))).toPromise();return D.catch(()=>{}),yield v.R,D}catch(v){const D=v,T="FirebaseError"!==D.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",D.message,"Retrying:",T),u.close(),!T)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class hC{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ji(this.L.delete())}}class gf extends Me{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vu(n){return"IndexedDbTransactionError"===n.name}class Y0{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ji(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Ji(this.store.add(e))}get(e){return Ji(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Ji(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Ji(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new se((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new se((r,s)=>{t.onerror=u=>{const l=Z0(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new se((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const v=new hC(m),D=t(m.primaryKey,m.value,v);if(D instanceof se){const T=D.catch(N=>(v.done(),se.reject(N)));r.push(T)}v.isDone?s():null===v.K?m.continue():m.continue(v.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ji(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Z0(r.target.error);t(s)}})}let fC=!1;function Z0(n){const e=fo.S((0,hn.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fC||(fC=!0,setTimeout(()=>{throw r},0)),r}}return n}class J0{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.A)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Vu(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Lu(r)}yield t.et(6e4)}))}}class yS{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ee.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return se.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ke("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(m=>(ke("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=av(u);uv(l,r)>0&&(r=l)}),new Ws(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let gs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Ng(n){return null==n}function Uc(n){return 0===n&&1/n==-1/0}function mf(n){return"number"==typeof n&&Number.isInteger(n)&&!Uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function wi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vS(e)),e=cv(n.get(t),e);return vS(e)}function cv(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function vS(n){return n+"\x01\x01"}function Ga(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let v;0===s.length?v=m:(s+=m,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:it()}u=l+2}return new cn(r)}const eE=["userId","batchId"];function xg(n,e){return[n,wi(e)]}function pC(n,e,t){return[n,wi(e),t]}const _S={},gC=["prefixPath","collectionGroup","readTime","documentId"],mC=["prefixPath","collectionGroup","documentId"],Rg=["collectionGroup","readTime","prefixPath","documentId"],ES=["canonicalId","targetId"],yC=["targetId","path"],vC=["path","targetId"],wS=["collectionId","parent"],IS=["indexId","uid"],Og=["uid","sequenceNumber"],DS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CS=["indexId","uid","orderedDocumentKey"],bS=["userId","collectionPath","documentId"],TS=["userId","collectionPath","largestBatchId"],AS=["userId","collectionGroup","largestBatchId"],_C=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SS=[..._C,"documentOverlays"],EC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tE=EC,nE=[...tE,"indexConfiguration","indexState","indexEntries"];class rE extends Q0{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ir(n,e){const t=Ze(n);return fo.M(t.ht,e)}function wC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pn{constructor(e,t){this.comparator=e,this.root=t||Ii.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lv(this.root,e,this.comparator,!1)}getReverseIterator(){return new lv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lv(this.root,e,this.comparator,!0)}}class lv{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ii{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Ii.RED,this.left=s??Ii.EMPTY,this.right=u??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Ii(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Ii.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1,Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Ii(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iE(this.data.getIterator())}getIteratorFrom(e){return new iE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Un(this.comparator);return t.data=e,t}}class iE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Od(n){return n.hasNext()?n.getNext():void 0}class ms{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new ms([])}unionWith(e){let t=new Un(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ff(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class MS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new MS("Invalid base64 string: "+s):s}}(e);return new Or(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const zx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(n){if(pt(!!n),"string"==typeof n){let e=0;const t=zx.exec(n);if(pt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(n.seconds),nanos:dr(n.nanos)}}function dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Uu(n){return"string"==typeof n?Or.fromBase64String(n):Or.fromUint8Array(n)}function yf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dv(n){const e=n.mapValue.fields.__previous_value__;return yf(e)?dv(e):e}function ys(n){const e=Yo(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class Pg{constructor(e,t,r,s,u,l,m,v,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=v,this.useFetchStreams=D}}class ir{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ir("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ir&&e.projectId===this.projectId&&e.database===this.database}}const vs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pd={nullValue:"NULL_VALUE"};function qr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yf(n)?4:aE(n)?9007199254740991:10:it()}function po(n,e){if(n===e)return!0;const t=qr(n);if(t!==qr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ys(n).isEqual(ys(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Yo(r.timestampValue),l=Yo(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Uu(n.bytesValue).isEqual(Uu(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return dr(r.geoPointValue.latitude)===dr(s.geoPointValue.latitude)&&dr(r.geoPointValue.longitude)===dr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return dr(r.integerValue)===dr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=dr(r.doubleValue),l=dr(s.doubleValue);return u===l?Uc(u)===Uc(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return ff(n.arrayValue.values||[],e.arrayValue.values||[],po);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(wC(u)!==wC(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!po(u[m],l[m])))return!1;return!0}(n,e);default:return it()}var s}function za(n,e){return void 0!==(n.values||[]).find(t=>po(t,e))}function qs(n,e){if(n===e)return 0;const t=qr(n),r=qr(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=dr(s.integerValue||s.doubleValue),m=dr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return kd(n.timestampValue,e.timestampValue);case 4:return kd(ys(n),ys(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=Uu(s),m=Uu(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let v=0;v<l.length&&v<m.length;v++){const D=jt(l[v],m[v]);if(0!==D)return D}return jt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=jt(dr(s.latitude),dr(u.latitude));return 0!==l?l:jt(dr(s.longitude),dr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let v=0;v<l.length&&v<m.length;++v){const D=qs(l[v],m[v]);if(D)return D}return jt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===vs.mapValue&&u===vs.mapValue)return 0;if(s===vs.mapValue)return 1;if(u===vs.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),v=u.fields||{},D=Object.keys(v);m.sort(),D.sort();for(let T=0;T<m.length&&T<D.length;++T){const N=jt(m[T],D[T]);if(0!==N)return N;const L=qs(l[m[T]],v[D[T]]);if(0!==L)return L}return jt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw it()}}function kd(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=Yo(n),r=Yo(e),s=jt(t.seconds,r.seconds);return 0!==s?s:jt(t.nanos,r.nanos)}function Zo(n){return jc(n)}function jc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Yo(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Uu(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=jc(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${jc(r.fields[m])}`;return u+"}"}(n.mapValue):it();var e}function go(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $c(n){return!!n&&"integerValue"in n}function Ka(n){return!!n&&"arrayValue"in n}function sE(n){return!!n&&"nullValue"in n}function oE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kg(n){return!!n&&"mapValue"in n}function vf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function CC(n){return"nullValue"in n?Pd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?go(ir.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function bC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?go(ir.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vs:it()}function uE(n,e){const t=qs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cE(n,e){const t=qs(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Qr{constructor(e){this.value=e}static empty(){return new Qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vf(t)}setAll(e){let t=rr.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=vf(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());kg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return po(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];kg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Bc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Qr(vf(this.value))}}function TC(n){const e=[];return Bc(n.fields,(t,r)=>{const s=new rr([t]);if(kg(r)){const u=TC(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new ms(e)}class Qn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Qn(e,0,vt.min(),vt.min(),vt.min(),Qr.empty(),0)}static newFoundDocument(e,t,r,s){return new Qn(e,1,t,vt.min(),r,s,0)}static newNoDocument(e,t){return new Qn(e,2,t,vt.min(),vt.min(),Qr.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,vt.min(),vt.min(),Qr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fd{constructor(e,t){this.position=e,this.inclusive=t}}function AC(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):qs(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function SC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!po(n.position[t],e.position[t]))return!1;return!0}class Fg{constructor(e,t="asc"){this.field=e,this.dir=t}}function NS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class xS{}class rn extends xS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new RS(e,t,r):"array-contains"===t?new PS(e,r):"in"===t?new NC(e,r):"not-in"===t?new hE(e,r):"array-contains-any"===t?new fv(e,r):new rn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Vg(e,r):new OS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qs(t,this.value)):null!==t&&qr(this.value)===qr(t)&&this.matchesComparison(qs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wn extends xS{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new wn(e,t)}matches(e){return _f(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function _f(n){return"and"===n.op}function Lg(n){return"or"===n.op}function Ld(n){return hv(n)&&_f(n)}function hv(n){for(const e of n.filters)if(e instanceof wn)return!1;return!0}function Ef(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+Zo(n.value);if(Ld(n))return n.filters.map(e=>Ef(e)).join(",");{const e=n.filters.map(t=>Ef(t)).join(",");return`${n.op}(${e})`}}function lE(n,e){return n instanceof rn?(t=n,(r=e)instanceof rn&&t.op===r.op&&t.field.isEqual(r.field)&&po(t.value,r.value)):n instanceof wn?function(t,r){return r instanceof wn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&lE(u,r.filters[l]),!0)}(n,e):void it();var t,r}function wf(n,e){const t=n.filters.concat(e);return wn.create(t,n.op)}function dE(n){return n instanceof rn?`${(e=n).field.canonicalString()} ${e.op} ${Zo(e.value)}`:n instanceof wn?function(e){return e.op.toString()+" {"+e.getFilters().map(dE).join(" ,")+"}"}(n):"Filter";var e}class RS extends rn{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vg extends rn{constructor(e,t){super(e,"in",t),this.keys=MC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OS extends rn{constructor(e,t){super(e,"not-in",t),this.keys=MC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class PS extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ka(t)&&za(t.arrayValue,this.value)}}class NC extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&za(this.value.arrayValue,t)}}class hE extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!za(this.value.arrayValue,t)}}class fv extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ka(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>za(this.value.arrayValue,r))}}class pv{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function xC(n,e=null,t=[],r=[],s=null,u=null,l=null){return new pv(n,e,t,r,s,u,l)}function Vd(n){const e=Ze(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ef(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Ng(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zo(r)).join(",")),e.dt=t}return e.dt}function Ug(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!SC(n.startAt,e.startAt)&&SC(n.endAt,e.endAt)}function If(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gv(n,e){return n.filters.filter(t=>t instanceof rn&&t.field.isEqual(e))}function fE(n,e,t){let r=Pd,s=!0;for(const u of gv(n,e)){let l=Pd,m=!0;switch(u.op){case"<":case"<=":l=CC(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Pd}uE({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];uE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function RC(n,e,t){let r=vs,s=!0;for(const u of gv(n,e)){let l=vs,m=!0;switch(u.op){case">=":case">":l=bC(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=vs}cE({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];cE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class ju{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=v,this.wt=null,this._t=null}}function pE(n,e,t,r,s,u,l,m){return new ju(n,e,t,r,s,u,l,m)}function Ud(n){return new ju(n)}function gE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function mE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function mv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function yE(n){return null!==n.collectionGroup}function Hc(n){const e=Ze(n);if(null===e.wt){e.wt=[];const t=mv(e),r=mE(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Fg(t)),e.wt.push(new Fg(rr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Fg(rr.keyField(),u))}}}return e.wt}function Di(n){const e=Ze(n);if(!e._t)if("F"===e.limitType)e._t=xC(e.path,e.collectionGroup,Hc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Hc(e))t.push(new Fg(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Fd(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Fd(e.startAt.position,e.startAt.inclusive):null;e._t=xC(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function Bg(n,e){e.getFirstInequalityField(),mv(n);const t=n.filters.concat([e]);return new ju(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yv(n,e,t){return new ju(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gc(n,e){return Ug(Di(n),Di(e))&&n.limitType===e.limitType}function jg(n){return`${Vd(Di(n))}|lt:${n.limitType}`}function $g(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>dE(r)).join(", ")}]`),Ng(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zo(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zo(r)).join(",")),`Target(${t})`}(Di(n))}; limitType=${n.limitType})`}function Df(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Xe.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Hc(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=AC(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,Hc(t),r)||t.endAt&&!function(s,u,l){const m=AC(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,Hc(t),r)));var t,r}function OC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PC(n){return(e,t)=>{let r=!1;for(const s of Hc(n)){const u=kS(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function kS(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),v=l.data.field(s);return null!==m&&null!==v?qs(m,v):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}class mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return IC(this.inner)}size(){return this.innerSize}}const vv=new Pn(Xe.comparator);function es(){return vv}const vE=new Pn(Xe.comparator);function Hg(...n){let e=vE;for(const t of n)e=e.insert(t.key,t);return e}function kC(n){let e=vE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Jo(){return Cf()}function _v(){return Cf()}function Cf(){return new mo(n=>n.toString(),(n,e)=>n.isEqual(e))}const _E=new Pn(Xe.comparator),FC=new Un(Xe.comparator);function Wt(...n){let e=FC;for(const t of n)e=e.add(t);return e}const LC=new Un(jt);function Ev(){return LC}function EE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function wE(n){return{integerValue:""+n}}function VC(n,e){return mf(e)?wE(e):EE(n,e)}class wv{constructor(){this._=void 0}}function FS(n,e,t){return n instanceof Bd?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&yf(s)&&(s=dv(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof zc?DE(n,e):n instanceof Kc?CE(n,e):function(r,s){const u=Iv(r,s),l=bE(u)+bE(r.gt);return $c(u)&&$c(r.gt)?wE(l):EE(r.serializer,l)}(n,e)}function IE(n,e,t){return n instanceof zc?DE(n,e):n instanceof Kc?CE(n,e):t}function Iv(n,e){return n instanceof jd?$c(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bd extends wv{}class zc extends wv{constructor(e){super(),this.elements=e}}function DE(n,e){const t=TE(e);for(const r of n.elements)t.some(s=>po(s,r))||t.push(r);return{arrayValue:{values:t}}}class Kc extends wv{constructor(e){super(),this.elements=e}}function CE(n,e){let t=TE(e);for(const r of n.elements)t=t.filter(s=>!po(s,r));return{arrayValue:{values:t}}}class jd extends wv{constructor(e,t){super(),this.serializer=e,this.gt=t}}function bE(n){return dr(n.integerValue||n.doubleValue)}function TE(n){return Ka(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wc{constructor(e,t){this.field=e,this.transform=t}}class LS{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Wa{}function Dv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hd(n.key,Xn.none()):new Tf(n.key,n.data,Xn.none());{const t=n.data,r=Qr.empty();let s=new Un(rr.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new $u(n.key,r,new ms(s.toArray()),Xn.none())}}function VS(n,e,t){n instanceof Tf?function(r,s,u){const l=r.value.clone(),m=UC(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof $u?function(r,s,u){if(!bf(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=UC(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(AE(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $d(n,e,t,r){return n instanceof Tf?function(s,u,l,m){if(!bf(s.precondition,u))return l;const v=s.value.clone(),D=Pr(s.fieldTransforms,m,u);return v.setAll(D),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof $u?function(s,u,l,m){if(!bf(s.precondition,u))return l;const v=Pr(s.fieldTransforms,m,u),D=u.data;return D.setAll(AE(s)),D.setAll(v),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,bf(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Kx(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=Iv(r.transform,s||null);null!=u&&(null===t&&(t=Qr.empty()),t.set(r.field,u))}return t||null}function US(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ff(t,r,(s,u)=>function qc(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof zc&&r instanceof zc||t instanceof Kc&&r instanceof Kc?ff(t.elements,r.elements,po):t instanceof jd&&r instanceof jd?po(t.gt,r.gt):t instanceof Bd&&r instanceof Bd);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Tf extends Wa{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $u extends Wa{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function AE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function UC(n,e,t){const r=new Map;pt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,IE(l,m,t[s]))}return r}function Pr(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,FS(u,l,e))}return r}class Hd extends Wa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SE extends Wa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ME{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&VS(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$d(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$d(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_v();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const v=Dv(l,m);null!==v&&r.set(s.key,v),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&ff(this.mutations,e.mutations,(t,r)=>US(t,r))&&ff(this.baseMutations,e.baseMutations,(t,r)=>US(t,r))}}class Cv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){pt(e.mutations.length===r.length);let s=_E;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new Cv(e,t,r,s)}}class NE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jC{constructor(e,t){this.count=e,this.unchangedNames=t}}var Bn,ln;function $C(n){switch(n){default:return it();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function xE(n){if(void 0===n)return nr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Bn.OK:return ae.OK;case Bn.CANCELLED:return ae.CANCELLED;case Bn.UNKNOWN:return ae.UNKNOWN;case Bn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Bn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Bn.INTERNAL:return ae.INTERNAL;case Bn.UNAVAILABLE:return ae.UNAVAILABLE;case Bn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Bn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Bn.NOT_FOUND:return ae.NOT_FOUND;case Bn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Bn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Bn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Bn.ABORTED:return ae.ABORTED;case Bn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Bn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Bn.DATA_LOSS:return ae.DATA_LOSS;default:return it()}}(ln=Bn||(Bn={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class RE{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Gg}static getOrCreateInstance(){return null===Gg&&(Gg=new RE),Gg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Gg=null;function BS(){return new TextEncoder}const OE=new Ot([4294967295,4294967295],0);function bv(n){const e=BS().encode(n),t=new aC;return t.update(e),new Uint8Array(t.digest())}function ea(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ot([t,r],0),new Ot([s,u],0)]}class PE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Af(`Invalid padding: ${t}`);if(r<0)throw new Af(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Af(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Af(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ot.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(Ot.fromNumber(r)));return 1===s.compare(OE)&&(s=new Ot([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=bv(e),[r,s]=ea(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new PE(u,s,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=bv(e),[r,s]=ea(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Af extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _s{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ts.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _s(vt.min(),s,new Pn(jt),es(),Wt())}}class ts{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ts(r,t,Wt(),Wt(),Wt())}}class Es{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class kE{constructor(e,t){this.targetId=e,this.Vt=t}}class FE{constructor(e,t,r=Or.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class HC{constructor(){this.St=0,this.Dt=zC(),this.Ct=Or.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Wt(),t=Wt(),r=Wt();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:it()}}),new ts(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=zC()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class jS{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=es(),this.zt=GC(),this.Wt=new Pn(jt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(If(l))if(0===s){const m=new Xe(l.path);this.Yt(r,m,Qn.newNoDocument(m,vt.min()))}else pt(1===s);else{const m=this.ie(r);if(m!==s){const v=this.re(e,m);0!==v&&(this.ee(r),this.Wt=this.Wt.insert(r,2===v?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=RE.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,T,N){var L,G,Q,ce,De,Qe;const at={localCacheCount:T,existenceFilterCount:N.count},ut=N.unchangedNames;return ut&&(at.bloomFilter={applied:0===D,hashCount:null!==(L=ut?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(ce=null===(Q=null===(G=ut?.bits)||void 0===G?void 0:G.bitmap)||void 0===Q?void 0:Q.length)&&void 0!==ce?ce:0,padding:null!==(Qe=null===(De=ut?.bits)||void 0===De?void 0:De.padding)&&void 0!==Qe?Qe:0}),at}(v,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let v,D;try{v=Uu(u).toUint8Array()}catch(T){if(T instanceof MS)return Fi("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{D=new PE(v,l,m)}catch(T){return Fi(T instanceof Af?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===D.It?1:s!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&If(m.target)){const v=new Xe(m.target.path);null!==this.jt.get(v)||this.ae(l,v)||this.Yt(l,v,Qn.newNoDocument(v,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Wt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(v=>{const D=this.se(v);return!D||"TargetPurposeLimboResolution"===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new _s(e,t,this.Wt,this.jt,r);return this.jt=es(),this.zt=GC(),this.Wt=new Pn(jt),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new HC,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Un(jt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new HC),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function GC(){return new Pn(Xe.comparator)}function zC(){return new Pn(Xe.comparator)}const LE={asc:"ASCENDING",desc:"DESCENDING"},zg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$S={and:"AND",or:"OR"};class KC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function VE(n,e){return n.useProto3Json||Ng(e)?e:{value:e}}function Sf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WC(n,e){return Sf(n,e.toTimestamp())}function Yn(n){return pt(!!n),vt.fromTimestamp(function(e){const t=Yo(e);return new On(t.seconds,t.nanos)}(n))}function BE(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jE(n){const e=cn.fromString(n);return pt(tb(e)),e}function Mf(n,e){return BE(n.databaseId,e.path)}function ta(n,e){const t=jE(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(Kg(t))}function $E(n,e){return BE(n.databaseId,e)}function qC(n){const e=jE(n);return 4===e.length?cn.emptyPath():Kg(e)}function Gd(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kg(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function HE(n,e,t){return{name:Mf(n,e),fields:t.value.mapValue.fields}}function GE(n,e,t){const r=ta(n,e.name),s=Yn(e.updateTime),u=e.createTime?Yn(e.createTime):vt.min(),l=new Qr({mapValue:{fields:e.fields}}),m=Qn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Nf(n,e){let t;if(e instanceof Tf)t={update:HE(n,e.key,e.value)};else if(e instanceof Hd)t={delete:Mf(n,e.key)};else if(e instanceof $u)t={update:HE(n,e.key,e.data),updateMask:WS(e.fieldMask)};else{if(!(e instanceof SE))return it();t={verify:Mf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Bd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Kc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jd)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:WC(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:it()),t;var s}function Tv(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Xn.updateTime(Yn(s.updateTime)):void 0!==s.exists?Xn.exists(s.exists):Xn.none():Xn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(pt("REQUEST_TIME"===l.setToServerValue),m=new Bd):"appendMissingElements"in l?m=new zc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Kc(l.removeAllFromArray.values||[]):"increment"in l?m=new jd(u,l.increment):it();const v=rr.fromServerFormat(l.fieldPath);return new Wc(v,m)}(n,s)):[];var s;if(e.update){const s=ta(n,e.update.name),u=new Qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ms((e.updateMask.fieldPaths||[]).map(D=>rr.fromServerFormat(D)));return new $u(s,u,l,t,r)}return new Tf(s,u,t,r)}if(e.delete){const s=ta(n,e.delete);return new Hd(s,t)}if(e.verify){const s=ta(n,e.verify);return new SE(s,t)}return it()}function zE(n,e){return{documents:[$E(n,e.path)]}}function KE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=$E(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=$E(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0!==v.length)return eb(wn.create(v,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(D=>{return{field:Qc((T=D).field),direction:GS(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=VE(n,e.limit);var m,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function ZC(n){let e=qC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){pt(1===r);const T=t.from[0];T.allDescendants?s=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(T){const N=JC(T);return N instanceof wn&&Ld(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new Fg(xf((N=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(T){let N;return N="object"==typeof T?T.value:T,Ng(N)?null:N}(t.limit));let v=null;var T;t.startAt&&(v=new Fd((T=t.startAt).values||[],!!T.before));let D=null;return t.endAt&&(D=function(T){return new Fd(T.values||[],!T.before)}(t.endAt)),pE(e,s,l,u,m,"F",v,D)}function JC(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xf(e.unaryFilter.field);return rn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=xf(e.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xf(e.unaryFilter.field);return rn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=xf(e.unaryFilter.field);return rn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?rn.create(xf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return wn.create(e.compositeFilter.filters.map(t=>JC(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function GS(n){return LE[n]}function zS(n){return zg[n]}function KS(n){return $S[n]}function Qc(n){return{fieldPath:n.canonicalString()}}function xf(n){return rr.fromServerFormat(n.fieldPath)}function eb(n){return n instanceof rn?function(e){if("=="===e.op){if(oE(e.value))return{unaryFilter:{field:Qc(e.field),op:"IS_NAN"}};if(sE(e.value))return{unaryFilter:{field:Qc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(oE(e.value))return{unaryFilter:{field:Qc(e.field),op:"IS_NOT_NAN"}};if(sE(e.value))return{unaryFilter:{field:Qc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qc(e.field),op:zS(e.op),value:e.value}}}(n):n instanceof wn?function(e){const t=e.getFilters().map(r=>eb(r));return 1===t.length?t[0]:{compositeFilter:{op:KS(e.op),filters:t}}}(n):it()}function WS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Hu{constructor(e,t,r,s,u=vt.min(),l=vt.min(),m=Or.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=v}withSequenceNumber(e){return new Hu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nb{constructor(e){this.fe=e}}function rb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Av(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Mf(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Sf(s,u.version.toTimestamp()),createTime:Sf(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:zd(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:zd(e.version)}}var s,u;return r}function Av(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xc(n){const e=new On(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Yc(n,e){const t=(e.baseMutations||[]).map(u=>Tv(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>Tv(n.fe,u)),s=On.fromMillis(e.localWriteTimeMs);return new ME(e.batchId,s,t,r)}function Rf(n){const e=Xc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xc(n.lastLimboFreeSnapshotVersion):vt.min();let r;var s;return void 0!==n.query.documents?(pt(1===(s=n.query).documents.length),r=Di(Ud(qC(s.documents[0])))):r=Di(ZC(n.query)),new Hu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Or.fromBase64String(n.resumeToken))}function WE(n,e){const t=zd(e.snapshotVersion),r=zd(e.lastLimboFreeSnapshotVersion);let s;s=If(e.target)?zE(n.fe,e.target):KE(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Sv(n){const e=ZC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yv(e,e.limit,"L"):e}function Mv(n,e){return new NE(e.largestBatchId,Tv(n.fe,e.overlayMutation))}function qE(n,e){const t=e.path.lastSegment();return[n,wi(e.path.popLast()),t]}function QE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:zd(r.readTime),documentKey:wi(r.documentKey.path),largestBatchId:r.largestBatchId}}class ib{getBundleMetadata(e,t){return XE(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Xc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return XE(e).put({bundleId:(r=t).id,createTime:zd(Yn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Nv(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:Sv(s.bundledQuery),readTime:Xc(s.readTime)};var s})}saveNamedQuery(e,t){return Nv(e).put({name:(r=t).name,readTime:zd(Yn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function XE(n){return Ir(n,"bundles")}function Nv(n){return Ir(n,"namedQueries")}class qa{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new qa(e,t.uid||"")}getOverlay(e,t){return Wg(e).get(qE(this.userId,t)).next(r=>r?Mv(this.serializer,r):null)}getOverlays(e,t){const r=Jo();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new NE(t,l);s.push(this.we(e,m))}),se.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(wi(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Wg(e).J("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Jo(),u=wi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wg(e).j("collectionPathOverlayIndex",l).next(m=>{for(const v of m){const D=Mv(this.serializer,v);s.set(D.getKey(),D)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Jo();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wg(e).X({index:"collectionGroupOverlayIndex",range:m},(v,D,T)=>{const N=Mv(this.serializer,D);u.size()<s||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):T.done()}).next(()=>u)}we(e,t){return Wg(e).put(function(r,s,u){const[l,m,v]=qE(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Nf(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Wg(n){return Ir(n,"documentOverlays")}class Kd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(dr(e.integerValue));else if("doubleValue"in e){const r=dr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Uc(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Uu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?aE(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):it()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),Xe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Of(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function QS(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=Of(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Kd.Ve=new Kd;class YE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=QS(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=QS(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Wx{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class sb{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Pf{constructor(){this.je=new YE,this.ze=new Wx(this.je),this.We=new sb(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class kf{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new kf(this.indexId,this.documentKey,this.arrayValue,r)}}function Qs(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ob(n.arrayValue,e.arrayValue),0!==t?t:(t=ob(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function ob(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class XS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){pt(e.collectionGroup===this.collectionId);const t=Sg(e);if(void 0!==t&&!this.en(t))return!1;const r=Rd(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ab(n){var e,t;if(pt(n instanceof rn||n instanceof wn),n instanceof rn){if(n instanceof NC){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>rn.create(n.field,"==",u)))||[];return wn.create(s,"or")}return n}const r=n.filters.map(s=>ab(s));return wn.create(r,n.op)}function Ff(n){if(0===n.getFilters().length)return[];const e=Li(ab(n));return pt(qg(e)),ZE(e)||Lf(e)?[e]:e.getFilters()}function ZE(n){return n instanceof rn}function Lf(n){return n instanceof wn&&Ld(n)}function qg(n){return ZE(n)||Lf(n)||function(e){if(e instanceof wn&&Lg(e)){for(const t of e.getFilters())if(!ZE(t)&&!Lf(t))return!1;return!0}return!1}(n)}function Li(n){if(pt(n instanceof rn||n instanceof wn),n instanceof rn)return n;if(1===n.filters.length)return Li(n.filters[0]);const e=n.filters.map(r=>Li(r));let t=wn.create(e,n.op);return t=Qg(t),qg(t)?t:(pt(t instanceof wn),pt(_f(t)),pt(t.filters.length>1),t.filters.reduce((r,s)=>ub(r,s)))}function ub(n,e){let t;return pt(n instanceof rn||n instanceof wn),pt(e instanceof rn||e instanceof wn),t=n instanceof rn?e instanceof rn?wn.create([n,e],"and"):JE(n,e):e instanceof rn?JE(e,n):function(r,s){if(pt(r.filters.length>0&&s.filters.length>0),_f(r)&&_f(s))return wf(r,s.getFilters());const u=Lg(r)?r:s,l=Lg(r)?s:r,m=u.filters.map(v=>ub(v,l));return wn.create(m,"or")}(n,e),Qg(t)}function JE(n,e){if(_f(e))return wf(e,n.getFilters());{const t=e.filters.map(r=>ub(n,r));return wn.create(t,"or")}}function Qg(n){if(pt(n instanceof rn||n instanceof wn),n instanceof rn)return n;const e=n.getFilters();if(1===e.length)return Qg(e[0]);if(hv(n))return n;const t=e.map(s=>Qg(s)),r=[];return t.forEach(s=>{s instanceof rn?r.push(s):s instanceof wn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:wn.create(r,n.op)}class YS{constructor(){this.rn=new xv}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ws.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class xv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Un(cn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Un(cn.comparator)).toArray()}}const Xg=new Uint8Array(0);class cb{constructor(e,t){this.user=e,this.databaseId=t,this.on=new xv,this.un=new mo(r=>Vd(r),(r,s)=>Ug(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:wi(s)};return ew(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[fS(t),""],!1,!0);return ew(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Ga(l.parent))}return r})}addFieldIndex(e,t){const r=Rv(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=Zg(e);return u.next(m=>{l.put(QE(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Rv(e),s=Zg(e),u=Yg(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Yg(e);let s=!0;const u=new Map;return se.forEach(this.cn(t),l=>this.an(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Wt();const m=[];return se.forEach(u,(v,D)=>{var T;ke("IndexedDbIndexManager",`Using index ${T=v,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${Vd(t)}`);const N=function(ut,dt){const kt=Sg(dt);if(void 0===kt)return null;for(const Ht of gv(ut,kt.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(D,v),L=function(ut,dt){const kt=new Map;for(const Ht of Rd(dt))for(const _n of gv(ut,Ht.fieldPath))switch(_n.op){case"==":case"in":kt.set(Ht.fieldPath.canonicalString(),_n.value);break;case"not-in":case"!=":return kt.set(Ht.fieldPath.canonicalString(),_n.value),Array.from(kt.values())}return null}(D,v),G=function(ut,dt){const kt=[];let Ht=!0;for(const _n of Rd(dt)){const rs=0===_n.kind?fE(ut,_n.fieldPath,ut.startAt):RC(ut,_n.fieldPath,ut.startAt);kt.push(rs.value),Ht&&(Ht=rs.inclusive)}return new Fd(kt,Ht)}(D,v),Q=function(ut,dt){const kt=[];let Ht=!0;for(const _n of Rd(dt)){const rs=0===_n.kind?RC(ut,_n.fieldPath,ut.endAt):fE(ut,_n.fieldPath,ut.endAt);kt.push(rs.value),Ht&&(Ht=rs.inclusive)}return new Fd(kt,Ht)}(D,v),ce=this.hn(v,D,G),De=this.hn(v,D,Q),Qe=this.ln(v,D,L),at=this.fn(v.indexId,N,ce,G.inclusive,De,Q.inclusive,Qe);return se.forEach(at,ut=>r.H(ut,t.limit).next(dt=>{dt.forEach(kt=>{const Ht=Xe.fromSegments(kt.documentKey);l.has(Ht)||(l=l.add(Ht),m.push(Ht))})}))}).next(()=>m)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ff(wn.create(e.filters,"and")).map(r=>xC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),D=v/(null!=t?t.length:1),T=[];for(let N=0;N<v;++N){const L=t?this.dn(t[N/D]):Xg,G=this.wn(e,L,r[N%D],s),Q=this._n(e,L,u[N%D],l),ce=m.map(De=>this.wn(e,L,De,!0));T.push(...this.createRange(G,Q,ce))}return T}wn(e,t,r,s){const u=new kf(e,Xe.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new kf(e,Xe.empty(),t,r);return s?u.Je():u}an(e,t){const r=new XS(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return se.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let v=new Un(rr.comparator),D=!1;for(const T of m.filters)for(const N of T.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?D=!0:v=v.add(N.field));for(const T of m.orderBy)T.field.isKeyField()||(v=v.add(T.field));return v.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new Pf;for(const s of Rd(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Kd.Ve._e(u,l)}return r.Qe()}dn(e){const t=new Pf;return Kd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Pf;return Kd.Ve._e(go(this.databaseId,t),r.He(function(s){const u=Rd(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new Pf);let u=0;for(const l of Rd(e)){const m=r[u++];for(const v of s)if(this.yn(t,l.fieldPath)&&Ka(m))s=this.pn(s,l,m);else{const D=v.He(l.kind);Kd.Ve._e(m,D)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const v=new Pf;v.seed(m.Qe()),Kd.Ve._e(l,v.He(t.kind)),u.push(v)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof rn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Rv(e),s=Zg(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return se.forEach(u,m=>s.get([m.indexId,this.uid]).next(v=>{l.push(function(D,T){const N=T?new Mg(T.sequenceNumber,new Ws(Xc(T.readTime),new Xe(Ga(T.documentKey)),T.largestBatchId)):Mg.empty(),L=D.fields.map(([G,Q])=>new ov(rr.fromServerFormat(G),Q));return new sv(D.indexId,D.collectionGroup,L,N)}(m,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:jt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Rv(e),u=Zg(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,v=>u.put(QE(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?se.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),se.forEach(m,v=>this.En(e,s,v).next(D=>{const T=this.An(u,v);return D.isEqual(T)?se.resolve():this.vn(e,u,v,D,T)}))))})}Rn(e,t,r,s){return Yg(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return Yg(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=Yg(e);let u=new Un(Qs);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new kf(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new Un(Qs);const s=this.mn(t,e);if(null==s)return r;const u=Sg(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Ka(l))for(const m of l.arrayValue.values||[])r=r.add(new kf(t.indexId,e.key,this.dn(m),s))}else r=r.add(new kf(t.indexId,e.key,Xg,s));return r}vn(e,t,r,s,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,v,D,T,N){const L=m.getIterator(),G=v.getIterator();let Q=Od(L),ce=Od(G);for(;Q||ce;){let De=!1,Qe=!1;if(Q&&ce){const at=D(Q,ce);at<0?Qe=!0:at>0&&(De=!0)}else null!=Q?Qe=!0:De=!0;De?(T(ce),ce=Od(G)):Qe?(N(Q),Q=Od(L)):(Q=Od(L),ce=Od(G))}}(s,u,Qs,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),se.waitFor(l)}Tn(e){let t=1;return Zg(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Qs(l,m)).filter((l,m,v)=>!m||0!==Qs(l,v[m-1]));const s=[];s.push(e);for(const l of r){const m=Qs(l,e),v=Qs(l,t);if(0===m)s[0]=e.Je();else if(m>0&&v<0)s.push(l),s.push(l.Je());else if(v>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,Xg,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,Xg,[]]))}return u}bn(e,t){return Qs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Vf)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||it())).next(Vf)}}function ew(n){return Ir(n,"collectionParents")}function Yg(n){return Ir(n,"indexEntries")}function Rv(n){return Ir(n,"indexConfiguration")}function Zg(n){return Ir(n,"indexState")}function Vf(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;uv(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ws(e.readTime,e.documentKey,t)}const lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vi(e,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function db(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const v=r.X({range:l},(T,N,L)=>(m++,L.delete()));u.push(v.next(()=>{pt(1===m)}));const D=[];for(const T of t.mutations){const N=pC(e,T.key.path,t.batchId);u.push(s.delete(N)),D.push(T.key)}return se.waitFor(u).next(()=>D)}function Wd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);class Jg{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){pt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Jg(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gu(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Uf(e),l=Gu(e);return l.add({}).next(m=>{pt("number"==typeof m);const v=new ME(m,t,r,s),D=function(L,G,Q){const ce=Q.baseMutations.map(Qe=>Nf(L.fe,Qe)),De=Q.mutations.map(Qe=>Nf(L.fe,Qe));return{userId:G,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:ce,mutations:De}}(this.serializer,this.userId,v),T=[];let N=new Un((L,G)=>jt(L.canonicalString(),G.canonicalString()));for(const L of s){const G=pC(this.userId,L.key.path,m);N=N.add(L.key.path.popLast()),T.push(l.put(D)),T.push(u.put(G,_S))}return N.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Vn[m]=v.keys()}),se.waitFor(T).next(()=>v)})}lookupMutationBatch(e,t){return Gu(e).get(t).next(r=>r?(pt(r.userId===this.userId),Yc(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?se.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Gu(e).X({index:"userMutationsIndex",range:s},(l,m,v)=>{m.userId===this.userId&&(pt(m.batchId>=r),u=Yc(this.serializer,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gu(e).j("userMutationsIndex",t).next(r=>r.map(s=>Yc(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xg(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Uf(e).X({range:s},(l,m,v)=>{const[D,T,N]=l,L=Ga(T);if(D===this.userId&&t.path.isEqual(L))return Gu(e).get(N).next(G=>{if(!G)throw it();pt(G.userId===this.userId),u.push(Yc(this.serializer,G))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(jt);const s=[];return t.forEach(u=>{const l=xg(this.userId,u.path),m=IDBKeyRange.lowerBound(l),v=Uf(e).X({range:m},(D,T,N)=>{const[L,G,Q]=D,ce=Ga(G);L===this.userId&&u.path.isEqual(ce)?r=r.add(Q):N.done()});s.push(v)}),se.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=xg(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new Un(jt);return Uf(e).X({range:l},(v,D,T)=>{const[N,L,G]=v,Q=Ga(L);N===this.userId&&r.isPrefixOf(Q)?Q.length===s&&(m=m.add(G)):T.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Gu(e).get(u).next(l=>{if(null===l)throw it();pt(l.userId===this.userId),r.push(Yc(this.serializer,l))}))}),se.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return db(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),se.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Uf(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const v=Ga(u[1]);s.push(v)}else m.done()}).next(()=>{pt(0===s.length)})})}containsKey(e,t){return tw(e,this.userId,t)}xn(e){return Bf(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tw(n,e,t){const r=xg(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Uf(n).X({range:u,Y:!0},(m,v,D)=>{const[T,N,L]=m;T===e&&N===s&&(l=!0),D.done()}).next(()=>l)}function Gu(n){return Ir(n,"mutations")}function Uf(n){return Ir(n,"documentMutations")}function Bf(n){return Ir(n,"mutationQueues")}class na{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new na(0)}static Mn(){return new na(-1)}}class ZS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new na(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>vt.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jf(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return jf(e).X((l,m)=>{const v=Rf(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>se.waitFor(u)).next(()=>s)}forEachTarget(e,t){return jf(e).X((r,s)=>{const u=Rf(s);t(u)})}$n(e){return hb(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}On(e,t){return hb(e).put("targetGlobalKey",t)}Fn(e,t){return jf(e).put(WE(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vd(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return jf(e).X({range:s,index:"queryTargetsIndex"},(l,m,v)=>{const D=Rf(m);Ug(t,D.target)&&(u=D,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=zu(e);return t.forEach(l=>{const m=wi(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),se.waitFor(s)}removeMatchingKeys(e,t,r){const s=zu(e);return se.forEach(t,u=>{const l=wi(u.path);return se.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=zu(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=zu(e);let u=Wt();return s.X({range:r,Y:!0},(l,m,v)=>{const D=Ga(l[1]),T=new Xe(D);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=wi(t.path),s=IDBKeyRange.bound([r],[fS(r)],!1,!0);let u=0;return zu(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,m],v,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}le(e,t){return jf(e).get(t).next(r=>r?Rf(r):null)}}function jf(n){return Ir(n,"targets")}function hb(n){return Ir(n,"targetGlobal")}function zu(n){return Ir(n,"targetDocuments")}function nw([n,e],[t,r]){const s=jt(n,t);return 0===s?jt(e,r):s}class fb{constructor(e){this.Ln=e,this.buffer=new Un(nw),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.A)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Vu(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Lu(r)}yield t.Qn(3e5)}))}}class gb{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(gs.ct);const r=new fb(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(lb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lb):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,m,v,D;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),s=this.params.maximumSequenceNumbersToCollect):s=N,l=Date.now(),this.nthSequenceNumber(e,s))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),K0()<=$o.$b.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${N} documents in `+(D-v)+`ms\nTotal Duration: ${D-T}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:N})))}}class JS{constructor(e,t){this.db=e,this.garbageCollector=function mb(n,e){return new gb(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return rw(e,r)}removeReference(e,t,r){return rw(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return rw(e,t)}Xn(e,t){return function(r,s){let u=!1;return Bf(r).Z(l=>tw(r,l,s).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const v=this.Xn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),zu(e).delete([0,wi(l.path)])))});s.push(v)}}).next(()=>se.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return rw(e,t)}Yn(e,t){const r=zu(e);let s,u=gs.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:v,sequenceNumber:D})=>{0===l?(u!==gs.ct&&t(new Xe(Ga(s)),u),u=D,s=v):u=gs.ct}).next(()=>{u!==gs.ct&&t(new Xe(Ga(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rw(n,e){return zu(n).put((r=n.currentSequenceNumber,{targetId:0,path:wi(e.path),sequenceNumber:r}));var r}class eM{constructor(){this.changes=new mo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qx{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qd(e).put(r)}removeEntry(e,t,r){return qd(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Av(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Qn.newInvalidDocument(t);return qd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tm(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Qn.newInvalidDocument(t)};return qd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tm(t))},(s,u)=>{r={document:this.ts(t,u),size:Wd(u)}}).next(()=>r)}getEntries(e,t){let r=es();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=es(),s=new Pn(Xe.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),s=s.insert(u,Wd(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return se.resolve();let s=new Un($f);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(tm(s.first()),tm(s.last())),l=s.getIterator();let m=l.getNext();return qd(e).X({index:"documentKeyIndex",range:u},(v,D,T)=>{const N=Xe.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&$f(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,D),m=l.hasNext()?l.getNext():null),m?T.G(tm(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),Av(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qd(e).j(IDBKeyRange.bound(l,m,!0)).next(v=>{let D=es();for(const T of v){const N=this.ts(Xe.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);N.isFoundDocument()&&(Df(t,N)||s.has(N.key))&&(D=D.insert(N.key,N))}return D})}getAllFromCollectionGroup(e,t,r,s){let u=es();const l=iw(t,r),m=iw(t,Ws.max());return qd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(v,D,T)=>{const N=this.ts(Xe.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===s&&T.done()}).next(()=>u)}newChangeBuffer(e){return new yb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return em(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}Zn(e,t){return em(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function qS(n,e){let t;if(e.document)t=GE(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),s=Xc(e.noDocument.readTime);t=Qn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Xe.fromSegments(e.unknownDocument.path),s=Xc(e.unknownDocument.version);t=Qn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new On(r[0],r[1]);return vt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Qn.newInvalidDocument(e)}}function tM(n){return new qx(n)}class yb extends eM{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new mo(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Un((u,l)=>jt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const v=rb(this.os.serializer,l);s=s.add(u.path.popLast());const D=Wd(v);r+=D-m.size,t.push(this.os.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=rb(this.os.serializer,l.convertToNoDocument(vt.min()));t.push(this.os.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function em(n){return Ir(n,"remoteDocumentGlobal")}function qd(n){return Ir(n,"remoteDocumentsV14")}function tm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iw(n,e){const t=e.documentKey.path.toArray();return[n,Av(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function $f(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=jt(t[u],r[u]),s)return s;return s=jt(t.length,r.length),s||(s=jt(t[t.length-2],r[r.length-2]),s||jt(t[t.length-1],r[r.length-1]))}class nM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vb{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&$d(r.mutation,s,ms.empty(),On.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const s=Jo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Hg();return u.forEach((m,v)=>{l=l.insert(m,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Jo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=es();const l=Cf(),m=Cf();return t.forEach((v,D)=>{const T=r.get(D.key);s.has(D.key)&&(void 0===T||T.mutation instanceof $u)?u=u.insert(D.key,D):void 0!==T?(l.set(D.key,T.mutation.getFieldMask()),$d(T.mutation,D,T.mutation.getFieldMask(),On.now())):l.set(D.key,ms.empty())}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((D,T)=>l.set(D,T)),t.forEach((D,T)=>{var N;return m.set(D,new nM(T,null!==(N=l.get(D))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Cf();let s=new Pn((l,m)=>l-m),u=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(v=>{const D=t.get(v);if(null===D)return;let T=r.get(v)||ms.empty();T=m.applyToLocalView(D,T),r.set(v,T);const N=(s.get(m.batchId)||Wt()).add(v);s=s.insert(m.batchId,N)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),D=v.key,T=v.value,N=_v();T.forEach(L=>{if(!u.has(L)){const G=Dv(t.get(L),r.get(L));null!==G&&N.set(L,G),u=u.add(L)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,N))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):yE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):se.resolve(Jo());let m=-1,v=u;return l.next(D=>se.forEach(D,(T,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(T)?se.resolve():this.remoteDocumentCache.getEntry(e,T).next(L=>{v=v.insert(T,L)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,v,D,Wt())).next(T=>({batchId:m,changes:kC(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let s=Hg();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Hg();return this.indexManager.getCollectionParents(e,s).next(l=>se.forEach(l,m=>{const v=(D=t,T=m.child(s),new ju(T,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,T;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(D=>{D.forEach((T,N)=>{u=u.insert(T,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((m,v)=>{const D=v.getKey();null===u.get(D)&&(u=u.insert(D,Qn.newInvalidDocument(D)))});let l=Hg();return u.forEach((m,v)=>{const D=s.get(m);void 0!==D&&$d(D.mutation,v,ms.empty(),On.now()),Df(t,v)&&(l=l.insert(m,v))}),l})}}class rM{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Yn(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Sv(r.bundledQuery),readTime:Yn(r.readTime)}),se.resolve();var r}}class iM{constructor(){this.overlays=new Pn(Xe.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Jo();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const s=Jo(),u=t.length+1,l=new Xe(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const v=m.getNext().value,D=v.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Pn((D,T)=>D-T);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let T=u.get(D.largestBatchId);null===T&&(T=Jo(),u=u.insert(D.largestBatchId,T)),T.set(D.getKey(),D)}}const m=Jo(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((D,T)=>m.set(D,T)),!(m.size()>=s)););return se.resolve(m)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new NE(t,r));let u=this.ls.get(t);void 0===u&&(u=Wt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class _b{constructor(){this.fs=new Un(hi.ds),this.ws=new Un(hi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new hi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new hi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Xe(new cn([])),r=new hi(t,e),s=new hi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Xe(new cn([])),r=new hi(t,e),s=new hi(t,e+1);let u=Wt();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new hi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Xe.comparator(e.key,t.key)||jt(e.As,t.As)}static _s(e,t){return jt(e.As,t.As)||Xe.comparator(e.key,t.key)}}class Eb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Un(hi.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new ME(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.Rs=this.Rs.add(new hi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hi(t,0),s=new hi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const m=this.Ps(l.As);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(jt);return t.forEach(s=>{const u=new hi(s,0),l=new hi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Xe.isDocumentKey(u)||(u=u.child(""));const l=new hi(new Xe(u),0);let m=new Un(jt);return this.Rs.forEachWhile(v=>{const D=v.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(m=m.add(v.As)),!0)},l),se.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){pt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,s=>{const u=new hi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new hi(t,0),s=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sM{constructor(e){this.Ds=e,this.docs=new Pn(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Qn.newInvalidDocument(s))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=es();const l=t.path,m=new Xe(l.child("")),v=this.docs.getIteratorFrom(m);for(;v.hasNext();){const{key:D,value:{document:T}}=v.getNext();if(!l.isPrefixOf(D.path))break;D.path.length>l.length+1||uv(av(T),r)<=0||(s.has(T.key)||Df(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,t,r,s){it()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oM(this)}getSize(e){return se.resolve(this.size)}}class oM extends eM{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class nm{constructor(e){this.persistence=e,this.xs=new mo(t=>Vd(t),Ug),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new _b,this.targetCount=0,this.Ms=na.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new na(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),se.waitFor(u).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class sw{constructor(e,t){this.$s={},this.overlays={},this.Os=new gs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new nm(this),this.indexManager=new YS,this.remoteDocumentCache=new sM(r=>this.referenceDelegate.Ls(r)),this.serializer=new nb(t),this.qs=new rM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new Eb(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const s=new wb(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class wb extends Q0{constructor(e){super(),this.currentSequenceNumber=e}}class Ov{constructor(e){this.persistence=e,this.Qs=new _b,this.js=null}static zs(e){return new Ov(e)}get Ws(){if(this.js)return this.js;throw it()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const s=Xe.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,vt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class aM{constructor(e){this.serializer=e}O(e,t,r,s){const u=new X0("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eE,{unique:!0}),m.createObjectStore("documentMutations"),ow(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=se.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),ow(e)),l=l.next(()=>function(m){const v=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",D)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,v){return v.store("mutations").j().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eE,{unique:!0});const T=v.store("mutations"),N=D.map(L=>T.put(L));return se.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:bS});v.createIndex("collectionPathOverlayIndex",TS,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",AS,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:gC});v.createIndex("documentKeyIndex",mC),v.createIndex("collectionGroupIndex",Rg)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:IS}).createIndex("sequenceNumberIndex",Og,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:DS}).createIndex("documentKeyIndex",CS,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=Wd(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>se.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>se.forEach(m,v=>{pt(v.userId===u.userId);const D=Yc(this.serializer,v);return db(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,m)=>{const v=new cn(l),D=[0,wi(v)];u.push(t.get(D).next(T=>T?se.resolve():t.put({targetId:0,path:wi(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:wS});const r=t.store("collectionParents"),s=new xv,u=l=>{if(s.add(l)){const m=l.lastSegment(),v=l.popLast();return r.put({collectionId:m,parent:wi(v)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const v=new cn(l);return u(v.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,v],D)=>{const T=Ga(m);return u(T.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=Rf(s),l=WE(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),v=(D=l,D.document?new Xe(cn.fromString(D.document.name).popFirst(5)):D.noDocument?Xe.fromSegments(D.noDocument.path):D.unknownDocument?Xe.fromSegments(D.unknownDocument.path):it()).path.toArray();var D;const T={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(T))}).next(()=>se.waitFor(s))}si(e,t){const r=t.store("mutations"),s=tM(this.serializer),u=new sw(Ov.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(v=>{var D;let T=null!==(D=m.get(v.userId))&&void 0!==D?D:Wt();Yc(this.serializer,v).keys().forEach(N=>T=T.add(N)),m.set(v.userId,T)}),se.forEach(m,(v,D)=>{const T=new Kr(D),N=qa.de(this.serializer,T),L=u.getIndexManager(T),G=Jg.de(T,this.serializer,L,u.referenceDelegate);return new vb(s,G,N,L).recalculateAndSaveOverlaysForDocumentKeys(new rE(t,gs.ct),v).next()})})}}function ow(n){n.createObjectStore("targetDocuments",{keyPath:yC}).createIndex("documentTargetsIndex",vC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ES,{unique:!0}),n.createObjectStore("targetGlobal")}const aw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class im{constructor(e,t,r,s,u,l,m,v,D,T,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=D,this.oi=T,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=L=>Promise.resolve(),!im.D())throw new Me(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JS(this,s),this.di=t+"main",this.serializer=new nb(v),this.wi=new fo(this.di,this.ui,new aM(this.serializer)),this.Bs=new ZS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tM(this.serializer),this.qs=new ib,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ae.FAILED_PRECONDITION,aw);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new gs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ee.A)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ee.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ee.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>om(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Vu(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return sm(e).get("owner").next(t=>se.resolve(this.Ri(t)))}Pi(e){return om(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.A)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Ir(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(v=>-1===l.indexOf(v));return se.forEach(m,v=>s.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?se.resolve(!0):sm(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Me(ae.FAILED_PRECONDITION,aw);return!1}}return!(!this.networkEnabled||!this.inForeground)||om(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.A)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new rE(t,gs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>om(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Jg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cb(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return qa.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?nE:14===l?tE:13===l?EC:12===l?SS:11===l?_C:void it();var l;let m;return this.wi.runTransaction(e,s,u,v=>(m=new rE(v,this.Os?this.Os.next():gs.ct),"readwrite-primary"===t?this.Ti(m).next(D=>!!D||this.Ei(m)).next(D=>{if(!D)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Me(ae.FAILED_PRECONDITION,dC);return r(m)}).next(D=>this.vi(m).next(()=>D)):this.Oi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Oi(e){return sm(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ae.FAILED_PRECONDITION,aw)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sm(e).put("owner",t)}static D(){return fo.D()}Ai(e){const t=sm(e);return t.get("owner").next(r=>this.Ri(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,hn.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sm(n){return Ir(n,"owner")}function om(n){return Ir(n,"clientMetadata")}function Pv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class uw{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=Wt(),s=Wt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new uw(e,t.fromCache,r,s)}}class Ib{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(gE(t))return se.resolve(null);let r=Di(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=yv(t,null,"F"),r=Di(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Wt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const D=this.ji(t,m);return this.zi(t,D,l,v.readTime)?this.Ki(e,yv(t,null,"F")):this.Wi(e,D,t,v)}))})))}Gi(e,t,r,s){return gE(t)||s.isEqual(vt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(K0()<=$o.$b.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$g(t)),this.Wi(e,l,t,Xo(s,-1)))})}ji(e,t){let r=new Un(PC(e));return t.forEach((s,u)=>{Df(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return K0()<=$o.$b.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",$g(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ws.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class uM{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new Pn(jt),this.Yi=new mo(u=>Vd(u),Ug),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vb(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function kv(n,e,t,r){return new uM(n,e,t,r)}function Db(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,Ee.A)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let v=Wt();for(const D of s){l.push(D.batchId);for(const T of D.mutations)v=v.add(T.key)}for(const D of u){m.push(D.batchId);for(const T of D.mutations)v=v.add(T.key)}return t.localDocuments.getDocuments(r,v).next(D=>({er:D,removedBatchIds:l,addedBatchIds:m}))})})}),Fv.apply(this,arguments)}function Cb(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function bb(n,e,t){let r=Wt(),s=Wt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=es();return t.forEach((m,v)=>{const D=u.get(m);v.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(m)),v.isNoDocument()&&v.version.isEqual(vt.min())?(e.removeEntry(m,v.readTime),l=l.insert(m,v)):!D.isValidDocument()||v.version.compareTo(D.version)>0||0===v.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(v),l=l.insert(m,v)):ke("LocalStore","Ignoring outdated watch update for ",m,". Current version:",D.version," Watch version:",v.version)}),{nr:l,sr:s}})}function dM(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hf(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,se.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new Hu(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Gf(n,e,t){return cw.apply(this,arguments)}function cw(){return cw=(0,Ee.A)(function*(n,e,t){const r=Ze(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Vu(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),cw.apply(this,arguments)}function am(n,e,t){const r=Ze(n);let s=vt.min(),u=Wt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,v,D){const T=Ze(m),N=T.Yi.get(D);return void 0!==N?se.resolve(T.Ji.get(N)):T.Bs.getTargetData(v,D)}(r,l,Di(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(v=>{u=v})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:vt.min(),t?u:Wt())).next(m=>(Ab(r,OC(e),m),{documents:m,ir:u})))}function lw(n,e){const t=Ze(n),r=Ze(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function Tb(n,e){const t=Ze(n),r=t.Xi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,Xo(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Ab(t,e,s),s))}function Ab(n,e,t){let r=n.Xi.get(e)||vt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function dw(){return dw=(0,Ee.A)(function*(n,e,t,r){const s=Ze(n);let u=Wt(),l=es();for(const D of t){const T=e.rr(D.metadata.name);D.document&&(u=u.add(T));const N=e.ur(D);N.setReadTime(e.cr(D.metadata.readTime)),l=l.insert(T,N)}const m=s.Zi.newChangeBuffer({trackRemovals:!0}),v=yield Hf(s,(D=r,Di(Ud(cn.fromString(`__bundle__/docs/${D}`)))));var D;return s.persistence.runTransaction("Apply bundle documents","readwrite",D=>bb(D,m,l).next(T=>(m.apply(D),T)).next(T=>s.Bs.removeMatchingKeysForTargetId(D,v.targetId).next(()=>s.Bs.addMatchingKeys(D,u,v.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(D,T.nr,T.sr)).next(()=>T.nr)))}),dw.apply(this,arguments)}function hM(n,e){return hw.apply(this,arguments)}function hw(){return hw=(0,Ee.A)(function*(n,e,t=Wt()){const r=yield Hf(n,Di(Sv(e.bundledQuery))),s=Ze(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=Yn(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Or.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(m.targetId,m),s.Bs.updateTargetData(u,m).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),hw.apply(this,arguments)}function Mb(n,e){return`firestore_clients_${n}_${e}`}function Lv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function um(n,e){return`firestore_targets_${n}_${e}`}class cm{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Me(s.error.code,s.error.message))),l?new cm(e,t,s.state,u):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Me(r.error.code,r.error.message))),u?new Qd(e,r.state,s):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Ev();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=mf(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new Vv(e,u):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class fw{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new fw(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lm{constructor(){this.activeTargetIds=Ev()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pw{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pn(jt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=Mb(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new lm),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.A)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(Mb(e.persistenceKey,s));if(u){const l=Vv.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(um(this.persistenceKey,e));if(r){const s=Qd.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(um(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.A)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=gs.ct;if(null!=u)try{const m=JSON.parse(u);pt("number"==typeof m),l=m}catch(m){nr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==gs.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new cm(this.currentUser,e,t,r),u=Lv(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=Lv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=um(this.persistenceKey,e),u=new Qd(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Vv.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return cm.ar(new Kr(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return Qd.ar(s,t)}br(e){return fw.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ee.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(v=>{s.has(v)||l.push(v)}),s.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Ev();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class gw{constructor(){this.Hr=new lm,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new lm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xd{Yr(e){}shutdown(){}}class mw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Uv=null;function Nb(){return null===Uv?Uv=268435456+Math.round(2147483648*Math.random()):Uv++,"0x"+Uv.toString(16)}const yw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vw{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ui="WebChannelConnection";class xb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=Nb(),m=this.To(e,t);ke("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const v={};return this.Eo(v,s,u),this.Ao(e,m,v,r).then(D=>(ke("RestConnection",`Received RPC '${e}' ${l}: `,D),D),D=>{throw Fi("RestConnection",`RPC '${e}' ${l} failed with error: `,D,"url: ",m,"request:",r),D})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${yw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=Nb();return new Promise((l,m)=>{const v=new oC;v.setWithCredentials(!0),v.listenOnce(Hx.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case ev.NO_ERROR:const T=v.getResponseJson();ke(Ui,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),l(T);break;case ev.TIMEOUT:ke(Ui,`RPC '${e}' ${u} timed out`),m(new Me(ae.DEADLINE_EXCEEDED,"Request time out"));break;case ev.HTTP_ERROR:const N=v.getStatus();if(ke(Ui,`RPC '${e}' ${u} failed with status:`,N,"response text:",v.getResponseText()),N>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const G=L?.error;if(G&&G.status&&G.message){const Q=function(ce){const De=ce.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(De)>=0?De:ae.UNKNOWN}(G.status);m(new Me(Q,G.message))}else m(new Me(ae.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new Me(ae.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{ke(Ui,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(s);ke(Ui,`RPC '${e}' ${u} sending request:`,s),v.send(t,"POST",D,r,15)})}Ro(e,t,r){const s=Nb(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=$x(),m=iC(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(v.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(v.xmlHttpFactory=new sC({})),this.Eo(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const T=u.join("");ke(Ui,`Creating RPC '${e}' stream ${s}: ${T}`,v);const N=l.createWebChannel(T,v);let L=!1,G=!1;const Q=new vw({ro:De=>{G?ke(Ui,`Not sending because RPC '${e}' stream ${s} is closed:`,De):(L||(ke(Ui,`Opening RPC '${e}' stream ${s} transport.`),N.open(),L=!0),ke(Ui,`RPC '${e}' stream ${s} sending:`,De),N.send(De))},oo:()=>N.close()}),ce=(De,Qe,at)=>{De.listen(Qe,ut=>{try{at(ut)}catch(dt){setTimeout(()=>{throw dt},0)}})};return ce(N,nv.EventType.OPEN,()=>{G||ke(Ui,`RPC '${e}' stream ${s} transport opened.`)}),ce(N,nv.EventType.CLOSE,()=>{G||(G=!0,ke(Ui,`RPC '${e}' stream ${s} transport closed`),Q.wo())}),ce(N,nv.EventType.ERROR,De=>{G||(G=!0,Fi(Ui,`RPC '${e}' stream ${s} transport errored:`,De),Q.wo(new Me(ae.UNAVAILABLE,"The operation could not be completed")))}),ce(N,nv.EventType.MESSAGE,De=>{var Qe;if(!G){const at=De.data[0];pt(!!at);const dt=at.error||(null===(Qe=at[0])||void 0===Qe?void 0:Qe.error);if(dt){ke(Ui,`RPC '${e}' stream ${s} received error:`,dt);const kt=dt.status;let Ht=function(rs){const Za=Bn[rs];if(void 0!==Za)return xE(Za)}(kt),_n=dt.message;void 0===Ht&&(Ht=ae.INTERNAL,_n="Unknown error status: "+kt+" with message "+dt.message),G=!0,Q.wo(new Me(Ht,_n)),N.close()}else ke(Ui,`RPC '${e}' stream ${s} received:`,at),Q._o(at)}}),ce(m,tv.STAT_EVENT,De=>{De.stat===G0.PROXY?ke(Ui,`RPC '${e}' stream ${s} detected buffering proxy`):De.stat===G0.NOPROXY&&ke(Ui,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{Q.fo()},0),Q}}function _w(){return typeof window<"u"?window:null}function Bv(){return typeof document<"u"?document:null}function zf(n){return new KC(n,!0)}class dm{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Ew{constructor(e,t,r,s,u,l,m,v){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new dm(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ee.A)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ee.A)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ee.A)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new Me(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,Ee.A)(function*(){e.state=0,e.start()}))}tu(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rb extends Ew{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function XC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:it(),s=e.targetChange.targetIds||[],u=function(v,D){return v.useProto3Json?(pt(void 0===D||"string"==typeof D),Or.fromBase64String(D||"")):(pt(void 0===D||D instanceof Uint8Array),Or.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(v){const D=void 0===v.code?ae.UNKNOWN:xE(v.code);return new Me(D,v.message||"")}(l);t=new FE(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=ta(n,r.document.name),u=Yn(r.document.updateTime),l=r.document.createTime?Yn(r.document.createTime):vt.min(),m=new Qr({mapValue:{fields:r.document.fields}}),v=Qn.newFoundDocument(s,u,l,m);t=new Es(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,s=ta(n,r.document),u=r.readTime?Yn(r.readTime):vt.min(),l=Qn.newNoDocument(s,u);t=new Es([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=ta(n,r.document);t=new Es([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return it();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new jC(s,u);t=new kE(r.targetId,l)}}var v;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return vt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Yn(u.readTime):vt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Gd(this.serializer),t.addTarget=function(s,u){let l;const m=u.target;if(l=If(m)?{documents:zE(s,m)}:{query:KE(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=UE(s,u.resumeToken);const v=VE(s,u.expectedCount);null!==v&&(l.expectedCount=v)}else if(u.snapshotVersion.compareTo(vt.min())>0){l.readTime=Sf(s,u.snapshotVersion.toTimestamp());const v=VE(s,u.expectedCount);null!==v&&(l.expectedCount=v)}return l}(this.serializer,e);const r=function HS(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Gd(this.serializer),t.removeTarget=e,this.Wo(t)}}class Ob extends Ew{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function YC(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(r,s){let u=Yn(r.updateTime?r.updateTime:s);return u.isEqual(vt.min())&&(u=Yn(s)),new LS(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.cu(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Gd(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Nf(this.serializer,r))};this.Wo(t)}}class Pb extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Me(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(ae.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(ae.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class pM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(nr(t),this.mu=!1):ke("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class gM{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,Ee.A)(function*(){var v;Ku(l)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,Ee.A)(function*(D){const T=Ze(D);T.vu.add(4),yield Yd(T),T.bu.set("Unknown"),T.vu.delete(4),yield Kf(T)}),function(D){return v.apply(this,arguments)})(l))}))}),this.bu=new pM(r,s)}}function Kf(n){return kb.apply(this,arguments)}function kb(){return kb=(0,Ee.A)(function*(n){if(Ku(n))for(const e of n.Ru)yield e(!0)}),kb.apply(this,arguments)}function Yd(n){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,Ee.A)(function*(n){for(const e of n.Ru)yield e(!1)}),Iw.apply(this,arguments)}function jv(n,e){const t=Ze(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Hv(t)?Cw(t):fm(t).Ko()&&Dw(t,e))}function $v(n,e){const t=Ze(n),r=fm(t);t.Au.delete(e),r.Ko()&&Fb(t,e),0===t.Au.size&&(r.Ko()?r.jo():Ku(t)&&t.bu.set("Unknown"))}function Dw(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fm(n).su(e)}function Fb(n,e){n.Vu.qt(e),fm(n).iu(e)}function Cw(n){n.Vu=new jS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),fm(n).start(),n.bu.gu()}function Hv(n){return Ku(n)&&!fm(n).Uo()&&n.Au.size>0}function Ku(n){return 0===Ze(n).vu.size}function Lb(n){n.Vu=void 0}function mM(n){return bw.apply(this,arguments)}function bw(){return bw=(0,Ee.A)(function*(n){n.Au.forEach((e,t)=>{Dw(n,e)})}),bw.apply(this,arguments)}function yM(n,e){return Tw.apply(this,arguments)}function Tw(){return Tw=(0,Ee.A)(function*(n,e){Lb(n),Hv(n)?(n.bu.Iu(e),Cw(n)):n.bu.set("Unknown")}),Tw.apply(this,arguments)}function vM(n,e,t){return Aw.apply(this,arguments)}function Aw(){return Aw=(0,Ee.A)(function*(n,e,t){if(n.bu.set("Online"),e instanceof FE&&2===e.state&&e.cause)try{yield(r=(0,Ee.A)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.Au.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.Au.delete(m),s.Vu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zc(n,r)}else if(e instanceof Es?n.Vu.Ht(e):e instanceof kE?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(vt.min()))try{const r=yield Cb(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const D=s.Au.get(v);D&&s.Au.set(v,D.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,v)=>{const D=s.Au.get(m);if(!D)return;s.Au.set(m,D.withResumeToken(Or.EMPTY_BYTE_STRING,D.snapshotVersion)),Fb(s,m);const T=new Hu(D.target,m,v,D.sequenceNumber);Dw(s,T)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Zc(n,r)}var r}),Aw.apply(this,arguments)}function Zc(n,e,t){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,Ee.A)(function*(n,e,t){if(!Vu(e))throw e;n.vu.add(1),yield Yd(n),n.bu.set("Offline"),t||(t=()=>Cb(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.A)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Kf(n)}))}),Gv.apply(this,arguments)}function Sw(n,e){return e().catch(t=>Zc(n,t,e))}function Zd(n){return zv.apply(this,arguments)}function zv(){return zv=(0,Ee.A)(function*(n){const e=Ze(n),t=yo(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Vb(e);)try{const s=yield dM(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,_M(e,s)}catch(s){yield Zc(e,s)}Ub(e)&&EM(e)}),zv.apply(this,arguments)}function Vb(n){return Ku(n)&&n.Eu.length<10}function _M(n,e){n.Eu.push(e);const t=yo(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Ub(n){return Ku(n)&&!yo(n).Uo()&&n.Eu.length>0}function EM(n){yo(n).start()}function Qx(n){return Mw.apply(this,arguments)}function Mw(){return Mw=(0,Ee.A)(function*(n){yo(n).hu()}),Mw.apply(this,arguments)}function wM(n){return Nw.apply(this,arguments)}function Nw(){return Nw=(0,Ee.A)(function*(n){const e=yo(n);for(const t of n.Eu)e.uu(t.mutations)}),Nw.apply(this,arguments)}function IM(n,e,t){return xw.apply(this,arguments)}function xw(){return xw=(0,Ee.A)(function*(n,e,t){const r=n.Eu.shift(),s=Cv.from(r,e,t);yield Sw(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Zd(n)}),xw.apply(this,arguments)}function hm(n,e){return Rw.apply(this,arguments)}function Rw(){return Rw=(0,Ee.A)(function*(n,e){var t;e&&yo(n).ou&&(yield(t=(0,Ee.A)(function*(r,s){if($C(u=s.code)&&u!==ae.ABORTED){const l=r.Eu.shift();yo(r).Qo(),yield Sw(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Zd(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),Ub(n)&&EM(n)}),Rw.apply(this,arguments)}function Kv(n,e){return Ow.apply(this,arguments)}function Ow(){return Ow=(0,Ee.A)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Ku(t);t.vu.add(3),yield Yd(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Kf(t)}),Ow.apply(this,arguments)}function Bb(n,e){return Pw.apply(this,arguments)}function Pw(){return Pw=(0,Ee.A)(function*(n,e){const t=Ze(n);e?(t.vu.delete(2),yield Kf(t)):e||(t.vu.add(2),yield Yd(t),t.bu.set("Unknown"))}),Pw.apply(this,arguments)}function fm(n){return n.Su||(n.Su=function(e,t,r){const s=Ze(e);return s.fu(),new Rb(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:mM.bind(null,n),ao:yM.bind(null,n),nu:vM.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.A)(function*(t){t?(n.Su.Qo(),Hv(n)?Cw(n):n.bu.set("Unknown")):(yield n.Su.stop(),Lb(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function yo(n){return n.Du||(n.Du=function(e,t,r){const s=Ze(e);return s.fu(),new Ob(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:Qx.bind(null,n),ao:hm.bind(null,n),au:wM.bind(null,n),cu:IM.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.A)(function*(t){t?(n.Du.Qo(),yield Zd(n)):(yield n.Du.stop(),n.Eu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class kw{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new kw(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wf(n,e){if(nr("AsyncQueue",`${e}: ${n}`),Vu(n))return new Me(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class qf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=Hg(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new qf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new qf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pm{constructor(){this.Cu=new Pn(Xe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):it():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jd{constructor(e,t,r,s,u,l,m,v,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Jd(e,t,qf.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class DM{constructor(){this.Nu=void 0,this.listeners=[]}}class jb{constructor(){this.queries=new mo(e=>jg(e),Gc),this.onlineState="Unknown",this.ku=new Set}}function Qf(n,e){return Fw.apply(this,arguments)}function Fw(){return Fw=(0,Ee.A)(function*(n,e){const t=Ze(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new DM),s)try{u.Nu=yield t.onListen(r)}catch(l){const m=Wf(l,`Initialization of query '${$g(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&qv(t)}),Fw.apply(this,arguments)}function Lw(n,e){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,Ee.A)(function*(n,e){const t=Ze(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),Wv.apply(this,arguments)}function CM(n,e){const t=Ze(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.$u(s)&&(r=!0);l.Nu=s}}r&&qv(t)}function bM(n,e,t){const r=Ze(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function qv(n){n.ku.forEach(e=>{e.next()})}class Xf{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Jd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Jd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class TM{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class $b{constructor(e){this.serializer=e}rr(e){return ta(this.serializer,e)}ur(e){return e.metadata.exists?GE(this.serializer,e.document,!1):Qn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Yn(e)}}class Hb{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vw(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=cn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new $b(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Wt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,Ee.A)(function*(){const t=yield function Sb(n,e,t,r){return dw.apply(this,arguments)}(e.localStore,new $b(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield hM(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Vw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Qv{constructor(e){this.key=e}}class Uw{constructor(e){this.key=e}}class Gb{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Wt(),this.mutatedKeys=Wt(),this.tc=PC(e),this.ec=new qf(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new pm,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((T,N)=>{const L=s.get(T),G=Df(this.query,N)?N:null,Q=!!L&&this.mutatedKeys.has(L.key),ce=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let De=!1;L&&G?L.data.isEqual(G.data)?Q!==ce&&(r.track({type:3,doc:G}),De=!0):this.rc(L,G)||(r.track({type:2,doc:G}),De=!0,(v&&this.tc(G,v)>0||D&&this.tc(G,D)<0)&&(m=!0)):!L&&G?(r.track({type:0,doc:G}),De=!0):L&&!G&&(r.track({type:1,doc:L}),De=!0,(v||D)&&(m=!0)),De&&(G?(l=l.add(G),u=ce?u.add(T):u.delete(T)):(l=l.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,T)=>function(N,L){const G=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return G(N)-G(L)}(D.type,T.type)||this.tc(D.doc,T.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,v=m!==this.Xu;return this.Xu=m,0!==u.length||v?{snapshot:new Jd(this.query,e.ec,s,u,e.mutatedKeys,0===m,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new pm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Wt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new Uw(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new Qv(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Wt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Jd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class zb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Kb{constructor(e){this.key=e,this.fc=!1}}class AM{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new mo(m=>jg(m),Gc),this._c=new Map,this.mc=new Set,this.gc=new Pn(Xe.comparator),this.yc=new Map,this.Ic=new _b,this.Tc={},this.Ec=new Map,this.Ac=na.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function SM(n,e){return gm.apply(this,arguments)}function gm(){return gm=(0,Ee.A)(function*(n,e){const t=n_(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield Hf(t.localStore,Di(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield mm(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&jv(t.remoteStore,l)}return s}),gm.apply(this,arguments)}function mm(n,e,t,r,s){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,Ee.A)(function*(n,e,t,r,s){n.Rc=(N,L,G)=>{return(Q=(0,Ee.A)(function*(ce,De,Qe,at){let ut=De.view.sc(Qe);ut.zi&&(ut=yield am(ce.localStore,De.query,!1).then(({documents:Ht})=>De.view.sc(Ht,ut)));const dt=at&&at.targetChanges.get(De.targetId),kt=De.view.applyChanges(ut,ce.isPrimaryClient,dt);return Jc(ce,De.targetId,kt.cc),kt.snapshot}),function(ce,De,Qe,at){return Q.apply(this,arguments)})(n,N,L,G);var Q};const u=yield am(n.localStore,e,!0),l=new Gb(e,u.ir),m=l.sc(u.documents),v=ts.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=l.applyChanges(m,n.isPrimaryClient,v);Jc(n,t,D.cc);const T=new zb(e,t,l);return n.wc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),Xv.apply(this,arguments)}function Bw(n,e){return ym.apply(this,arguments)}function ym(){return ym=(0,Ee.A)(function*(n,e){const t=Ze(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!Gc(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),$v(t.remoteStore,r.targetId),Yf(t,r.targetId)}).catch(Lu))):(Yf(t,r.targetId),yield Gf(t.localStore,r.targetId,!0))}),ym.apply(this,arguments)}function jw(){return jw=(0,Ee.A)(function*(n,e,t){const r=eI(n);try{const s=yield function(u,l){const m=Ze(u),v=On.now(),D=l.reduce((L,G)=>L.add(G.key),Wt());let T,N;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let G=es(),Q=Wt();return m.Zi.getEntries(L,D).next(ce=>{G=ce,G.forEach((De,Qe)=>{Qe.isValidDocument()||(Q=Q.add(De))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,G)).next(ce=>{T=ce;const De=[];for(const Qe of l){const at=Kx(Qe,T.get(Qe.key).overlayedDocument);null!=at&&De.push(new $u(Qe.key,at,TC(at.value.mapValue),Xn.exists(!0)))}return m.mutationQueue.addMutationBatch(L,v,De,l)}).next(ce=>{N=ce;const De=ce.applyToLocalDocumentSet(T,Q);return m.documentOverlayCache.saveOverlays(L,ce.batchId,De)})}).then(()=>({batchId:N.batchId,changes:kC(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let v=u.Tc[u.currentUser.toKey()];v||(v=new Pn(jt)),v=v.insert(l,m),u.Tc[u.currentUser.toKey()]=v}(r,s.batchId,t),yield el(r,s.changes),yield Zd(r.remoteStore)}catch(s){const u=Wf(s,"Failed to persist write");t.reject(u)}}),jw.apply(this,arguments)}function Wb(n,e){return $w.apply(this,arguments)}function $w(){return $w=(0,Ee.A)(function*(n,e){const t=Ze(n);try{const r=yield function lM(n,e){const t=Ze(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const m=[];e.targetChanges.forEach((T,N)=>{const L=s.get(N);if(!L)return;m.push(t.Bs.removeMatchingKeys(u,T.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,T.addedDocuments,N)));let G=L.withSequenceNumber(u.currentSequenceNumber);var Q,ce,De;null!==e.targetMismatches.get(N)?G=G.withResumeToken(Or.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,r)),s=s.insert(N,G),ce=G,De=T,(0===(Q=L).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,G))});let v=es(),D=Wt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(bb(u,l,e.documentUpdates).next(T=>{v=T.nr,D=T.sr})),!r.isEqual(vt.min())){const T=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return se.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,D)).next(()=>v)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?pt(l.fc):s.removedDocuments.size>0&&(pt(l.fc),l.fc=!1))}),yield el(t,r,e)}catch(r){yield Lu(r)}}),$w.apply(this,arguments)}function Hw(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=Ze(u);m.onlineState=l;let v=!1;m.queries.forEach((D,T)=>{for(const N of T.listeners)N.Mu(l)&&(v=!0)}),v&&qv(m)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gw(n,e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,Ee.A)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new Pn(Xe.comparator);l=l.insert(u,Qn.newNoDocument(u,vt.min()));const m=Wt().add(u),v=new _s(vt.min(),new Map,new Pn(jt),l,m);yield Wb(r,v),r.gc=r.gc.remove(u),r.yc.delete(e),Ww(r)}else yield Gf(r.localStore,e,!1).then(()=>Yf(r,e,t)).catch(Lu)}),Yv.apply(this,arguments)}function NM(n,e){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,Ee.A)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const s=yield function cM(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,v,D){const T=v.batch,N=T.keys();let L=se.resolve();return N.forEach(G=>{L=L.next(()=>D.getEntry(m,G)).next(Q=>{const ce=v.docVersions.get(G);pt(null!==ce),Q.version.compareTo(ce)<0&&(T.applyToRemoteDocument(Q,v),Q.isValidDocument()&&(Q.setReadTime(v.commitVersion),D.addEntry(Q)))})}),L.next(()=>l.mutationQueue.removeMutationBatch(m,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Wt();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(m=m.add(l.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);e_(t,r,null),Kw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield el(t,s)}catch(s){yield Lu(s)}}),Zv.apply(this,arguments)}function qb(n,e,t){return zw.apply(this,arguments)}function zw(){return zw=(0,Ee.A)(function*(n,e,t){const r=Ze(n);try{const s=yield function(u,l){const m=Ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let D;return m.mutationQueue.lookupMutationBatch(v,l).next(T=>(pt(null!==T),D=T.keys(),m.mutationQueue.removeMutationBatch(v,T))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,D,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,D)).next(()=>m.localDocuments.getDocuments(v,D))})}(r.localStore,e);e_(r,e,t),Kw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield el(r,s)}catch(s){yield Lu(s)}}),zw.apply(this,arguments)}function Jv(){return Jv=(0,Ee.A)(function*(n,e){const t=Ze(n);Ku(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ze(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=Wf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Jv.apply(this,arguments)}function Kw(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function e_(n,e,t){const r=Ze(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Yf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Bi(n,r)})}function Bi(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&($v(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Ww(n))}function Jc(n,e,t){for(const r of t)r instanceof Qv?(n.Ic.addReference(r.key,e),xM(n,r)):r instanceof Uw?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Bi(n,r.key)):it()}function xM(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.mc.add(r),Ww(n))}function Ww(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Xe(cn.fromString(e)),r=n.Ac.next();n.yc.set(r,new Kb(t)),n.gc=n.gc.insert(t,r),jv(n.remoteStore,new Hu(Di(Ud(t.path)),r,"TargetPurposeLimboResolution",gs.ct))}}function el(n,e,t){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,Ee.A)(function*(n,e,t){const r=Ze(n),s=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,v)=>{l.push(r.Rc(v,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,D?.fromCache?"not-current":"current"),D){s.push(D);const T=uw.Li(v.targetId,D);u.push(T)}}))}),yield Promise.all(l),r.dc.nu(s),yield(m=(0,Ee.A)(function*(v,D){const T=Ze(v);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>se.forEach(D,L=>se.forEach(L.Fi,G=>T.persistence.referenceDelegate.addReference(N,L.targetId,G)).next(()=>se.forEach(L.Bi,G=>T.persistence.referenceDelegate.removeReference(N,L.targetId,G)))))}catch(N){if(!Vu(N))throw N;ke("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const L=N.targetId;if(!N.fromCache){const G=T.Ji.get(L),ce=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);T.Ji=T.Ji.insert(L,ce)}}}),function(v,D){return m.apply(this,arguments)})(r.localStore,u))}),Xb.apply(this,arguments)}function Yb(n,e){return vm.apply(this,arguments)}function vm(){return vm=(0,Ee.A)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield Db(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new Me(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield el(t,r.er)}var s}),vm.apply(this,arguments)}function Xx(n,e){const t=Ze(n),r=t.yc.get(e);if(r&&r.fc)return Wt().add(r.key);{let s=Wt();const u=t._c.get(e);if(!u)return s;for(const l of u){const m=t.wc.get(l);s=s.unionWith(m.view.nc)}return s}}function Yx(n,e){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,Ee.A)(function*(n,e){const t=Ze(n),r=yield am(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&Jc(t,e.targetId,s.cc),s}),Zb.apply(this,arguments)}function _m(n,e){return qw.apply(this,arguments)}function qw(){return qw=(0,Ee.A)(function*(n,e){const t=Ze(n);return Tb(t.localStore,e).then(r=>el(t,r))}),qw.apply(this,arguments)}function Qw(n,e,t,r){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,Ee.A)(function*(n,e,t,r){const s=Ze(n),u=yield function(l,m){const v=Ze(l),D=Ze(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",T=>D.Sn(T,m).next(N=>N?v.localDocuments.getDocuments(T,N):se.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Zd(s.remoteStore):"acknowledged"===t||"rejected"===t?(e_(s,e,r||null),Kw(s,e),m=e,Ze(Ze(s.localStore).mutationQueue).Cn(m)):it(),yield el(s,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Xw.apply(this,arguments)}function Yw(){return Yw=(0,Ee.A)(function*(n,e){const t=Ze(n);if(n_(t),eI(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield eT(t,r.toArray());t.vc=!0,yield Bb(t.remoteStore,!0);for(const u of s)jv(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Yf(t,l),Gf(t.localStore,l,!0))),$v(t.remoteStore,l)}),yield s,yield eT(t,r),function(u){const l=Ze(u);l.yc.forEach((m,v)=>{$v(l.remoteStore,v)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Pn(Xe.comparator)}(t),t.vc=!1,yield Bb(t.remoteStore,!1)}}),Yw.apply(this,arguments)}function eT(n,e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,Ee.A)(function*(n,e,t){const r=Ze(n),s=[],u=[];for(const l of e){let m;const v=r._c.get(l);if(v&&0!==v.length){m=yield Hf(r.localStore,Di(v[0]));for(const D of v){const T=r.wc.get(D),N=yield Yx(r,T);N.snapshot&&u.push(N.snapshot)}}else{const D=yield lw(r.localStore,l);m=yield Hf(r.localStore,D),yield mm(r,t_(D),l,!1,m.resumeToken)}s.push(m)}return r.dc.nu(u),s}),Zw.apply(this,arguments)}function t_(n){return pE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tT(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).$i()}function RM(n,e,t,r){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,Ee.A)(function*(n,e,t,r){const s=Ze(n);if(s.vc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield Tb(s.localStore,OC(u[0])),m=_s.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Or.EMPTY_BYTE_STRING);yield el(s,l,m);break}case"rejected":yield Gf(s.localStore,e,!0),Yf(s,e,r);break;default:it()}}),Zf.apply(this,arguments)}function Jw(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,Ee.A)(function*(n,e,t){const r=n_(n);if(r.vc){for(const s of e){if(r._c.has(s)){ke("SyncEngine","Adding an already active target "+s);continue}const u=yield lw(r.localStore,s),l=yield Hf(r.localStore,u);yield mm(r,t_(u),l.targetId,!1,l.resumeToken),jv(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Gf(r.localStore,s,!1).then(()=>{$v(r.remoteStore,s),Yf(r,s)}).catch(Lu))}}),nT.apply(this,arguments)}function n_(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gw.bind(null,e),e.dc.nu=CM.bind(null,e.eventManager),e.dc.Pc=bM.bind(null,e.eventManager),e}function eI(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qb.bind(null,e),e}class ra{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.A)(function*(){t.serializer=zf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return kv(this.persistence,new Ib,e.initialUser,this.serializer)}createPersistence(e){return new sw(Ov.zs,this.serializer)}createSharedClientState(e){return new gw}terminate(){var e=this;return(0,Ee.A)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class r_ extends ra{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.A)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield eI(r.Vc.syncEngine),yield Zd(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return kv(this.persistence,new Ib,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new pb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new yS(t,this.persistence);return new J0(e.asyncQueue,r)}createPersistence(e){const t=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vi.withCacheSize(this.cacheSizeBytes):Vi.DEFAULT;return new im(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_w(),Bv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gw}}class i_ extends r_{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.A)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof pw&&(r.sharedClientState.syncEngine={jr:Qw.bind(null,s),zr:RM.bind(null,s),Wr:Jw.bind(null,s),$i:tT.bind(null,s),Qr:_m.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ee.A)(function*(l){yield function Jb(n,e){return Yw.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=_w();if(!pw.D(t))throw new Me(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Em{initialize(e,t){var r=this;return(0,Ee.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>Hw(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Yb.bind(null,r.syncEngine),yield Bb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jb}createDatastore(e){const t=zf(e.databaseInfo.databaseId),r=new xb(e.databaseInfo);return new Pb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>Hw(this.syncEngine,m,0),l=mw.D()?new mw:new Xd,new gM(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,v,D){const T=new AM(r,s,u,l,m,v);return D&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.A)(function*(t){const r=Ze(t);ke("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Yd(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function iT(n,e=10240){let t=0;return{read:()=>(0,Ee.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class tI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class PM{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Wr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ee.A)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ee.A)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ee.A)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new TM(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ee.A)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ee.A)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ee.A)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class kM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Ee.A)(function*(u,l){const m=Ze(u),v=Gd(m.serializer)+"/documents",D={documents:l.map(G=>Mf(m.serializer,G))},T=yield m.vo("BatchGetDocuments",v,D,l.length),N=new Map;T.forEach(G=>{const Q=function QC(n,e){return"found"in e?function(t,r){pt(!!r.found);const s=ta(t,r.found.name),u=Yn(r.found.updateTime),l=r.found.createTime?Yn(r.found.createTime):vt.min(),m=new Qr({mapValue:{fields:r.found.fields}});return Qn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){pt(!!r.missing),pt(!!r.readTime);const s=ta(t,r.missing),u=Yn(r.readTime);return Qn.newNoDocument(s,u)}(n,e):it()}(m.serializer,G);N.set(Q.key.toString(),Q)});const L=[];return l.forEach(G=>{const Q=N.get(G.toString());pt(!!Q),L.push(Q)}),L}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.A)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Xe.fromPath(s);e.mutations.push(new SE(u,e.precondition(u)))}),yield(r=(0,Ee.A)(function*(s,u){const l=Ze(s),m=Gd(l.serializer)+"/documents",v={writes:u.map(D=>Nf(l.serializer,D))};yield l.Io("Commit",m,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?Xn.exists(!1):Xn.updateTime(t):Xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Me(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(t)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class FM{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new dm(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ee.A)(function*(){const t=new kM(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!Ng(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!$C(t)}return!1}}class sT{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Kr.UNAUTHENTICATED,this.clientId=ps.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.A)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.A)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Wf(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function wm(n,e){return nI.apply(this,arguments)}function nI(){return nI=(0,Ee.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Ee.A)(function*(u){r.isEqual(u)||(yield Db(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),nI.apply(this,arguments)}function s_(n,e){return o_.apply(this,arguments)}function o_(){return o_=(0,Ee.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rI(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>Kv(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>Kv(e.remoteStore,u)),n._onlineComponents=e}),o_.apply(this,arguments)}function oT(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function rI(n){return a_.apply(this,arguments)}function a_(){return a_=(0,Ee.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!oT(t))throw t;Fi("Error using user provided cache. Falling back to memory cache: "+t),yield wm(n,new ra)}}else ke("FirestoreClient","Using default OfflineComponentProvider"),yield wm(n,new ra);return n._offlineComponents}),a_.apply(this,arguments)}function u_(n){return c_.apply(this,arguments)}function c_(){return c_=(0,Ee.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield s_(n,n._uninitializedComponentsProvider._online)):(ke("FirestoreClient","Using default OnlineComponentProvider"),yield s_(n,new Em))),n._onlineComponents}),c_.apply(this,arguments)}function iI(n){return rI(n).then(e=>e.persistence)}function Im(n){return rI(n).then(e=>e.localStore)}function sI(n){return u_(n).then(e=>e.remoteStore)}function oI(n){return u_(n).then(e=>e.syncEngine)}function Dm(n){return l_.apply(this,arguments)}function l_(){return l_=(0,Ee.A)(function*(n){const e=yield u_(n),t=e.eventManager;return t.onListen=SM.bind(null,e.syncEngine),t.onUnlisten=Bw.bind(null,e.syncEngine),t}),l_.apply(this,arguments)}function LM(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function(s,u,l,m,v){const D=new tI({next:N=>{u.enqueueAndForget(()=>Lw(s,T));const L=N.docs.has(l);!L&&N.fromCache?v.reject(new Me(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&m&&"server"===m.source?v.reject(new Me(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),T=new Xf(Ud(l.path),D,{includeMetadataChanges:!0,Ku:!0});return Qf(s,T)}(yield Dm(n),n.asyncQueue,e,t,r)})),r.promise}function VM(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function(s,u,l,m,v){const D=new tI({next:N=>{u.enqueueAndForget(()=>Lw(s,T)),N.fromCache&&"server"===m.source?v.reject(new Me(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),T=new Xf(l,D,{includeMetadataChanges:!0,Ku:!0});return Qf(s,T)}(yield Dm(n),n.asyncQueue,e,t,r)})),r.promise}function d_(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const aI=new Map;function uI(n,e,t){if(!t)throw new Me(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Cm(n,e,t,r){if(!0===e&&!0===r)throw new Me(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cT(n){if(!Xe.isDocumentKey(n))throw new Me(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UM(n){if(Xe.isDocumentKey(n))throw new Me(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cI(n);throw new Me(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lI(n,e){if(e<=0)throw new Me(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class lT{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=d_(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Me(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Me(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Me(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lT(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cC;switch(t.type){case"firstParty":return new dS(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aI.get(e);t&&(ke("ComponentProvider","Removing Datastore"),aI.delete(e),t.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class Ci{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class ws extends Ci{constructor(e,t,r){super(e,t,Ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new Xe(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function Tm(n,e,...t){if(n=(0,hn.Ku)(n),uI("collection","path",e),n instanceof bm){const r=cn.fromString(e,...t);return UM(r),new ws(n,null,r)}{if(!(n instanceof Zn||n instanceof ws))throw new Me(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return UM(r),new ws(n.firestore,null,r)}}function h_(n,e,...t){if(n=(0,hn.Ku)(n),1===arguments.length&&(e=ps.A()),uI("doc","path",e),n instanceof bm){const r=cn.fromString(e,...t);return cT(r),new Zn(n,null,new Xe(r))}{if(!(n instanceof Zn||n instanceof ws))throw new Me(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return cT(r),new Zn(n.firestore,n instanceof ws?n.converter:null,new Xe(r))}}function hT(n,e){return n=(0,hn.Ku)(n),e=(0,hn.Ku)(e),(n instanceof Zn||n instanceof ws)&&(e instanceof Zn||e instanceof ws)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dI(n,e){return n=(0,hn.Ku)(n),e=(0,hn.Ku)(e),n instanceof Ci&&e instanceof Ci&&n.firestore===e.firestore&&Gc(n._query,e._query)&&n.converter===e.converter}class jM{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new dm(this,"async_queue_retry"),this.Xc=()=>{const t=Bv();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Bv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Bv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Wr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ee.A)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Vu(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,nr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=kw.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&it()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ee.A)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function hI(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class fI{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jn extends bm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new jM,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||fT(this),this._firestoreClient.terminate()}}function Dr(n){return n._firestoreClient||fT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fT(n){var e,t,r;const s=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Pg(n._databaseId,m,n._persistenceKey,(D=s).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,d_(D.experimentalLongPollingOptions),D.useFetchStreams));var m,D;n._firestoreClient=new sT(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function pT(n,e,t){const r=new Wr;return n.asyncQueue.enqueue((0,Ee.A)(function*(){try{yield wm(n,t),yield s_(n,e),r.resolve()}catch(s){const u=s;if(!oT(u))throw u;Fi("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function gI(n){if(n._initialized||n._terminated)throw new Me(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ia(Or.fromBase64String(e))}catch(t){throw new Me(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ia(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tl{constructor(e){this._methodName=e}}class p_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const mI=/^__.*__$/;class nl{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $u(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tf(e,this.data,t,this.fieldTransforms)}}class yI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $u(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function g_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class Jf{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Wu(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(g_(this.ca)&&mI.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class qM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zf(e)}ya(e,t,r,s=!1){return new Jf({ca:e,methodName:t,ga:r,path:rr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ep(n){const e=n._freezeSettings(),t=zf(n._databaseId);return new qM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Am(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);v_("Data must be an object, but it was:",l,r);const m=y_(r,l);let v,D;if(u.merge)v=new ms(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const T=[];for(const N of u.mergeFields){const L=Mm(e,N,t);if(!l.contains(L))throw new Me(ae.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);xm(T,L)||T.push(L)}v=new ms(T),D=l.fieldTransforms.filter(N=>v.covers(N.field))}else v=null,D=l.fieldTransforms;return new nl(new Qr(m),v,D)}class Sm extends tl{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sm}}function yT(n,e,t){return new Jf({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vI extends tl{_toFieldTransform(e){return new Wc(e.path,new Bd)}isEqual(e){return e instanceof vI}}class QM extends tl{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=yT(this,e,!0),r=this.pa.map(u=>tp(u,t)),s=new zc(r);return new Wc(e.path,s)}isEqual(e){return this===e}}class vT extends tl{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=yT(this,e,!0),r=this.pa.map(u=>tp(u,t)),s=new Kc(r);return new Wc(e.path,s)}isEqual(e){return this===e}}class c1 extends tl{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new jd(e.serializer,VC(e.serializer,this.Ia));return new Wc(e.path,t)}isEqual(e){return this===e}}function m_(n,e,t,r){const s=n.ya(1,e,t);v_("Data must be an object, but it was:",s,r);const u=[],l=Qr.empty();Bc(r,(v,D)=>{const T=Nm(e,v,t);D=(0,hn.Ku)(D);const N=s.da(T);if(D instanceof Sm)u.push(T);else{const L=tp(D,N);null!=L&&(u.push(T),l.set(T,L))}});const m=new ms(u);return new yI(l,m,s.fieldTransforms)}function _I(n,e,t,r,s,u){const l=n.ya(1,e,t),m=[Mm(e,r,t)],v=[s];if(u.length%2!=0)throw new Me(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(Mm(e,u[L])),v.push(u[L+1]);const D=[],T=Qr.empty();for(let L=m.length-1;L>=0;--L)if(!xm(D,m[L])){const G=m[L];let Q=v[L];Q=(0,hn.Ku)(Q);const ce=l.da(G);if(Q instanceof Sm)D.push(G);else{const De=tp(Q,ce);null!=De&&(D.push(G),T.set(G,De))}}const N=new ms(D);return new yI(T,N,l.fieldTransforms)}function EI(n,e,t,r=!1){return tp(t,n.ya(r?4:3,e))}function tp(n,e){if(wI(n=(0,hn.Ku)(n)))return v_("Unsupported field value:",e,n),y_(n,e);if(n instanceof tl)return function(t,r){if(!g_(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=tp(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,hn.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return VC(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=On.fromDate(t);return{timestampValue:Sf(r.serializer,s)}}if(t instanceof On){const s=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sf(r.serializer,s)}}if(t instanceof p_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ia)return{bytesValue:UE(r.serializer,t._byteString)};if(t instanceof Zn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:BE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${cI(t)}`)}(n,e)}function y_(n,e){const t={};return IC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bc(n,(r,s)=>{const u=tp(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function wI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof p_||n instanceof ia||n instanceof Zn||n instanceof tl)}function v_(n,e,t){if(!wI(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cI(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Mm(n,e,t){if((e=(0,hn.Ku)(e))instanceof Qa)return e._internalPath;if("string"==typeof e)return Nm(n,e);throw Wu("Field path arguments must be of type string or ",n,!1,void 0,t)}const _T=new RegExp("[~\\*/\\[\\]]");function Nm(n,e,t){if(e.search(_T)>=0)throw Wu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qa(...e.split("."))._internalPath}catch{throw Wu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wu(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${s}`),v+=")"),new Me(ae.INVALID_ARGUMENT,m+n+v)}function xm(n,e){return n.some(t=>t.isEqual(e))}class np{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ET(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(__("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ET extends np{data(){return super.data()}}function __(n,e){return"string"==typeof e?Nm(n,e):e instanceof Qa?e._internalPath:e._delegate._internalPath}function wT(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IT{}class rp extends IT{}function rl(n,e,...t){let r=[];e instanceof IT&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof Om).length,l=s.filter(m=>m instanceof Rm).length;if(u>1||u>0&&l>0)throw new Me(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Rm extends rp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Rm(e,t,r)}_apply(e){const t=this._parse(e);return bI(e._query,t),new Ci(e.firestore,e.converter,Bg(e._query,t))}_parse(e){const t=ep(e.firestore);return function(s,u,l,m,v,D,T){let N;if(v.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Me(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){il(T,D);const L=[];for(const G of T)L.push(CI(m,s,G));N={arrayValue:{values:L}}}else N=CI(m,s,T)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||il(T,D),N=EI(l,"where",T,"in"===D||"not-in"===D);return rn.create(v,D,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Om extends IT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Om(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)bI(u,m),u=Bg(u,m)}(e._query,t),new Ci(e.firestore,e.converter,Bg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class II extends rp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new II(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Me(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Fg(s,u);return function(m,v){if(null===mE(m)){const D=mv(m);null!==D&&I_(0,D,v.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ci(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ju(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class E_ extends rp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new E_(e,t,r)}_apply(e){return new Ci(e.firestore,e.converter,yv(e._query,this._limit,this._limitType))}}class DI extends rp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new DI(e,t,r)}_apply(e){const t=DT(e,this.type,this._docOrFields,this._inclusive);return new Ci(e.firestore,e.converter,(s=t,new ju((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class Pm extends rp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Pm(e,t,r)}_apply(e){const t=DT(e,this.type,this._docOrFields,this._inclusive);return new Ci(e.firestore,e.converter,(s=t,new ju((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function DT(n,e,t,r){if(t[0]=(0,hn.Ku)(t[0]),t[0]instanceof np)return function(s,u,l,m,v){if(!m)throw new Me(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const T of Hc(s))if(T.field.isKeyField())D.push(go(u,m.key));else{const N=m.data.field(T.field);if(yf(N))throw new Me(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const L=T.field.canonicalString();throw new Me(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}D.push(N)}return new Fd(D,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=ep(n.firestore);return function(u,l,m,v,D,T){const N=u.explicitOrderBy;if(D.length>N.length)throw new Me(ae.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<D.length;G++){const Q=D[G];if(N[G].field.isKeyField()){if("string"!=typeof Q)throw new Me(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Q}`);if(!yE(u)&&-1!==Q.indexOf("/"))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Q}' contains a slash.`);const ce=u.path.child(cn.fromString(Q));if(!Xe.isDocumentKey(ce))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const De=new Xe(ce);L.push(go(l,De))}else{const ce=EI(m,v,Q);L.push(ce)}}return new Fd(L,T)}(n._query,n.firestore._databaseId,s,e,t,r)}}function CI(n,e,t){if("string"==typeof(t=(0,hn.Ku)(t))){if(""===t)throw new Me(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yE(e)&&-1!==t.indexOf("/"))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!Xe.isDocumentKey(r))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return go(n,new Xe(r))}if(t instanceof Zn)return go(n,t._key);throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cI(t)}.`)}function il(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(n,e){if(e.isInequality()){const r=mv(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=mE(n);null!==u&&I_(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Me(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function I_(n,e,t){if(!t.isEqual(e))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class TI{convertValue(e,t="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bc(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new p_(dr(e.latitude),dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ys(e));default:return null}}convertTimestamp(e){const t=Yo(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);pt(tb(r));const s=new ir(r.get(1),r.get(3)),u=new Xe(r.popFirst(5));return s.isEqual(t)||nr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ip(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class AI extends TI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class eh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qu extends np{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(__("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class km extends qu{data(e={}){return super.data(e)}}class sl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new eh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new km(this._firestore,this._userDataWriter,r.key,r,new eh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new km(r._firestore,r._userDataWriter,l.doc.key,l.doc,new eh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new km(r._firestore,r._userDataWriter,l.doc.key,l.doc,new eh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,D=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:CT(l.type),doc:m,oldIndex:v,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function CT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function MI(n,e){return n instanceof qu&&e instanceof qu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof sl&&e instanceof sl&&n._firestore===e._firestore&&dI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ol extends TI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function C_(n,e,t){n=sn(n,Zn);const r=sn(n.firestore,jn),s=ip(n.converter,e,t);return sp(r,[Am(ep(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Xn.none())])}function ST(n,e,t,...r){n=sn(n,Zn);const s=sn(n.firestore,jn),u=ep(s);let l;return l="string"==typeof(e=(0,hn.Ku)(e))||e instanceof Qa?_I(u,"updateDoc",n._key,e,t,r):m_(u,"updateDoc",n._key,e),sp(s,[l.toMutation(n._key,Xn.exists(!0))])}function nN(n,...e){var t,r,s;n=(0,hn.Ku)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||hI(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(hI(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(s=N.complete)||void 0===s?void 0:s.bind(N)}let v,D,T;if(n instanceof Zn)D=sn(n.firestore,jn),T=Ud(n._key.path),v={next:N=>{e[l]&&e[l](xI(D,n,N))},error:e[l+1],complete:e[l+2]};else{const N=sn(n,Ci);D=sn(N.firestore,jn),T=N._query;const L=new ol(D);v={next:G=>{e[l]&&e[l](new sl(D,L,N,G))},error:e[l+1],complete:e[l+2]},wT(n._query)}return function(N,L,G,Q){const ce=new tI(Q),De=new Xf(L,ce,G);return N.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return Qf(yield Dm(N),De)})),()=>{ce.Dc(),N.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return Lw(yield Dm(N),De)}))}}(Dr(D),T,m,v)}function sp(n,e){return function(t,r){const s=new Wr;return t.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function MM(n,e,t){return jw.apply(this,arguments)}(yield oI(t),r,s)})),s.promise}(Dr(n),e)}function xI(n,e,t){const r=t.docs.get(e._key),s=new ol(n);return new qu(n,s,e._key,r,new eh(t.hasPendingWrites,t.fromCache),e.converter)}const aN={maxAttempts:5};class RI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ep(e)}set(e,t,r){this._verifyNotCommitted();const s=Qu(e,this._firestore),u=ip(s.converter,t,r),l=Am(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Xn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Qu(e,this._firestore);let l;return l="string"==typeof(t=(0,hn.Ku)(t))||t instanceof Qa?_I(this._dataReader,"WriteBatch.update",u._key,t,r,s):m_(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qu(e,this._firestore);return this._mutations=this._mutations.concat(new Hd(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qu(n,e){if((n=(0,hn.Ku)(n)).firestore!==e)throw new Me(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class w1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ep(e)}get(e){const t=Qu(e,this._firestore),r=new AI(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return it();const u=s[0];if(u.isFoundDocument())return new np(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new np(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const s=Qu(e,this._firestore),u=ip(s.converter,t,r),l=Am(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=Qu(e,this._firestore);let l;return l="string"==typeof(t=(0,hn.Ku)(t))||t instanceof Qa?_I(this._dataReader,"Transaction.update",u._key,t,r,s):m_(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Qu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qu(e,this._firestore),r=new ol(this._firestore);return super.get(e).then(s=>new qu(this._firestore,r,t._key,s._document,new eh(!1,!1),t.converter))}}function kT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function FT(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function hN(){if(!function DC(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Qo=yd.SDK_VERSION,(0,yd._registerComponent)(new Z_.uA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new jn(new cS(t.getProvider("auth-internal")),new lC(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Me(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ir(m.options.projectId,v)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,yd.registerVersion)(z0,"3.13.0",n),(0,yd.registerVersion)(z0,"3.13.0","esm2017")}();class T_{constructor(e){this._delegate=e}static fromBase64String(e){return hN(),new T_(ia.fromBase64String(e))}static fromUint8Array(e){return FT(),new T_(ia.fromUint8Array(e))}toBase64(){return hN(),this._delegate.toBase64()}toUint8Array(){return FT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LT(n){return function S1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class M1{enableIndexedDbPersistence(e,t){return function HM(n,e){gI(n=sn(n,jn));const t=Dr(n);if(t._uninitializedComponentsProvider)throw new Me(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Fi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new Em;return pT(t,s,new r_(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function GM(n){gI(n=sn(n,jn));const e=Dr(n);if(e._uninitializedComponentsProvider)throw new Me(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Fi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Em;return pT(e,r,new i_(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function zM(n){if(n._initialized&&!n._terminated)throw new Me(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.A)(function*(){try{yield(t=(0,Ee.A)(function*(r){if(!fo.D())return Promise.resolve();const s=r+"main";yield fo.delete(s)}),function(r){return t.apply(this,arguments)})(Pv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class VT{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ir||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function dT(n,e,t,r={}){var s;const u=(n=sn(n,bm))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,v;if("string"==typeof r.mockUserToken)m=r.mockUserToken,v=Kr.MOCK_USER;else{m=(0,hn.Fy)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new Me(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Kr(D)}n._authCredentials=new uS(new uC(m,v))}}(this._delegate,e,t,r)}enableNetwork(){return function gT(n){return function Zx(n){return n.asyncQueue.enqueue((0,Ee.A)(function*(){const e=yield iI(n),t=yield sI(n);return e.setNetworkEnabled(!0),function(r){const s=Ze(r);return s.vu.delete(0),Kf(s)}(t)}))}(Dr(n=sn(n,jn)))}(this._delegate)}disableNetwork(){return function pI(n){return function Jx(n){return n.asyncQueue.enqueue((0,Ee.A)(function*(){const e=yield iI(n),t=yield sI(n);return e.setNetworkEnabled(!1),(r=(0,Ee.A)(function*(s){const u=Ze(s);u.vu.add(0),yield Yd(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Dr(n=sn(n,jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Cm("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function KM(n){return function(e){const t=new Wr;return e.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function Qb(n,e){return Jv.apply(this,arguments)}(yield oI(e),t)})),t.promise}(Dr(n=sn(n,jn)))}(this._delegate)}onSnapshotsInSync(e){return function rN(n,e){return function n1(n,e){const t=new tI(e);return n.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return r=yield Dm(n),s=t,Ze(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return r=yield Dm(n),s=t,void Ze(r).ku.delete(s);var r,s}))}}(Dr(n=sn(n,jn)),hI(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new W(this,Tm(this._delegate,e))}catch(t){throw p(t,"collection()","Firestore.collection()")}}doc(e){try{return new d(this,h_(this._delegate,e))}catch(t){throw p(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new x(this,function BM(n,e){if(n=sn(n,bm),uI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ci(n,null,(t=e,new ju(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw p(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uN(n,e,t){n=sn(n,jn);const r=Object.assign(Object.assign({},aN),t);return function(s){if(s.maxAttempts<1)throw new Me(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Wr;return s.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){const v=yield function aT(n){return u_(n).then(e=>e.datastore)}(s);new FM(s.asyncQueue,v,l,u,m).run()})),m.promise}(Dr(n),s=>e(new w1(n,s)),r)}(this._delegate,t=>e(new o(this,t)))}batch(){return Dr(this._delegate),new a(new RI(this._delegate,e=>sp(this._delegate,e)))}loadBundle(e){return function WM(n,e){const t=Dr(n=sn(n,jn)),r=new fI;return function r1(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?BS().encode(u):u,v=function(v,D){if(v instanceof Uint8Array)return iT(v,D);if(v instanceof ArrayBuffer)return iT(new Uint8Array(v),D);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new PM(v,l);var v}(t,zf(e));n.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){!function rT(n,e,t){const r=Ze(n);var s;(s=(0,Ee.A)(function*(u,l,m){try{const v=yield l.getMetadata();if(yield function(L,G){const Q=Ze(L),ce=Yn(G.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",De=>Q.qs.getBundleMetadata(De,G.id)).then(De=>!!De&&De.createTime.compareTo(ce)>=0)}(u.localStore,v))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(Vw(v));const D=new Hb(v,u.localStore,l.serializer);let T=yield l.bc();for(;T;){const L=yield D.zu(T);L&&m._updateProgress(L),T=yield l.bc()}const N=yield D.complete();return yield el(u,N.Ju,void 0),yield function(L,G){const Q=Ze(L);return Q.persistence.runTransaction("Save bundle","readwrite",ce=>Q.qs.saveBundleMetadata(ce,G))}(u.localStore,v),m._completeWith(N.progress),Promise.resolve(N.Hu)}catch(v){return Fi("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var L}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield oI(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function mT(n,e){return function i1(n,e){return n.asyncQueue.enqueue((0,Ee.A)(function*(){return function(t,r){const s=Ze(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield Im(n),e)}))}(Dr(n=sn(n,jn)),e).then(t=>t?new Ci(n,null,t.query):null)}(this._delegate,e).then(t=>t?new x(this,t):null)}}class OI extends TI{constructor(e){super(),this.firestore=e}convertBytes(e){return new T_(new ia(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return d.forKey(t,this.firestore,null)}}class o{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new OI(e)}get(e){const t=me(e);return this._delegate.get(t).then(r=>new C(this._firestore,new qu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=me(e);return r?(kT("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=me(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=me(e);return this._delegate.delete(t),this}}class a{constructor(e){this._delegate=e}set(e,t,r){const s=me(e);return r?(kT("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=me(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=me(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class c{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new km(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new S(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=c.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new c(e,new OI(e),t),s.set(t,u)),u}}c.INSTANCES=new WeakMap;class d{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new d(t,new Zn(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new d(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new W(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new W(this.firestore,Tm(this._delegate,e))}catch(t){throw p(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,hn.Ku)(e))instanceof Zn&&hT(this._delegate,e)}set(e,t){t=kT("DocumentReference.set",t);try{return t?C_(this._delegate,e,t):C_(this._delegate,e)}catch(r){throw p(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ST(this._delegate,e):ST(this._delegate,e,t,...r)}catch(s){throw p(s,"updateDoc()","DocumentReference.update()")}}delete(){return function tN(n){return sp(sn(n.firestore,jn),[new Hd(n._key,Xn.none())])}(this._delegate)}onSnapshot(...e){const t=y(e),r=w(e,s=>new C(this.firestore,new qu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return nN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function eN(n){n=sn(n,Zn);const e=sn(n.firestore,jn),t=Dr(e),r=new ol(e);return function e1(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return(r=(0,Ee.A)(function*(s,u,l){try{const m=yield function(v,D){const T=Ze(v);return T.persistence.runTransaction("read document","readonly",N=>T.localDocuments.getDocument(N,D))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Me(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Wf(m,`Failed to get document '${u} from cache`);l.reject(v)}}),function(s,u,l){return r.apply(this,arguments)})(yield Im(n),e,t);var r})),t.promise}(t,n._key).then(s=>new qu(e,r,n._key,s,new eh(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function TT(n){n=sn(n,Zn);const e=sn(n.firestore,jn);return LM(Dr(e),n._key,{source:"server"}).then(t=>xI(e,n,t))}(this._delegate):function bT(n){n=sn(n,Zn);const e=sn(n.firestore,jn);return LM(Dr(e),n._key).then(t=>xI(e,n,t))}(this._delegate),t.then(r=>new C(this.firestore,new qu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new d(this.firestore,this._delegate.withConverter(e?c.getInstance(this.firestore,e):null))}}function p(n,e,t){return n.message=n.message.replace(e,t),n}function y(n){for(const e of n)if("object"==typeof e&&!LT(e))return e;return{}}function w(n,e){var t,r;let s;return s=LT(n[0])?n[0]:LT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class C{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new d(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return MI(this._delegate,e._delegate)}}class S extends C{data(e){const t=this._delegate.data(e);return function W0(n,e){n||it()}(void 0!==t),t}}class x{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OI(e)}where(e,t,r){try{return new x(this.firestore,rl(this._delegate,function l1(n,e,t){const r=e,s=__("where",n);return Rm._create(s,r,t)}(e,t,r)))}catch(s){throw p(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new x(this.firestore,rl(this._delegate,function YM(n,e="asc"){const t=e,r=__("orderBy",n);return II._create(r,t)}(e,t)))}catch(r){throw p(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new x(this.firestore,rl(this._delegate,function d1(n){return lI("limit",n),E_._create("limit",n,"F")}(e)))}catch(t){throw p(t,"limit()","Query.limit()")}}limitToLast(e){try{return new x(this.firestore,rl(this._delegate,function h1(n){return lI("limitToLast",n),E_._create("limitToLast",n,"L")}(e)))}catch(t){throw p(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new x(this.firestore,rl(this._delegate,function f1(...n){return DI._create("startAt",n,!0)}(...e)))}catch(t){throw p(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new x(this.firestore,rl(this._delegate,function p1(...n){return DI._create("startAfter",n,!1)}(...e)))}catch(t){throw p(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new x(this.firestore,rl(this._delegate,function w_(...n){return Pm._create("endBefore",n,!1)}(...e)))}catch(t){throw p(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new x(this.firestore,rl(this._delegate,function ZM(...n){return Pm._create("endAt",n,!0)}(...e)))}catch(t){throw p(t,"endAt()","Query.endAt()")}}isEqual(e){return dI(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function m1(n){n=sn(n,Ci);const e=sn(n.firestore,jn),t=Dr(e),r=new ol(e);return function t1(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return(r=(0,Ee.A)(function*(s,u,l){try{const m=yield am(s,u,!0),v=new Gb(u,m.ir),D=v.sc(m.documents),T=v.applyChanges(D,!1);l.resolve(T.snapshot)}catch(m){const v=Wf(m,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(s,u,l){return r.apply(this,arguments)})(yield Im(n),e,t);var r})),t.promise}(t,n._query).then(s=>new sl(e,r,n,s))}(this._delegate):"server"===e?.source?function AT(n){n=sn(n,Ci);const e=sn(n.firestore,jn),t=Dr(e),r=new ol(e);return VM(t,n._query,{source:"server"}).then(s=>new sl(e,r,n,s))}(this._delegate):function NI(n){n=sn(n,Ci);const e=sn(n.firestore,jn),t=Dr(e),r=new ol(e);return wT(n._query),VM(t,n._query).then(s=>new sl(e,r,n,s))}(this._delegate),t.then(r=>new z(this.firestore,new sl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=y(e),r=w(e,s=>new z(this.firestore,new sl(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return nN(this._delegate,t,r)}withConverter(e){return new x(this.firestore,this._delegate.withConverter(e?c.getInstance(this.firestore,e):null))}}class F{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new S(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class z{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new x(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new S(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new F(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new S(this._firestore,r))})}isEqual(e){return MI(this._delegate,e._delegate)}}class W extends x{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new d(this.firestore,e):null}doc(e){try{return new d(this.firestore,void 0===e?h_(this._delegate):h_(this._delegate,e))}catch(t){throw p(t,"doc()","CollectionReference.doc()")}}add(e){return function y1(n,e){const t=sn(n.firestore,jn),r=h_(n),s=ip(n.converter,e);return sp(t,[Am(ep(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new d(this.firestore,t))}isEqual(e){return hT(this._delegate,e._delegate)}withConverter(e){return new W(this.firestore,this._delegate.withConverter(e?c.getInstance(this.firestore,e):null))}}function me(n){return sn(n,Zn)}class Le{constructor(...e){this._delegate=new Qa(...e)}static documentId(){return new Le(rr.keyField().canonicalString())}isEqual(e){return(e=(0,hn.Ku)(e))instanceof Qa&&this._delegate._internalPath.isEqual(e._internalPath)}}class We{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cN(){return new vI("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new We(e)}static delete(){const e=function I1(){return new Sm("deleteField")}();return e._methodName="FieldValue.delete",new We(e)}static arrayUnion(...e){const t=function D1(...n){return new QM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new We(t)}static arrayRemove(...e){const t=function C1(...n){return new vT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new We(t)}static increment(e){const t=function lN(n){return new c1("increment",n)}(e);return t._methodName="FieldValue.increment",new We(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Dt={Firestore:VT,GeoPoint:p_,Timestamp:On,Blob:T_,Transaction:o,WriteBatch:a,DocumentReference:d,DocumentSnapshot:C,Query:x,QueryDocumentSnapshot:S,QuerySnapshot:z,CollectionReference:W,FieldPath:Le,FieldValue:We,setLogLevel:function i(n){!function rv(n){Fu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Vt(n){(function Ne(n,e){n.INTERNAL.registerComponent(new Z_.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},Dt)))})(n,(e,t)=>new VT(e,t,new M1)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(pD.A);var bt=O(1413),In=O(7786),bi=O(941),$n=O(5558),op=O(6129);class PI extends bt.B{constructor(e=1/0,t=1/0,r=op.U){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)m=v;m&&r.splice(0,m+1)}}}var fN=O(7647);function UT(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,fN.u)({connector:()=>new PI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}const BT=(0,O(1853).L)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ap=O(983);function A_(n){return n<=0?()=>ap.w:(0,Pi.N)((e,t)=>{let r=0;e.subscribe((0,Vn._)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function jT(n){return(0,Pi.N)((e,t)=>{let r=!1;e.subscribe((0,Vn._)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function N1(n=EP){return(0,Pi.N)((e,t)=>{let r=!1;e.subscribe((0,Vn._)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function EP(){return new BT}var $T=O(3669);function up(n,e){const t=arguments.length>=2;return r=>r.pipe(n?co((s,u)=>n(s,u,r)):$T.D,A_(1),t?jT(e):N1(()=>new BT))}var kI=O(8071);function x1(n,e){return(0,kI.T)(e)?(0,$n.n)(()=>n,e):(0,$n.n)(()=>n)}var pN=O(6745);O(2214);const mN=new Map,O1={activated:!1,tokenObservers:[]},bP={initialized:!1,enabled:!1};function kr(n){return mN.get(n)||Object.assign({},O1)}function GT(){return bP}const yN="https://content-firebaseappcheck.googleapis.com/v1",MP="exchangeDebugToken",P1={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class xP{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.A)(function*(){t.stop();try{t.pending=new hn.cY,yield function RP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new hn.cY,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ns=new hn.FA("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vN(n){if(!kr(n).activated)throw ns.create("use-before-activation",{appName:n.name})}function WT(n,e){return EN.apply(this,arguments)}function EN(){return EN=(0,Ee.A)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const N=yield s.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw ns.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw ns.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw ns.create("fetch-parse-error",{originalErrorMessage:N?.message})}const v=m.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(v[1]),T=Date.now();return{token:m.token,expireTimeMillis:T+D,issuedAtTimeMillis:T}}),EN.apply(this,arguments)}function k1(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${yN}/projects/${t}/apps/${r}:${MP}?key=${s}`,body:{debug_token:e}}}const FP="firebase-app-check-database",LP=1,FI="firebase-app-check-store";let qT=null;function wN(){return wN=(0,Ee.A)(function*(n,e){const r=(yield function L1(){return qT||(qT=new Promise((n,e)=>{try{const t=indexedDB.open(FP,LP);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(ns.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(FI,{keyPath:"compositeKey"})}}catch(t){e(ns.create("storage-open",{originalErrorMessage:t?.message}))}}),qT)}()).transaction(FI,"readwrite"),u=r.objectStore(FI).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var D;m(ns.create("storage-set",{originalErrorMessage:null===(D=v.target.error)||void 0===D?void 0:D.message}))}})}),wN.apply(this,arguments)}const LI=new $o.Vy("@firebase/app-check");function CN(n,e){return(0,hn.zW)()?function UP(n,e){return function V1(n,e){return wN.apply(this,arguments)}(function B1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{LI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function TN(){return GT().enabled}function AN(){return SN.apply(this,arguments)}function SN(){return SN=(0,Ee.A)(function*(){const n=GT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),SN.apply(this,arguments)}const zP={error:"UNKNOWN_ERROR"};function KP(n){return hn.K3.encodeString(JSON.stringify(n),!1)}function QT(n){return MN.apply(this,arguments)}function MN(){return MN=(0,Ee.A)(function*(n,e=!1){const t=n.app;vN(t);const r=kr(t);let u,s=r.token;if(s&&!S_(s)&&(r.token=void 0,s=void 0),!s){const v=yield r.cachedTokenPromise;v&&(S_(v)?s=v:yield CN(t,void 0))}if(!e&&s&&S_(s))return{token:s.token};let m,l=!1;if(TN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=WT(k1(t,yield AN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const v=yield r.exchangeTokenPromise;return yield CN(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield kr(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?LI.warn(v.message):LI.error(v),u=v}return s?u?m=S_(s)?{token:s.token,internalError:u}:G1(u):(m={token:s.token},r.token=s,yield CN(t,s)):m=G1(u),l&&function H1(n,e){const t=kr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),MN.apply(this,arguments)}function NN(){return NN=(0,Ee.A)(function*(n){const e=n.app;vN(e);const{provider:t}=kr(e);if(TN()){const r=yield AN(),{token:s}=yield WT(k1(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}}),NN.apply(this,arguments)}function RN(n,e){const t=kr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $1(n){const{app:e}=n,t=kr(e);let r=t.tokenRefresher;r||(r=function WP(n){const{app:e}=n;return new xP((0,Ee.A)(function*(){let r;if(r=kr(e).token?yield QT(n,!0):yield QT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},P1.RETRIAL_MIN_WAIT,P1.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function S_(n){return n.expireTimeMillis-Date.now()>0}function G1(n){return{token:KP(zP),error:n}}class qP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=kr(this.app);for(const t of e)RN(this.app,t.next);return Promise.resolve()}}const Z1="app-check-internal";!function uk(){(0,yd._registerComponent)(new Z_.uA("app-check",n=>function QP(n,e){return new qP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Z1).initialize()})),(0,yd._registerComponent)(new Z_.uA(Z1,n=>function XP(n){return{getToken:e=>QT(n,e),getLimitedUseToken:()=>function j1(n){return NN.apply(this,arguments)}(n),addTokenListener:e=>function xN(n,e,t,r){const{app:s}=n,u=kr(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&S_(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),$1(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>$1(n))}(n,"INTERNAL",e),removeTokenListener:e=>RN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,yd.registerVersion)("@firebase/app-check","0.8.0")}();class FN{constructor(){return(0,$r.CA)("app-check")}}typeof window<"u"&&window;var eR=O(7935);const tR=new h.nKC("angularfire2.auth.use-emulator"),nR=new h.nKC("angularfire2.auth.settings"),rR=new h.nKC("angularfire2.auth.tenant-id"),iR=new h.nKC("angularfire2.auth.langugage-code"),sR=new h.nKC("angularfire2.auth.use-device-language"),oR=new h.nKC("angularfire.auth.persistence"),aR=(n,e,t,r,s,u,l,m)=>(0,hs.BM)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),l)for(const[D,T]of Object.entries(l))v.settings[D]=T;return m&&v.setPersistence(m),v},[t,r,s,u,l,m]);let uR=(()=>{class n{constructor(t,r,s,u,l,m,v,D,T,N,L,G){const Q=new bt.B,ce=(0,Tt.of)(void 0).pipe((0,bi.Q)(l.outsideAngular),(0,$n.n)(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,6922)))),(0,et.T)(()=>(0,hs.iB)(t,u,r)),(0,et.T)(De=>aR(De,u,m,D,T,N,v,L)),UT({bufferSize:1,refCount:!1}));if(su(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Tt.of)(null);else{ce.pipe(up()).subscribe();const Qe=ce.pipe((0,$n.n)(dt=>dt.getRedirectResult().then(kt=>kt,()=>null)),$r.U0,UT({bufferSize:1,refCount:!1})),at=ce.pipe((0,$n.n)(dt=>new qi.c(kt=>({unsubscribe:u.runOutsideAngular(()=>dt.onAuthStateChanged(Ht=>kt.next(Ht),Ht=>kt.error(Ht),()=>kt.complete()))})))),ut=ce.pipe((0,$n.n)(dt=>new qi.c(kt=>({unsubscribe:u.runOutsideAngular(()=>dt.onIdTokenChanged(Ht=>kt.next(Ht),Ht=>kt.error(Ht),()=>kt.complete()))}))));this.authState=Qe.pipe(x1(at),(0,pN._)(l.outsideAngular),(0,bi.Q)(l.insideAngular)),this.user=Qe.pipe(x1(ut),(0,pN._)(l.outsideAngular),(0,bi.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,$n.n)(dt=>dt?(0,pn.H)(dt.getIdToken()):(0,Tt.of)(null))),this.idTokenResult=this.user.pipe((0,$n.n)(dt=>dt?(0,pn.H)(dt.getIdTokenResult()):(0,Tt.of)(null))),this.credential=(0,In.h)(Qe,Q,this.authState.pipe(co(dt=>!dt))).pipe((0,et.T)(dt=>dt?.user?dt:null),(0,pN._)(l.outsideAngular),(0,bi.Q)(l.insideAngular))}return(0,hs.Gt)(this,ce,u,{spy:{apply:(De,Qe,at)=>{(De.startsWith("signIn")||De.startsWith("createUser"))&&at.then(ut=>Q.next(ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.KVO(hs.rx),h.KVO(hs.uP,8),h.KVO(h.Agw),h.KVO(h.SKi),h.KVO($r.u0),h.KVO(tR,8),h.KVO(nR,8),h.KVO(rR,8),h.KVO(iR,8),h.KVO(sR,8),h.KVO(oR,8),h.KVO(FN,8))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function cR(n,e){return function pk(n,e=ig.E){return new qi.c(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function VN(n,e){return cR(n,e).pipe((0,et.T)(t=>({payload:t,type:"query"})))}function YT(n,e){return VN(n,e).pipe(zh(void 0),sg(),(0,et.T)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const v=s.find(T=>T.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function lR(n,e,t){return YT(n,t).pipe(_y((r,s)=>function mk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function yk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return UN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return UN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return UN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),(0,Y_.F)(),(0,et.T)(r=>r.map(s=>({type:s.type,payload:s}))))}function UN(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function dR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class hR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=YT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,et.T)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(zh(void 0),sg(),co(([r,s])=>s.length>0||!r),(0,et.T)(([r,s])=>s),$r.U0)}auditTrail(e){return this.stateChanges(e).pipe(_y((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dR(e);return lR(this.query,t,this.afs.schedulers.outsideAngular).pipe($r.U0)}valueChanges(e={}){return VN(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.T)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),$r.U0)}get(e){return(0,pn.H)(this.query.get(e)).pipe($r.U0)}add(e){return this.ref.add(e)}doc(e){return new fR(this.ref.doc(e),this.afs)}}class fR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=mR(r,t);return new hR(s,u,this.afs)}snapshotChanges(){return function gk(n,e){return cR(n,e).pipe(zh(void 0),sg(),(0,et.T)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($r.U0)}valueChanges(e={}){return this.snapshotChanges().pipe((0,et.T)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.H)(this.ref.get(e)).pipe($r.U0)}}class vk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?YT(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.T)(t=>t.filter(r=>e.indexOf(r.type)>-1)),co(t=>t.length>0),$r.U0):YT(this.query,this.afs.schedulers.outsideAngular).pipe($r.U0)}auditTrail(e){return this.stateChanges(e).pipe(_y((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dR(e);return lR(this.query,t,this.afs.schedulers.outsideAngular).pipe($r.U0)}valueChanges(e={}){return VN(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.T)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),$r.U0)}get(e){return(0,pn.H)(this.query.get(e)).pipe($r.U0)}}const pR=new h.nKC("angularfire2.enableFirestorePersistence"),gR=new h.nKC("angularfire2.firestore.persistenceSettings"),_k=new h.nKC("angularfire2.firestore.settings"),Ek=new h.nKC("angularfire2.firestore.use-emulator");function mR(n,e=(t=>t)){return{query:e(n),ref:n}}let ZT=(()=>{class n{constructor(t,r,s,u,l,m,v,D,T,N,L,G,Q,ce,De,Qe,at){this.schedulers=v;const ut=(0,hs.iB)(t,m,r),dt=T;N&&aR(ut,m,L,Q,ce,De,G,Qe),[this.firestore,this.persistenceEnabled$]=(0,hs.BM)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const kt=m.runOutsideAngular(()=>ut.firestore());if(u&&kt.settings(u),dt&&kt.useEmulator(...dt),s&&!su(l)){const Ht=()=>{try{return(0,pn.H)(kt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(_n){return typeof console<"u"&&console.warn(_n),(0,Tt.of)(!1)}};return[kt,m.runOutsideAngular(Ht)]}return[kt,(0,Tt.of)(!1)]},[u,dt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=mR(s,r),m=this.schedulers.ngZone.run(()=>u);return new hR(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new vk(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new fR(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.KVO(hs.rx),h.KVO(hs.uP,8),h.KVO(pR,8),h.KVO(_k,8),h.KVO(h.Agw),h.KVO(h.SKi),h.KVO($r.u0),h.KVO(gR,8),h.KVO(Ek,8),h.KVO(uR,8),h.KVO(tR,8),h.KVO(nR,8),h.KVO(rR,8),h.KVO(iR,8),h.KVO(sR,8),h.KVO(oR,8),h.KVO(FN,8))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wk=(()=>{class n{constructor(){eR.A.registerVersion("angularfire",$r.xv.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:pR,useValue:!0},{provide:gR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.$C({type:n}),n.\u0275inj=h.G2t({providers:[ZT]}),n})();class yR{}class Ik{}const th="*";function Dk(n,e){return{type:7,name:n,definitions:e,options:{}}}function vR(n,e=null){return{type:4,styles:e,timings:n}}function _R(n,e=null){return{type:2,steps:n,options:e}}function VI(n){return{type:6,styles:n,offset:null}}function BN(n,e,t){return{type:0,name:n,styles:e,options:t}}function ER(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class UI{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class wR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const u=this.players.length;0==u?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==u&&this._onFinish()}),l.onDestroy(()=>{++r==u&&this._onDestroy()}),l.onStart(()=>{++s==u&&this._onStart()})}),this.totalTime=this.players.reduce((l,m)=>Math.max(l,m.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const IR=["toast-component",""];function Ck(n,e){if(1&n){const t=h.RV6();h.j41(0,"button",5),h.bIt("click",function(){h.eBV(t);const s=h.XpG();return h.Njj(s.remove())}),h.j41(1,"span",6),h.EFF(2,"\xd7"),h.k0s()()}}function bk(n,e){if(1&n&&(h.qex(0),h.EFF(1),h.bVm()),2&n){const t=h.XpG(2);h.R7$(1),h.SpI("[",t.duplicatesCount+1,"]")}}function Tk(n,e){if(1&n&&(h.j41(0,"div"),h.EFF(1),h.DNE(2,bk,2,1,"ng-container",4),h.k0s()),2&n){const t=h.XpG();h.HbH(t.options.titleClass),h.BMQ("aria-label",t.title),h.R7$(1),h.SpI(" ",t.title," "),h.R7$(1),h.Y8G("ngIf",t.duplicatesCount)}}function Ak(n,e){if(1&n&&h.nrm(0,"div",7),2&n){const t=h.XpG();h.HbH(t.options.messageClass),h.Y8G("innerHTML",t.message,h.npT)}}function Sk(n,e){if(1&n&&(h.j41(0,"div",8),h.EFF(1),h.k0s()),2&n){const t=h.XpG();h.HbH(t.options.messageClass),h.BMQ("aria-label",t.message),h.R7$(1),h.SpI(" ",t.message," ")}}function Mk(n,e){if(1&n&&(h.j41(0,"div"),h.nrm(1,"div",9),h.k0s()),2&n){const t=h.XpG();h.R7$(1),h.xc7("width",t.width()+"%")}}class Fk{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Lk{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class Vk{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new bt.B;_activate=new bt.B;_manualClose=new bt.B;_resetTimeout=new bt.B;_countDuplicate=new bt.B;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class JT{toastId;config;message;title;toastType;toastRef;_onTap=new bt.B;_onAction=new bt.B;constructor(e,t,r,s,u,l){this.toastId=e,this.config=t,this.message=r,this.title=s,this.toastType=u,this.toastRef=l,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const CR=new h.nKC("ToastConfig");class Uk extends Lk{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let s;return s=r.create(e.injector),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.detachView(s.hostView),s.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(s),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(s)),s}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Bk=(()=>{class n{_document=(0,h.WQX)(le);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class jk{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let $k=(()=>{class n{_overlayContainer=(0,h.WQX)(Bk);_componentFactoryResolver=(0,h.WQX)(h.OM3);_appRef=(0,h.WQX)(h.o8S);_document=(0,h.WQX)(le);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const s=this._document.createElement("div");return s.id="toast-container",s.classList.add(t),s.classList.add("toast-container"),r?r.getContainerElement().appendChild(s):this._overlayContainer.getContainerElement().appendChild(s),s}_createPortalHost(t){return new Uk(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new jk(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eA=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,s,u,l){this.overlay=r,this._injector=s,this.sanitizer=u,this.ngZone=l,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,s={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(s))}success(t,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(s))}error(t,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(s))}info(t,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(s))}warning(t,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(s))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const s=this.toasts[this.currentlyActive].toastRef;s.isInactive()||(this.currentlyActive=this.currentlyActive+1,s.activate())}return!0}findDuplicate(t="",r="",s,u){const{includeTitleDuplicates:l}=this.toastrConfig;for(const m of this.toasts)if((!l||l&&m.title===t)&&m.message===r)return m.toastRef.onDuplicate(s,u),m;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,s,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,s,u)):this._buildNotification(t,r,s,u)}_buildNotification(t,r,s,u){if(!u.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(s,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&s||r)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=r;let m=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(m=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const v=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let D=r;r&&u.enableHtml&&(D=this.sanitizer.sanitize(h.WPN.HTML,r));const T=new Vk(v),N=new JT(this.index,u,D,s,t,T),G=h.zZn.create({providers:[{provide:JT,useValue:N}],parent:this._injector}),Q=new Fk(u.toastComponent,G),ce=v.attach(Q,u.newestOnTop);T.componentInstance=ce.instance;const De={toastId:this.index,title:s||"",message:r||"",toastRef:T,onShown:T.afterActivate(),onHidden:T.afterClosed(),onTap:N.onTap(),onAction:N.onAction(),portal:ce};return m||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{De.toastRef.activate()})),this.toasts.push(De),De}static \u0275fac=function(r){return new(r||n)(h.KVO(CR),h.KVO($k),h.KVO(h.zZn),h.KVO(xo),h.KVO(h.SKi))};static \u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Hk={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=(0,h.vPA)(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if("inactive"===this.state().value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,s){this.toastrService=t,this.toastPackage=r,this.ngZone=s,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u}),this.state=(0,h.vPA)({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>({...t,value:"active"})),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width()||100===this.width()||!this.options.timeOut)return;const t=(new Date).getTime();this.width.set((this.hideTime-t)/this.options.timeOut*100),"increasing"===this.options.progressAnimation&&this.width.update(s=>100-s),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>({...t,value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state().value&&(clearTimeout(this.timeout),this.state.update(t=>({...t,value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state().value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state().value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state().value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(h.rXU(eA),h.rXU(JT),h.rXU(h.SKi))};static \u0275cmp=h.VBU({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,s){1&r&&h.bIt("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),2&r&&(h.zvX("@flyInOut",s._state),h.HbH(s.toastClasses),h.xc7("display",s.displayStyle))},standalone:!0,features:[h.aNF],attrs:IR,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,s){1&r&&(h.DNE(0,Ck,3,0,"button",0),h.DNE(1,Tk,3,5,"div",1),h.DNE(2,Ak,1,3,"div",2),h.DNE(3,Sk,2,4,"div",3),h.DNE(4,Mk,2,2,"div",4)),2&r&&(h.Y8G("ngIf",s.options.closeButton),h.R7$(1),h.Y8G("ngIf",s.title),h.R7$(1),h.Y8G("ngIf",s.message&&s.options.enableHtml),h.R7$(1),h.Y8G("ngIf",s.message&&!s.options.enableHtml),h.R7$(1),h.Y8G("ngIf",s.options.progressBar))},dependencies:[xs],encapsulation:2,data:{animation:[Dk("flyInOut",[BN("inactive",VI({opacity:0})),BN("active",VI({opacity:1})),BN("removed",VI({opacity:0})),ER("inactive => active",vR("{{ easeTime }}ms {{ easing }}")),ER("active => removed",vR("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})()},Gk=(n={})=>(0,h.EmA)([{provide:CR,useValue:{default:Hk,config:n}}]);let zk=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[Gk(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=h.$C({type:n});static \u0275inj=h.G2t({})}return n})();function bR(n){return new h.wOt(3e3,!1)}function cp(n){switch(n.length){case 0:return new UI;case 1:return n[0];default:return new wR(n)}}function TR(n,e,t=new Map,r=new Map){const s=[],u=[];let l=-1,m=null;if(e.forEach(v=>{const D=v.get("offset"),T=D==l,N=T&&m||new Map;v.forEach((L,G)=>{let Q=G,ce=L;if("offset"!==G)switch(Q=n.normalizePropertyName(Q,s),ce){case"!":ce=t.get(G);break;case th:ce=r.get(G);break;default:ce=n.normalizeStyleValue(G,Q,ce,s)}N.set(Q,ce)}),T||u.push(N),m=N,l=D}),s.length)throw function pF(n){return new h.wOt(3502,!1)}();return u}function $N(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&HN(t,"start",n)));break;case"done":n.onDone(()=>r(t&&HN(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&HN(t,"destroy",n)))}}function HN(n,e,t){const u=GN(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(u._data=l),u}function GN(n,e,t,r,s="",u=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:u,disabled:!!l}}function sa(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function AR(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const TF=(()=>typeof document>"u"?null:document.documentElement)();function zN(n){const e=n.parentNode||n.host||null;return e===TF?null:e}let Fm=null,SR=!1;function MR(n,e){for(;e;){if(e===n)return!0;e=zN(e)}return!1}function NR(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let xR=(()=>{class n{validateStyleProperty(t){return function SF(n){Fm||(Fm=function MF(){return typeof document<"u"?document.body:null}()||{},SR=!!Fm.style&&"WebkitAppearance"in Fm.style);let e=!0;return Fm.style&&!function AF(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Fm.style,!e&&SR&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Fm.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return MR(t,r)}getParentElement(t){return zN(t)}query(t,r,s){return NR(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,u,l,m=[],v){return new UI(s,u)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})(),KN=(()=>{class n{static#e=this.NOOP=new xR}return n})();const NF=1e3,WN="ng-enter",tA="ng-leave",nA="ng-trigger",rA=".ng-trigger",OR="ng-animating",qN=".ng-animating";function nh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:QN(parseFloat(e[1]),e[2])}function QN(n,e){return"s"===e?n*NF:n}function iA(n,e,t){return n.hasOwnProperty("duration")?n:function RF(n,e,t){let s,u=0,l="";if("string"==typeof n){const m=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===m)return e.push(bR()),{duration:0,delay:0,easing:""};s=QN(parseFloat(m[1]),m[2]);const v=m[3];null!=v&&(u=QN(parseFloat(v),m[4]));const D=m[5];D&&(l=D)}else s=n;if(!t){let m=!1,v=e.length;s<0&&(e.push(function Kk(){return new h.wOt(3100,!1)}()),m=!0),u<0&&(e.push(function Wk(){return new h.wOt(3101,!1)}()),m=!0),m&&e.splice(v,0,bR())}return{duration:s,delay:u,easing:l}}(n,e,t)}function BI(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function PR(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function lp(n,e=new Map,t){if(t)for(let[r,s]of t)e.set(r,s);for(let[r,s]of n)e.set(r,s);return e}function al(n,e,t){e.forEach((r,s)=>{const u=YN(s);t&&!t.has(s)&&t.set(s,n.style[u]),n.style[u]=r})}function Lm(n,e){e.forEach((t,r)=>{const s=YN(r);n.style[s]=""})}function jI(n){return Array.isArray(n)?1==n.length?n[0]:_R(n):n}const XN=new RegExp("{{\\s*(.+?)\\s*}}","g");function FR(n){let e=[];if("string"==typeof n){let t;for(;t=XN.exec(n);)e.push(t[1]);XN.lastIndex=0}return e}function $I(n,e,t){const r=n.toString(),s=r.replace(XN,(u,l)=>{let m=e[l];return null==m&&(t.push(function Qk(n){return new h.wOt(3003,!1)}()),m=""),m.toString()});return s==r?n:s}function sA(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const kF=/-+([a-z0-9])/g;function YN(n){return n.replace(kF,(...e)=>e[1].toUpperCase())}function oa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Xk(n){return new h.wOt(3004,!1)}()}}function LR(n,e){return window.getComputedStyle(n)[e]}const oA="*";function VF(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function UF(n,e,t){if(":"==n[0]){const v=function BF(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function lF(n){return new h.wOt(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function cF(n){return new h.wOt(3015,!1)}()),e;const s=r[1],u=r[2],l=r[3];e.push(VR(s,l));"<"==u[0]&&!(s==oA&&l==oA)&&e.push(VR(l,s))}(r,t,e)):t.push(n),t}const aA=new Set(["true","1"]),uA=new Set(["false","0"]);function VR(n,e){const t=aA.has(n)||uA.has(n),r=aA.has(e)||uA.has(e);return(s,u)=>{let l=n==oA||n==s,m=e==oA||e==u;return!l&&t&&"boolean"==typeof s&&(l=s?aA.has(n):uA.has(n)),!m&&r&&"boolean"==typeof u&&(m=u?aA.has(e):uA.has(e)),l&&m}}const jF=new RegExp("s*:selfs*,?","g");function ZN(n,e,t,r){return new $F(n).build(e,t,r)}class $F{constructor(e){this._driver=e}build(e,t,r){const s=new zF(t);return this._resetContextStyleTimingState(s),oa(this,jI(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const u=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function Zk(){return new h.wOt(3006,!1)}()),e.definitions.forEach(m=>{if(this._resetContextStyleTimingState(t),0==m.type){const v=m,D=v.name;D.toString().split(/\s*,\s*/).forEach(T=>{v.name=T,u.push(this.visitState(v,t))}),v.name=D}else if(1==m.type){const v=this.visitTransition(m,t);r+=v.queryCount,s+=v.depCount,l.push(v)}else t.errors.push(function Jk(){return new h.wOt(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:l,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,l=s||{};r.styles.forEach(m=>{m instanceof Map&&m.forEach(v=>{FR(v).forEach(D=>{l.hasOwnProperty(D)||u.add(D)})})}),u.size&&(sA(u.values()),t.errors.push(function eF(n,e){return new h.wOt(3008,!1)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=oa(this,jI(e.animation),t);return{type:1,matchers:VF(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Vm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>oa(this,r,t)),options:Vm(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const u=e.steps.map(l=>{t.currentTime=r;const m=oa(this,l,t);return s=Math.max(s,t.currentTime),m});return t.currentTime=s,{type:3,steps:u,options:Vm(e.options)}}visitAnimate(e,t){const r=function WF(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return JN(iA(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=JN(0,0,"");return u.dynamic=!0,u.strValue=t,u}const s=iA(t,e);return JN(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,u=e.styles?e.styles:VI({});if(5==u.type)s=this.visitKeyframes(u,t);else{let l=e.styles,m=!1;if(!l){m=!0;const D={};r.easing&&(D.easing=r.easing),l=VI(D)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(l,t);v.isEmptyStep=m,s=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let m of s)"string"==typeof m?m===th?r.push(m):t.errors.push(new h.wOt(3002,!1)):r.push(PR(m));let u=!1,l=null;return r.forEach(m=>{if(m instanceof Map&&(m.has("easing")&&(l=m.get("easing"),m.delete("easing")),!u))for(let v of m.values())if(v.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((m,v)=>{const D=t.collectedStyles.get(t.currentQuerySelector),T=D.get(v);let N=!0;T&&(u!=s&&u>=T.startTime&&s<=T.endTime&&(t.errors.push(function nF(n,e,t,r,s){return new h.wOt(3010,!1)}()),N=!1),u=T.startTime),N&&D.set(v,{startTime:u,endTime:s}),t.options&&function PF(n,e,t){const r=e.params||{},s=FR(n);s.length&&s.forEach(u=>{r.hasOwnProperty(u)||t.push(function qk(n){return new h.wOt(3001,!1)}())})}(m,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function rF(){return new h.wOt(3011,!1)}()),r;let u=0;const l=[];let m=!1,v=!1,D=0;const T=e.steps.map(Qe=>{const at=this._makeStyleAst(Qe,t);let ut=null!=at.offset?at.offset:function KF(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(at.styles),dt=0;return null!=ut&&(u++,dt=at.offset=ut),v=v||dt<0||dt>1,m=m||dt<D,D=dt,l.push(dt),at});v&&t.errors.push(function iF(){return new h.wOt(3012,!1)}()),m&&t.errors.push(function sF(){return new h.wOt(3200,!1)}());const N=e.steps.length;let L=0;u>0&&u<N?t.errors.push(function oF(){return new h.wOt(3202,!1)}()):0==u&&(L=1/(N-1));const G=N-1,Q=t.currentTime,ce=t.currentAnimateTimings,De=ce.duration;return T.forEach((Qe,at)=>{const ut=L>0?at==G?1:L*at:l[at],dt=ut*De;t.currentTime=Q+ce.delay+dt,ce.duration=dt,this._validateStyleAst(Qe,t),Qe.offset=ut,r.styles.push(Qe)}),r}visitReference(e,t){return{type:8,animation:oa(this,jI(e.animation),t),options:Vm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Vm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Vm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[u,l]=function HF(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(jF,"")),n=n.replace(/@\*/g,rA).replace(/@\w+/g,t=>rA+"-"+t.slice(1)).replace(/:animating/g,qN),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,sa(t.collectedStyles,t.currentQuerySelector,new Map);const m=oa(this,jI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:s.limit||0,optional:!!s.optional,includeSelf:l,animation:m,originalSelector:e.selector,options:Vm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function aF(){return new h.wOt(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:iA(e.timings,t.errors,!0);return{type:12,animation:oa(this,jI(e.animation),t),timings:r,options:null}}}class zF{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Vm(n){return n?(n=BI(n)).params&&(n.params=function GF(n){return n?BI(n):null}(n.params)):n={},n}function JN(n,e,t){return{duration:n,delay:e,easing:t}}function ex(n,e,t,r,s,u,l=null,m=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:u,totalTime:s+u,easing:l,subTimeline:m}}class cA{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const XF=new RegExp(":enter","g"),ZF=new RegExp(":leave","g");function tx(n,e,t,r,s,u=new Map,l=new Map,m,v,D=[]){return(new JF).buildKeyframes(n,e,t,r,s,u,l,m,v,D)}class JF{buildKeyframes(e,t,r,s,u,l,m,v,D,T=[]){D=D||new cA;const N=new nx(e,t,D,s,u,T,[]);N.options=v;const L=v.delay?nh(v.delay):0;N.currentTimeline.delayNextStep(L),N.currentTimeline.setStyles([l],null,N.errors,v),oa(this,r,N);const G=N.timelines.filter(Q=>Q.containsAnimation());if(G.length&&m.size){let Q;for(let ce=G.length-1;ce>=0;ce--){const De=G[ce];if(De.element===t){Q=De;break}}Q&&!Q.allowOnlyTimelineStyles()&&Q.setStyles([m],null,N.errors,v)}return G.length?G.map(Q=>Q.buildKeyframes()):[ex(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),u=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,s,s.options);u!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const s of e){const u=s?.delay;if(u){const l="number"==typeof u?u:nh($I(u,s?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const l=null!=r.duration?nh(r.duration):null,m=null!=r.delay?nh(r.delay):null;return 0!==l&&e.forEach(v=>{const D=t.appendInstructionToTimeline(v,l,m);u=Math.max(u,D.duration+D.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),oa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const u=e.options;if(u&&(u.params||u.delay)&&(s=t.createSubContext(u),s.transformIntoNewTimeline(),null!=u.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=lA);const l=nh(u.delay);s.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>oa(this,l,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?nh(e.options.delay):0;e.steps.forEach(l=>{const m=t.createSubContext(e.options);u&&m.delayNextStep(u),oa(this,l,m),s=Math.max(s,m.currentTimeline.currentTime),r.push(m.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return iA(t.params?$I(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,u=r.duration,m=t.createSubContext().currentTimeline;m.easing=r.easing,e.styles.forEach(v=>{m.forwardTime((v.offset||0)*u),m.setStyles(v.styles,v.easing,t.errors,t.options),m.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(m),t.transformIntoNewTimeline(s+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},u=s.delay?nh(s.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=lA);let l=r;const m=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=m.length;let v=null;m.forEach((D,T)=>{t.currentQueryIndex=T;const N=t.createSubContext(e.options,D);u&&N.delayNextStep(u),D===t.element&&(v=N.currentTimeline),oa(this,e.animation,N),N.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,N.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,u=e.timings,l=Math.abs(u.duration),m=l*(t.currentQueryTotal-1);let v=l*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":v=m-v;break;case"full":v=r.currentStaggerTime}const T=t.currentTimeline;v&&T.delayNextStep(v);const N=T.currentTime;oa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-N+(s.startTime-r.currentTimeline.startTime)}}const lA={};class nx{constructor(e,t,r,s,u,l,m,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=u,this.errors=l,this.timelines=m,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lA,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new dA(this._driver,t,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=nh(r.duration)),null!=r.delay&&(s.delay=nh(r.delay));const u=r.params;if(u){let l=s.params;l||(l=this.options.params={}),Object.keys(u).forEach(m=>{(!t||!l.hasOwnProperty(m))&&(l[m]=$I(u[m],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,u=new nx(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=lA,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new eL(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(u),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,u,l){let m=[];if(s&&m.push(this.element),e.length>0){e=(e=e.replace(XF,"."+this._enterClassName)).replace(ZF,"."+this._leaveClassName);let D=this._driver.query(this.element,e,1!=r);0!==r&&(D=r<0?D.slice(D.length+r,D.length):D.slice(0,r)),m.push(...D)}return!u&&0==m.length&&l.push(function uF(n){return new h.wOt(3014,!1)}()),m}}class dA{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new dA(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||th),this._currentKeyframe.set(t,th);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&this._previousKeyframe.set("easing",t);const u=s&&s.params||{},l=function tL(n,e){const t=new Map;let r;return n.forEach(s=>{if("*"===s){r=r||e.keys();for(let u of r)t.set(u,th)}else lp(s,t)}),t}(e,this._globalTimelineStyles);for(let[m,v]of l){const D=$I(v,u,r);this._pendingStyles.set(m,D),this._localTimelineStyles.has(m)||this._backFill.set(m,this._globalTimelineStyles.get(m)??th),this._updateStyle(m,D)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const s=this._styleSummary.get(r);(!s||t.time>s.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((m,v)=>{const D=lp(m,new Map,this._backFill);D.forEach((T,N)=>{"!"===T?e.add(N):T===th&&t.add(N)}),r||D.set("offset",v/this.duration),s.push(D)});const u=e.size?sA(e.values()):[],l=t.size?sA(t.values()):[];if(r){const m=s[0],v=new Map(m);m.set("offset",0),v.set("offset",1),s=[m,v]}return ex(this.element,s,u,l,this.duration,this.startTime,this.easing,!1)}}class eL extends dA{constructor(e,t,r,s,u,l,m=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=u,this._stretchStartingKeyframe=m,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],l=r+t,m=t/l,v=lp(e[0]);v.set("offset",0),u.push(v);const D=lp(e[0]);D.set("offset",jR(m)),u.push(D);const T=e.length-1;for(let N=1;N<=T;N++){let L=lp(e[N]);const G=L.get("offset");L.set("offset",jR((t+G*r)/l)),u.push(L)}r=l,t=0,s="",e=u}return ex(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function jR(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class rx{}const nL=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class rL extends rx{normalizePropertyName(e,t){return YN(e)}normalizeStyleValue(e,t,r,s){let u="";const l=r.toString().trim();if(nL.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const m=r.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&0==m[1].length&&s.push(function Yk(n,e){return new h.wOt(3005,!1)}())}return l+u}}function $R(n,e,t,r,s,u,l,m,v,D,T,N,L){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:u,toState:r,toStyles:l,timelines:m,queriedElements:v,preStyleProps:D,postStyleProps:T,totalTime:N,errors:L}}const ix={};class HR{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function iL(n,e,t,r,s){return n.some(u=>u(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,r):new Map}build(e,t,r,s,u,l,m,v,D,T){const N=[],L=this.ast.options&&this.ast.options.params||ix,Q=this.buildStyles(r,m&&m.params||ix,N),ce=v&&v.params||ix,De=this.buildStyles(s,ce,N),Qe=new Set,at=new Map,ut=new Map,dt="void"===s,kt={params:sL(ce,L),delay:this.ast.options?.delay},Ht=T?[]:tx(e,t,this.ast.animation,u,l,Q,De,kt,D,N);let _n=0;if(Ht.forEach(Za=>{_n=Math.max(Za.duration+Za.delay,_n)}),N.length)return $R(t,this._triggerName,r,s,dt,Q,De,[],[],at,ut,_n,N);Ht.forEach(Za=>{const sh=Za.element,lP=sa(at,sh,new Set);Za.preStyleProps.forEach($m=>lP.add($m));const aD=sa(ut,sh,new Set);Za.postStyleProps.forEach($m=>aD.add($m)),sh!==t&&Qe.add(sh)});const rs=sA(Qe.values());return $R(t,this._triggerName,r,s,dt,Q,De,Ht,rs,at,ut,_n)}}function sL(n,e){const t=BI(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class oL{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,s=BI(this.defaultParams);return Object.keys(e).forEach(u=>{const l=e[u];null!==l&&(s[u]=l)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((l,m)=>{l&&(l=$I(l,s,t));const v=this.normalizer.normalizePropertyName(m,t);l=this.normalizer.normalizeStyleValue(m,v,l,t),r.set(m,l)})}),r}}class uL{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{this.states.set(s.name,new oL(s.style,s.options&&s.options.params||{},r))}),GR(this.states,"true","1"),GR(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new HR(e,s,this.states))}),this.fallbackTransition=function cL(n,e,t){return new HR(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,m)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(l=>l.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function GR(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const lL=new cA;class dL{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=ZN(this._driver,t,r,[]);if(r.length)throw function gF(n){return new h.wOt(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const s=e.element,u=TR(this._normalizer,e.keyframes,t,r);return this._driver.animate(s,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],u=this._animations.get(e);let l;const m=new Map;if(u?(l=tx(this._driver,t,u,WN,tA,new Map,new Map,r,lL,s),l.forEach(T=>{const N=sa(m,T.element,new Map);T.postStyleProps.forEach(L=>N.set(L,null))})):(s.push(function mF(){return new h.wOt(3300,!1)}()),l=[]),s.length)throw function yF(n){return new h.wOt(3504,!1)}();m.forEach((T,N)=>{T.forEach((L,G)=>{T.set(G,this._driver.computeStyle(N,G,th))})});const D=cp(l.map(T=>{const N=m.get(T.element);return this._buildPlayer(T,new Map,N)}));return this._playersById.set(e,D),D.onDestroy(()=>this.destroy(e)),this.players.push(D),D}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function vF(n){return new h.wOt(3301,!1)}();return t}listen(e,t,r,s){const u=GN(t,"","","");return $N(this._getPlayer(e),r,u,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const zR="ng-animate-queued",sx="ng-animate-disabled",mL=[],KR={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},yL={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xu="__ng_removed";class ox{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function wL(n){return n??null}(r?e.value:e),r){const u=BI(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const HI="void",ax=new ox(HI);class vL{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Xa(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.has(t))throw function _F(n,e){return new h.wOt(3302,!1)}();if(null==r||0==r.length)throw function EF(n){return new h.wOt(3303,!1)}();if(!function IL(n){return"start"==n||"done"==n}(r))throw function wF(n,e){return new h.wOt(3400,!1)}();const u=sa(this._elementListeners,e,[]),l={name:t,phase:r,callback:s};u.push(l);const m=sa(this._engine.statesByElement,e,new Map);return m.has(t)||(Xa(e,nA),Xa(e,nA+"-"+t),m.set(t,ax)),()=>{this._engine.afterFlush(()=>{const v=u.indexOf(l);v>=0&&u.splice(v,1),this._triggers.has(t)||m.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function IF(n){return new h.wOt(3401,!1)}();return t}trigger(e,t,r,s=!0){const u=this._getTrigger(t),l=new ux(this.id,t,e);let m=this._engine.statesByElement.get(e);m||(Xa(e,nA),Xa(e,nA+"-"+t),this._engine.statesByElement.set(e,m=new Map));let v=m.get(t);const D=new ox(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&D.absorbOptions(v.options),m.set(t,D),v||(v=ax),D.value!==HI&&v.value===D.value){if(!function bL(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const u=t[s];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(v.params,D.params)){const ce=[],De=u.matchStyles(v.value,v.params,ce),Qe=u.matchStyles(D.value,D.params,ce);ce.length?this._engine.reportError(ce):this._engine.afterFlush(()=>{Lm(e,De),al(e,Qe)})}return}const L=sa(this._engine.playersByElement,e,[]);L.forEach(ce=>{ce.namespaceId==this.id&&ce.triggerName==t&&ce.queued&&ce.destroy()});let G=u.matchTransition(v.value,D.value,e,D.params),Q=!1;if(!G){if(!s)return;G=u.fallbackTransition,Q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:G,fromState:v,toState:D,player:l,isFallbackTransition:Q}),Q||(Xa(e,zR),l.onStart(()=>{M_(e,zR)})),l.onDone(()=>{let ce=this.players.indexOf(l);ce>=0&&this.players.splice(ce,1);const De=this._engine.playersByElement.get(e);if(De){let Qe=De.indexOf(l);Qe>=0&&De.splice(Qe,1)}}),this.players.push(l),L.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,rA,!0);r.forEach(s=>{if(s[Xu])return;const u=this._engine.fetchNamespacesByElement(s);u.size?u.forEach(l=>l.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const u=this._engine.statesByElement.get(e),l=new Map;if(u){const m=[];if(u.forEach((v,D)=>{if(l.set(D,v.value),this._triggers.has(D)){const T=this.trigger(e,D,HI,s);T&&m.push(T)}}),m.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&cp(m).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(u=>{const l=u.name;if(s.has(l))return;s.add(l);const v=this._triggers.get(l).fallbackTransition,D=r.get(l)||ax,T=new ox(HI),N=new ux(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:v,fromState:D,toState:T,player:N,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)s=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Xu];(!u||u===KR)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Xa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const u=r.element,l=this._elementListeners.get(u);l&&l.forEach(m=>{if(m.name==r.triggerName){const v=GN(u,r.triggerName,r.fromState.value,r.toState.value);v._data=e,$N(r.player,m.phase,v,m.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const u=r.transition.ast.depCount,l=s.transition.ast.depCount;return 0==u||0==l?u-l:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class _L{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,u)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new vL(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,m=this.driver.getParentElement(t);for(;m;){const v=s.get(m);if(v){const D=r.indexOf(v);r.splice(D+1,0,e),l=!0;break}m=this.driver.getParentElement(m)}l||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let s of r.values())if(s.namespaceId){const u=this._fetchNamespace(s.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,s){if(hA(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!hA(t))return;const u=t[Xu];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Xa(e,sx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),M_(e,sx))}removeNode(e,t,r){if(hA(t)){const s=e?this._fetchNamespace(e):null;s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,s,u){this.collectedLeaveElements.push(t),t[Xu]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,s,u){return hA(t)?this._fetchNamespace(e).listen(t,r,s,u):()=>{}}_buildInstruction(e,t,r,s,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,rA,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,qN,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return cp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Xu];if(t&&t.setForRemoval){if(e[Xu]=KR,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(sx)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Xa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?cp(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function DF(n){return new h.wOt(3402,!1)}()}_flushAnimations(e,t){const r=new cA,s=[],u=new Map,l=[],m=new Map,v=new Map,D=new Map,T=new Set;this.disabledNodes.forEach(_t=>{T.add(_t);const Mt=this.driver.query(_t,".ng-animate-queued",!0);for(let Ut=0;Ut<Mt.length;Ut++)T.add(Mt[Ut])});const N=this.bodyNode,L=Array.from(this.statesByElement.keys()),G=QR(L,this.collectedEnterElements),Q=new Map;let ce=0;G.forEach((_t,Mt)=>{const Ut=WN+ce++;Q.set(Mt,Ut),_t.forEach(gn=>Xa(gn,Ut))});const De=[],Qe=new Set,at=new Set;for(let _t=0;_t<this.collectedLeaveElements.length;_t++){const Mt=this.collectedLeaveElements[_t],Ut=Mt[Xu];Ut&&Ut.setForRemoval&&(De.push(Mt),Qe.add(Mt),Ut.hasAnimation?this.driver.query(Mt,".ng-star-inserted",!0).forEach(gn=>Qe.add(gn)):at.add(Mt))}const ut=new Map,dt=QR(L,Array.from(Qe));dt.forEach((_t,Mt)=>{const Ut=tA+ce++;ut.set(Mt,Ut),_t.forEach(gn=>Xa(gn,Ut))}),e.push(()=>{G.forEach((_t,Mt)=>{const Ut=Q.get(Mt);_t.forEach(gn=>M_(gn,Ut))}),dt.forEach((_t,Mt)=>{const Ut=ut.get(Mt);_t.forEach(gn=>M_(gn,Ut))}),De.forEach(_t=>{this.processLeaveNode(_t)})});const kt=[],Ht=[];for(let _t=this._namespaceList.length-1;_t>=0;_t--)this._namespaceList[_t].drainQueuedTransitions(t).forEach(Ut=>{const gn=Ut.player,ji=Ut.element;if(kt.push(gn),this.collectedEnterElements.length){const Cs=ji[Xu];if(Cs&&Cs.setForMove){if(Cs.previousTriggersValues&&Cs.previousTriggersValues.has(Ut.triggerName)){const Hm=Cs.previousTriggersValues.get(Ut.triggerName),Ja=this.statesByElement.get(Ut.element);if(Ja&&Ja.has(Ut.triggerName)){const xA=Ja.get(Ut.triggerName);xA.value=Hm,Ja.set(Ut.triggerName,xA)}}return void gn.destroy()}}const ll=!N||!this.driver.containsElement(N,ji),aa=ut.get(ji),gp=Q.get(ji),Cr=this._buildInstruction(Ut,r,gp,aa,ll);if(Cr.errors&&Cr.errors.length)return void Ht.push(Cr);if(ll)return gn.onStart(()=>Lm(ji,Cr.fromStyles)),gn.onDestroy(()=>al(ji,Cr.toStyles)),void s.push(gn);if(Ut.isFallbackTransition)return gn.onStart(()=>Lm(ji,Cr.fromStyles)),gn.onDestroy(()=>al(ji,Cr.toStyles)),void s.push(gn);const fP=[];Cr.timelines.forEach(Cs=>{Cs.stretchStartingKeyframe=!0,this.disabledNodes.has(Cs.element)||fP.push(Cs)}),Cr.timelines=fP,r.append(ji,Cr.timelines),l.push({instruction:Cr,player:gn,element:ji}),Cr.queriedElements.forEach(Cs=>sa(m,Cs,[]).push(gn)),Cr.preStyleProps.forEach((Cs,Hm)=>{if(Cs.size){let Ja=v.get(Hm);Ja||v.set(Hm,Ja=new Set),Cs.forEach((xA,Ux)=>Ja.add(Ux))}}),Cr.postStyleProps.forEach((Cs,Hm)=>{let Ja=D.get(Hm);Ja||D.set(Hm,Ja=new Set),Cs.forEach((xA,Ux)=>Ja.add(Ux))})});if(Ht.length){const _t=[];Ht.forEach(Mt=>{_t.push(function CF(n,e){return new h.wOt(3505,!1)}())}),kt.forEach(Mt=>Mt.destroy()),this.reportError(_t)}const _n=new Map,rs=new Map;l.forEach(_t=>{const Mt=_t.element;r.has(Mt)&&(rs.set(Mt,Mt),this._beforeAnimationBuild(_t.player.namespaceId,_t.instruction,_n))}),s.forEach(_t=>{const Mt=_t.element;this._getPreviousPlayers(Mt,!1,_t.namespaceId,_t.triggerName,null).forEach(gn=>{sa(_n,Mt,[]).push(gn),gn.destroy()})});const Za=De.filter(_t=>YR(_t,v,D)),sh=new Map;qR(sh,this.driver,at,D,th).forEach(_t=>{YR(_t,v,D)&&Za.push(_t)});const aD=new Map;G.forEach((_t,Mt)=>{qR(aD,this.driver,new Set(_t),v,"!")}),Za.forEach(_t=>{const Mt=sh.get(_t),Ut=aD.get(_t);sh.set(_t,new Map([...Mt?.entries()??[],...Ut?.entries()??[]]))});const $m=[],dP=[],hP={};l.forEach(_t=>{const{element:Mt,player:Ut,instruction:gn}=_t;if(r.has(Mt)){if(T.has(Mt))return Ut.onDestroy(()=>al(Mt,gn.toStyles)),Ut.disabled=!0,Ut.overrideTotalTime(gn.totalTime),void s.push(Ut);let ji=hP;if(rs.size>1){let aa=Mt;const gp=[];for(;aa=aa.parentNode;){const Cr=rs.get(aa);if(Cr){ji=Cr;break}gp.push(aa)}gp.forEach(Cr=>rs.set(Cr,ji))}const ll=this._buildAnimation(Ut.namespaceId,gn,_n,u,aD,sh);if(Ut.setRealPlayer(ll),ji===hP)$m.push(Ut);else{const aa=this.playersByElement.get(ji);aa&&aa.length&&(Ut.parentPlayer=cp(aa)),s.push(Ut)}}else Lm(Mt,gn.fromStyles),Ut.onDestroy(()=>al(Mt,gn.toStyles)),dP.push(Ut),T.has(Mt)&&s.push(Ut)}),dP.forEach(_t=>{const Mt=u.get(_t.element);if(Mt&&Mt.length){const Ut=cp(Mt);_t.setRealPlayer(Ut)}}),s.forEach(_t=>{_t.parentPlayer?_t.syncPlayerEvents(_t.parentPlayer):_t.destroy()});for(let _t=0;_t<De.length;_t++){const Mt=De[_t],Ut=Mt[Xu];if(M_(Mt,tA),Ut&&Ut.hasAnimation)continue;let gn=[];if(m.size){let ll=m.get(Mt);ll&&ll.length&&gn.push(...ll);let aa=this.driver.query(Mt,qN,!0);for(let gp=0;gp<aa.length;gp++){let Cr=m.get(aa[gp]);Cr&&Cr.length&&gn.push(...Cr)}}const ji=gn.filter(ll=>!ll.destroyed);ji.length?DL(this,Mt,ji):this.processLeaveNode(Mt)}return De.length=0,$m.forEach(_t=>{this.players.push(_t),_t.onDone(()=>{_t.destroy();const Mt=this.players.indexOf(_t);this.players.splice(Mt,1)}),_t.play()}),$m}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,u){let l=[];if(t){const m=this.playersByQueriedElement.get(e);m&&(l=m)}else{const m=this.playersByElement.get(e);if(m){const v=!u||u==HI;m.forEach(D=>{D.queued||!v&&D.triggerName!=s||l.push(D)})}}return(r||s)&&(l=l.filter(m=>!(r&&r!=m.namespaceId||s&&s!=m.triggerName))),l}_beforeAnimationBuild(e,t,r){const u=t.element,l=t.isRemovalTransition?void 0:e,m=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const D=v.element,T=D!==u,N=sa(r,D,[]);this._getPreviousPlayers(D,T,l,m,t.toState).forEach(G=>{const Q=G.getRealPlayer();Q.beforeDestroy&&Q.beforeDestroy(),G.destroy(),N.push(G)})}Lm(u,t.fromStyles)}_buildAnimation(e,t,r,s,u,l){const m=t.triggerName,v=t.element,D=[],T=new Set,N=new Set,L=t.timelines.map(Q=>{const ce=Q.element;T.add(ce);const De=ce[Xu];if(De&&De.removedBeforeQueried)return new UI(Q.duration,Q.delay);const Qe=ce!==v,at=function CL(n){const e=[];return XR(n,e),e}((r.get(ce)||mL).map(_n=>_n.getRealPlayer())).filter(_n=>!!_n.element&&_n.element===ce),ut=u.get(ce),dt=l.get(ce),kt=TR(this._normalizer,Q.keyframes,ut,dt),Ht=this._buildPlayer(Q,kt,at);if(Q.subTimeline&&s&&N.add(ce),Qe){const _n=new ux(e,m,ce);_n.setRealPlayer(Ht),D.push(_n)}return Ht});D.forEach(Q=>{sa(this.playersByQueriedElement,Q.element,[]).push(Q),Q.onDone(()=>function EL(n,e,t){let r=n.get(e);if(r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Q.element,Q))}),T.forEach(Q=>Xa(Q,OR));const G=cp(L);return G.onDestroy(()=>{T.forEach(Q=>M_(Q,OR)),al(v,t.toStyles)}),N.forEach(Q=>{sa(s,Q,[]).push(G)}),G}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new UI(e.duration,e.delay)}}class ux{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new UI,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(s=>$N(e,r,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){sa(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function hA(n){return n&&1===n.nodeType}function WR(n,e){const t=n.style.display;return n.style.display=e??"none",t}function qR(n,e,t,r,s){const u=[];t.forEach(v=>u.push(WR(v)));const l=[];r.forEach((v,D)=>{const T=new Map;v.forEach(N=>{const L=e.computeStyle(D,N,s);T.set(N,L),(!L||0==L.length)&&(D[Xu]=yL,l.push(D))}),n.set(D,T)});let m=0;return t.forEach(v=>WR(v,u[m++])),l}function QR(n,e){const t=new Map;if(n.forEach(m=>t.set(m,[])),0==e.length)return t;const s=new Set(e),u=new Map;function l(m){if(!m)return 1;let v=u.get(m);if(v)return v;const D=m.parentNode;return v=t.has(D)?D:s.has(D)?1:l(D),u.set(m,v),v}return e.forEach(m=>{const v=l(m);1!==v&&t.get(v).push(m)}),t}function Xa(n,e){n.classList?.add(e)}function M_(n,e){n.classList?.remove(e)}function DL(n,e,t){cp(t).onDone(()=>n.processLeaveNode(e))}function XR(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof wR?XR(r.players,e):e.push(r)}}function YR(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(u=>s.add(u)):e.set(n,r),t.delete(n),!0}class fA{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,u)=>{},this._transitionEngine=new _L(e,t,r),this._timelineEngine=new dL(e,t,r),this._transitionEngine.onRemovalComplete=(s,u)=>this.onRemovalComplete(s,u)}registerTrigger(e,t,r,s,u){const l=e+"-"+s;let m=this._triggerCache[l];if(!m){const v=[],T=ZN(this._driver,u,v,[]);if(v.length)throw function fF(n,e){return new h.wOt(3404,!1)}();m=function aL(n,e,t){return new uL(n,e,t)}(s,T,this._normalizer),this._triggerCache[l]=m}this._transitionEngine.registerTrigger(t,s,m)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[u,l]=AR(r);this._timelineEngine.command(u,t,l,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,u){if("@"==r.charAt(0)){const[l,m]=AR(r);return this._timelineEngine.listen(l,t,m,u)}return this._transitionEngine.listen(e,t,r,s,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let AL=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&al(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(al(this._element,this._initialStyles),this._endStyles&&(al(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Lm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Lm(this._element,this._endStyles),this._endStyles=null),al(this._element,this._initialStyles),this._state=3)}}return n})();function cx(n){let e=null;return n.forEach((t,r)=>{(function SL(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class ZR{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,s)=>{"offset"!==s&&e.set(s,this._finished?r:LR(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class ML{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return MR(e,t)}getParentElement(e){return zN(e)}query(e,t,r){return NR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,u,l=[]){const v={duration:r,delay:s,fill:0==s?"both":"forwards"};u&&(v.easing=u);const D=new Map,T=l.filter(G=>G instanceof ZR);(function FF(n,e){return 0===n||0===e})(r,s)&&T.forEach(G=>{G.currentSnapshot.forEach((Q,ce)=>D.set(ce,Q))});let N=function OF(n){return n.length?n[0]instanceof Map?n:n.map(e=>PR(e)):[]}(t).map(G=>lp(G));N=function LF(n,e,t){if(t.size&&e.length){let r=e[0],s=[];if(t.forEach((u,l)=>{r.has(l)||s.push(l),r.set(l,u)}),s.length)for(let u=1;u<e.length;u++){let l=e[u];s.forEach(m=>l.set(m,LR(n,m)))}}return e}(e,N,D);const L=function TL(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=cx(e[0]),e.length>1&&(r=cx(e[e.length-1]))):e instanceof Map&&(t=cx(e)),t||r?new AL(n,t,r):null}(e,N);return new ZR(e,N,v,L)}}let NL=(()=>{class n extends yR{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.gXe.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?_R(t):t;return JR(this._renderer,null,r,"register",[s]),new xL(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(h._9s),h.KVO(le))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();class xL extends Ik{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new RL(this._id,e,t||{},this._renderer)}}class RL{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return JR(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function JR(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const eO="@.disabled";let OL=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(u,l)=>{const m=l?.parentNode(u);m&&l.removeChild(m,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(u);return T||(T=new tO("",u,this.engine,()=>this._rendererCache.delete(u)),this._rendererCache.set(u,T)),T}const l=r.id,m=r.id+"-"+this._currentId;this._currentId++,this.engine.register(m,t);const v=T=>{Array.isArray(T)?T.forEach(v):this.engine.registerTrigger(l,m,t,T.name,T)};return r.data.animation.forEach(v),new PL(this,m,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[l,m]=u;l(m)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(h._9s),h.KVO(fA),h.KVO(h.SKi))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();class tO{constructor(e,t,r,s){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=s}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==eO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class PL extends tO{constructor(e,t,r,s,u){super(t,r,s,u),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==eO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function kL(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),l="";return"@"!=u.charAt(0)&&([u,l]=function FL(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,s,u,l,m=>{this.factory.scheduleListenerCallback(m._data||-1,r,m)})}return this.delegate.listen(e,t,r)}}let LL=(()=>{class n extends fA{constructor(t,r,s,u){super(t.body,r,s)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(le),h.KVO(KN),h.KVO(rx),h.KVO(h.o8S))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();const nO=[{provide:yR,useClass:NL},{provide:rx,useFactory:function VL(){return new rL}},{provide:fA,useClass:LL},{provide:h._9s,useFactory:function UL(n,e,t){return new OL(n,e,t)},deps:[on,fA,h.SKi]}],lx=[{provide:KN,useFactory:()=>new ML},{provide:h.bc$,useValue:"BrowserAnimations"},...nO],rO=[{provide:KN,useClass:xR},{provide:h.bc$,useValue:"NoopAnimations"},...nO];let BL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?rO:lx}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.$C({type:n});static#n=this.\u0275inj=h.G2t({providers:lx,imports:[Us]})}return n})();var Yu=O(4412),$L=O(5225);function dx(...n){const e=(0,Ln.lI)(n),t=(0,Ln.ms)(n),{args:r,keys:s}=Ro(n);if(0===r.length)return(0,pn.H)([],e);const u=new qi.c(function HL(n,e,t=$T.D){return r=>{iO(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let v=0;v<s;v++)iO(e,()=>{const D=(0,pn.H)(n[v],e);let T=!1;D.subscribe((0,Vn._)(r,N=>{u[v]=N,T||(T=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>ed(s,l):$T.D));return t?u.pipe(Jl(t)):u}function iO(n,e,t){n?(0,$L.N)(t,n,e):e()}function sO(n){return new qi.c(e=>{(0,wa.Tg)(n()).subscribe(e)})}var GL=O(1203);function GI(n,e){const t=(0,kI.T)(n)?n:()=>n,r=s=>s.error(t());return new qi.c(e?s=>e.schedule(r,0,s):r)}var hx=O(8359);function fx(){return(0,Pi.N)((n,e)=>{let t=null;n._refCount++;const r=(0,Vn._)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class oO extends qi.c{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Pi.S)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new hx.yU;const t=this.getSubject();e.add(this.source.subscribe((0,Vn._)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=hx.yU.EMPTY)}return e}refCount(){return fx()(this)}}var Xs=O(1397);function zI(n,e){return(0,kI.T)(e)?(0,Xs.Z)(n,e,1):(0,Xs.Z)(n,1)}var Ds=O(8141);function Um(n){return(0,Pi.N)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Vn._)(t,void 0,void 0,l=>{u=(0,wa.Tg)(n(l,Um(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function px(n){return n<=0?()=>ap.w:(0,Pi.N)((e,t)=>{let r=[];e.subscribe((0,Vn._)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function gx(n){return(0,Pi.N)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var WL=O(5343);const Zt="primary",KI=Symbol("RouteTitle");class QL{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function N_(n){return new QL(n)}function XL(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function ul(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!aO(n[s],e[s]))return!1;return!0}function aO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function uO(n){return n.length>0?n[n.length-1]:null}function dp(n){return function jL(n){return!!n&&(n instanceof qi.c||(0,kI.T)(n.lift)&&(0,kI.T)(n.subscribe))}(n)?n:(0,h.jNT)(n)?(0,pn.H)(Promise.resolve(n)):(0,Tt.of)(n)}const ZL={exact:function dO(n,e,t){if(!Bm(n.segments,e.segments)||!gA(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!dO(n.children[r],e.children[r],t))return!1;return!0},subset:hO},cO={exact:function JL(n,e){return ul(n,e)},subset:function e2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>aO(n[t],e[t]))},ignored:()=>!0};function lO(n,e,t){return ZL[t.paths](n.root,e.root,t.matrixParams)&&cO[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function hO(n,e,t){return fO(n,e,e.segments,t)}function fO(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Bm(s,t)||e.hasChildren()||!gA(s,t,r))}if(n.segments.length===t.length){if(!Bm(n.segments,t)||!gA(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!hO(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Bm(n.segments,s)&&gA(n.segments,s,r)&&n.children[Zt])&&fO(n.children[Zt],e,u,r)}}function gA(n,e,t){return e.every((r,s)=>cO[t](n[s].parameters,r.parameters))}class x_{constructor(e=new Sn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N_(this.queryParams)),this._queryParamMap}toString(){return r2.serialize(this)}}class Sn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mA(this)}}class WI{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=N_(this.parameters)),this._parameterMap}toString(){return mO(this)}}function Bm(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let qI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:function(){return new mx},providedIn:"root"})}return n})();class mx{parse(e){const t=new p2(e);return new x_(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${QI(e.root,!0)}`,r=function o2(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${yA(t)}=${yA(s)}`).join("&"):`${yA(t)}=${yA(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),s="string"==typeof e.fragment?`#${function i2(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${s}`}}const r2=new mx;function mA(n){return n.segments.map(e=>mO(e)).join("/")}function QI(n,e){if(!n.hasChildren())return mA(n);if(e){const t=n.children[Zt]?QI(n.children[Zt],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==Zt&&r.push(`${s}:${QI(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function n2(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===Zt&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==Zt&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===Zt?[QI(n.children[Zt],!1)]:[`${s}:${QI(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${mA(n)}/${t[0]}`:`${mA(n)}/(${t.join("//")})`}}function pO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yA(n){return pO(n).replace(/%3B/gi,";")}function yx(n){return pO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vA(n){return decodeURIComponent(n)}function gO(n){return vA(n.replace(/\+/g,"%20"))}function mO(n){return`${yx(n.path)}${function s2(n){return Object.keys(n).map(e=>`;${yx(e)}=${yx(n[e])}`).join("")}(n.parameters)}`}const a2=/^[^\/()?;#]+/;function vx(n){const e=n.match(a2);return e?e[0]:""}const u2=/^[^\/()?;=#]+/,l2=/^[^=?&#]+/,h2=/^[^&#]+/;class p2{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Sn([],{}):new Sn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Sn(e,t)),r}parseSegment(){const e=vx(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.wOt(4009,!1);return this.capture(e),new WI(vA(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function c2(n){const e=n.match(u2);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=vx(this.remaining);s&&(r=s,this.capture(r))}e[vA(t)]=vA(r)}parseQueryParam(e){const t=function d2(n){const e=n.match(l2);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function f2(n){const e=n.match(h2);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=gO(t),u=gO(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vx(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new h.wOt(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Zt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Zt]:new Sn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.wOt(4011,!1)}}function yO(n){return n.segments.length>0?new Sn([],{[Zt]:n}):n}function vO(n){const e={};for(const r of Object.keys(n.children)){const u=vO(n.children[r]);if(r===Zt&&0===u.segments.length&&u.hasChildren())for(const[l,m]of Object.entries(u.children))e[l]=m;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function g2(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Sn(n.segments.concat(e.segments),e.children)}return n}(new Sn(n.segments,e))}function jm(n){return n instanceof x_}function _O(n){let e;const s=yO(function t(u){const l={};for(const v of u.children){const D=t(v);l[v.outlet]=D}const m=new Sn(u.url,l);return u===n&&(e=m),m}(n.root));return e??s}function EO(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return _x(s,s,s,t,r);const u=function y2(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new IO(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Object.entries(u.outlets).forEach(([v,D])=>{m[v]="string"==typeof D?D.split("/"):D}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new IO(t,e,r)}(e);if(u.toRoot())return _x(s,s,new Sn([],{}),t,r);const l=function v2(n,e,t){if(n.isAbsolute)return new EA(e,!0,0);if(!t)return new EA(e,!1,NaN);if(null===t.parent)return new EA(t,!0,0);const r=_A(n.commands[0])?0:1;return function _2(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new h.wOt(4005,!1);s=r.segments.length}return new EA(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),m=l.processChildren?YI(l.segmentGroup,l.index,u.commands):DO(l.segmentGroup,l.index,u.commands);return _x(s,l.segmentGroup,m,t,r)}function _A(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function XI(n){return"object"==typeof n&&null!=n&&n.outlets}function _x(n,e,t,r,s){let l,u={};r&&Object.entries(r).forEach(([v,D])=>{u[v]=Array.isArray(D)?D.map(T=>`${T}`):`${D}`}),l=n===e?t:wO(n,e,t);const m=yO(vO(l));return new x_(m,u,s)}function wO(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:wO(u,e,t)}),new Sn(n.segments,r)}class IO{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_A(r[0]))throw new h.wOt(4003,!1);const s=r.find(XI);if(s&&s!==uO(r))throw new h.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class EA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function DO(n,e,t){if(n||(n=new Sn([],{})),0===n.segments.length&&n.hasChildren())return YI(n,e,t);const r=function w2(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(XI(m))break;const v=`${m}`,D=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&D&&"object"==typeof D&&void 0===D.outlets){if(!bO(v,D,l))return u;r+=2}else{if(!bO(v,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Sn(n.segments.slice(0,r.pathIndex),{});return u.children[Zt]=new Sn(n.segments.slice(r.pathIndex),n.children),YI(u,0,s)}return r.match&&0===s.length?new Sn(n.segments,{}):r.match&&!n.hasChildren()?Ex(n,e,t):r.match?YI(n,0,s):Ex(n,e,t)}function YI(n,e,t){if(0===t.length)return new Sn(n.segments,{});{const r=function E2(n){return XI(n[0])?n[0].outlets:{[Zt]:n}}(t),s={};if(Object.keys(r).some(u=>u!==Zt)&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const u=YI(n.children[Zt],e,t);return new Sn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=DO(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(s[u]=l)}),new Sn(n.segments,s)}}function Ex(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(XI(u)){const v=I2(u.outlets);return new Sn(r,v)}if(0===s&&_A(t[0])){r.push(new WI(n.segments[e].path,CO(t[0]))),s++;continue}const l=XI(u)?u.outlets[Zt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&_A(m)?(r.push(new WI(l,CO(m))),s+=2):(r.push(new WI(l,{})),s++)}return new Sn(r,{})}function I2(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Ex(new Sn([],{}),0,r))}),e}function CO(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function bO(n,e,t){return n==t.path&&ul(e,t.parameters)}const ZI="imperative";class cl{constructor(e,t){this.id=e,this.url=t}}class wA extends cl{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hp extends cl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class JI extends cl{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class R_ extends cl{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class IA extends cl{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class TO extends cl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D2 extends cl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C2 extends cl{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class b2 extends cl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class T2 extends cl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class A2{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class S2{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class M2{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N2{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x2{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class R2{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AO{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wx{}class Ix{constructor(e){this.url=e}}class O2{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new eD,this.attachRef=null}}let eD=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new O2,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class SO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Dx(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Dx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Cx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Cx(e,this._root).map(t=>t.value)}}function Dx(n,e){if(n===e.value)return e;for(const t of e.children){const r=Dx(n,t);if(r)return r}return null}function Cx(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Cx(n,t);if(r.length)return r.unshift(e),r}return[]}class rh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function O_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class MO extends SO{constructor(e,t){super(e),this.snapshot=t,bx(this,e)}toString(){return this.snapshot.toString()}}function NO(n,e){const t=function P2(n,e){const l=new DA([],{},{},"",{},Zt,e,null,{});return new RO("",new rh(l,[]))}(0,e),r=new Yu.t([new WI("",{})]),s=new Yu.t({}),u=new Yu.t({}),l=new Yu.t({}),m=new Yu.t(""),v=new fp(r,s,l,m,u,Zt,e,t.root);return v.snapshot=t.root,new MO(new rh(v,[]),t)}class fp{constructor(e,t,r,s,u,l,m,v){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=l,this.component=m,this._futureSnapshot=v,this.title=this.dataSubject?.pipe((0,et.T)(D=>D[KI]))??(0,Tt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,et.T)(e=>N_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,et.T)(e=>N_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xO(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function k2(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class DA{get title(){return this.data?.[KI]}constructor(e,t,r,s,u,l,m,v,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.routeConfig=v,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=N_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class RO extends SO{constructor(e,t){super(t),this.url=e,bx(this,t)}toString(){return OO(this._root)}}function bx(n,e){e.value._routerState=n,e.children.forEach(t=>bx(n,t))}function OO(n){const e=n.children.length>0?` { ${n.children.map(OO).join(", ")} } `:"";return`${n.value}${e}`}function Tx(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ul(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ul(e.params,t.params)||n.paramsSubject.next(t.params),function YL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ul(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ul(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ax(n,e){const t=ul(n.params,e.params)&&function t2(n,e){return Bm(n,e)&&n.every((t,r)=>ul(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ax(n.parent,e.parent))}let Sx=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new h.bkB,this.deactivateEvents=new h.bkB,this.attachEvents=new h.bkB,this.detachEvents=new h.bkB,this.parentContexts=(0,h.WQX)(eD),this.location=(0,h.WQX)(h.c1b),this.changeDetector=(0,h.WQX)(h.gRc),this.environmentInjector=(0,h.WQX)(h.uvJ),this.inputBinder=(0,h.WQX)(CA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.wOt(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.wOt(4013,!1);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new F2(t,m,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:v,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.OA$]})}return n})();class F2{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fp?this.route:e===eD?this.childContexts:this.parent.get(e,t)}}const CA=new h.nKC("");let PO=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=dx([r.queryParams,r.params,r.data]).pipe((0,$n.n)(([u,l,m],v)=>(m={...u,...l,...m},0===v?(0,Tt.of)(m):Promise.resolve(m)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,h.HJs)(r.component);if(l)for(const{templateName:m}of l.inputs)t.activatedComponentRef.setInput(m,u[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();function tD(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function V2(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return tD(n,r,s);return tD(n,r)})}(n,e,t);return new rh(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>tD(n,m)),l}}const r=function U2(n){return new fp(new Yu.t(n.url),new Yu.t(n.params),new Yu.t(n.queryParams),new Yu.t(n.fragment),new Yu.t(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>tD(n,u));return new rh(r,s)}}const Mx="ngNavigationCancelingError";function kO(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=jm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=FO(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function FO(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Mx]=!0,r.cancellationCode=e,t&&(r.url=t),r}function LO(n){return n&&n[Mx]}let VO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.aNF],decls:1,vars:0,template:function(r,s){1&r&&h.nrm(0,"router-outlet")},dependencies:[Sx],encapsulation:2})}return n})();function Nx(n){const e=n.children&&n.children.map(Nx),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=VO),t}function Zu(n){return n.outlet||Zt}function nD(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class W2{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Tx(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=O_(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=O_(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=O_(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=O_(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new R2(u.value.snapshot))}),e.children.length&&this.forwardEvent(new N2(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Tx(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Tx(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=nD(s.snapshot);l.attachRef=null,l.route=s,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class UO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class bA{constructor(e,t){this.component=e,this.route=t}}function q2(n,e,t){const r=n._root;return rD(r,e?e._root:null,t,[r.value])}function P_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.LfX)(n)?e.get(n):n:r}function rD(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=O_(e);return n.children.forEach(l=>{(function X2(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function Y2(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Bm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bm(n.url,e.url)||!ul(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ax(n,e)||!ul(n.queryParams,e.queryParams);default:return!Ax(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new UO(r)):(u.data=l.data,u._resolvedData=l._resolvedData),rD(n,e,u.component?m?m.children:null:t,r,s),v&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new bA(m.outlet.component,l))}else l&&iD(e,m,s),s.canActivateChecks.push(new UO(r)),rD(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,m])=>iD(m,t.getContext(l),s)),s}function iD(n,e,t){const r=O_(n),s=n.value;Object.entries(r).forEach(([u,l])=>{iD(l,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new bA(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function sD(n){return"function"==typeof n}function BO(n){return n instanceof BT||"EmptyError"===n?.name}const TA=Symbol("INITIAL_VALUE");function k_(){return(0,$n.n)(n=>dx(n.map(e=>e.pipe(A_(1),zh(TA)))).pipe((0,et.T)(e=>{for(const t of e)if(!0!==t){if(t===TA)return TA;if(!1===t||t instanceof x_)return t}return!0}),co(e=>e!==TA),A_(1)))}function jO(n){return(0,GL.F)((0,Ds.M)(e=>{if(jm(e))throw kO(0,e)}),(0,et.T)(e=>!0===e))}class AA{constructor(e){this.segmentGroup=e||null}}class $O{constructor(e){this.urlTree=e}}function F_(n){return GI(new AA(n))}function HO(n){return GI(new $O(n))}class yV{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new h.wOt(4002,!1)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return(0,Tt.of)(r);if(s.numberOfChildren>1||!s.children[Zt])return GI(new h.wOt(4e3,!1));s=s.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new x_(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);r[s]=t[m]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Object.entries(t.children).forEach(([m,v])=>{l[m]=this.createSegmentGroup(e,v,r,s)}),new Sn(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new h.wOt(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const xx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vV(n,e,t,r,s){const u=Rx(n,e,t);return u.matched?(r=function j2(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.Ol2)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function pV(n,e,t,r){const s=e.canMatch;if(!s||0===s.length)return(0,Tt.of)(!0);const u=s.map(l=>{const m=P_(l,n);return dp(function rV(n){return n&&sD(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))});return(0,Tt.of)(u).pipe(k_(),jO())}(r,e,t).pipe((0,et.T)(l=>!0===l?u:{...xx}))):(0,Tt.of)(u)}function Rx(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...xx}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||XL)(t,n,e);if(!s)return{...xx};const u={};Object.entries(s.posParams??{}).forEach(([m,v])=>{u[m]=v.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function GO(n,e,t,r){return t.length>0&&function wV(n,e,t){return t.some(r=>SA(n,e,r)&&Zu(r)!==Zt)}(n,t,r)?{segmentGroup:new Sn(e,EV(r,new Sn(t,n.children))),slicedSegments:[]}:0===t.length&&function IV(n,e,t){return t.some(r=>SA(n,e,r))}(n,t,r)?{segmentGroup:new Sn(n.segments,_V(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Sn(n.segments,n.children),slicedSegments:t}}function _V(n,e,t,r,s){const u={};for(const l of r)if(SA(n,t,l)&&!s[Zu(l)]){const m=new Sn([],{});u[Zu(l)]=m}return{...s,...u}}function EV(n,e){const t={};t[Zt]=e;for(const r of n)if(""===r.path&&Zu(r)!==Zt){const s=new Sn([],{});t[Zu(r)]=s}return t}function SA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class TV{constructor(e,t,r,s,u,l,m){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new yV(this.urlSerializer,this.urlTree)}noMatchError(e){return new h.wOt(4002,!1)}recognize(){const e=GO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe(Um(t=>{if(t instanceof $O)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof AA?this.noMatchError(t):t}),(0,et.T)(t=>{const r=new DA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,{}),s=new rh(r,t),u=new RO("",s),l=function m2(n,e,t=null,r=null){return EO(_O(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Zt).pipe(Um(r=>{throw r instanceof AA?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=xO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0)}processChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,pn.H)(s).pipe(zI(u=>{const l=r.children[u],m=function z2(n,e){const t=n.filter(r=>Zu(r)===e);return t.push(...n.filter(r=>Zu(r)!==e)),t}(t,u);return this.processSegmentGroup(e,m,l,u)}),_y((u,l)=>(u.push(...l),u)),jT(null),function zL(n,e){const t=arguments.length>=2;return r=>r.pipe(n?co((s,u)=>n(s,u,r)):$T.D,px(1),t?jT(e):N1(()=>new BT))}(),(0,Xs.Z)(u=>{if(null===u)return F_(r);const l=zO(u);return function AV(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,Tt.of)(l)}))}processSegment(e,t,r,s,u,l){return(0,pn.H)(t).pipe(zI(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,r,s,u,l).pipe(Um(v=>{if(v instanceof AA)return(0,Tt.of)(null);throw v}))),up(m=>!!m),Um(m=>{if(BO(m))return function CV(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?(0,Tt.of)([]):F_(r);throw m}))}processSegmentAgainstRoute(e,t,r,s,u,l,m){return function DV(n,e,t,r){return!!(Zu(n)===r||r!==Zt&&SA(e,t,n))&&("**"===n.path||Rx(e,n,t).matched)}(r,s,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,l,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,l):F_(s):F_(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?HO(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Xs.Z)(l=>{const m=new Sn(l,{});return this.processSegment(e,t,m,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:v,remainingSegments:D,positionalParamSegments:T}=Rx(t,s,u);if(!m)return F_(t);const N=this.applyRedirects.applyRedirectCommands(v,s.redirectTo,T);return s.redirectTo.startsWith("/")?HO(N):this.applyRedirects.lineralizeSegments(s,N).pipe((0,Xs.Z)(L=>this.processSegment(e,r,t,L.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u,l){let m;if("**"===r.path){const v=s.length>0?uO(s).parameters:{},D=new DA(s,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KO(r),Zu(r),r.component??r._loadedComponent??null,r,WO(r));m=(0,Tt.of)({snapshot:D,consumedSegments:[],remainingSegments:[]}),t.children={}}else m=vV(t,r,s,e).pipe((0,et.T)(({matched:v,consumedSegments:D,remainingSegments:T,parameters:N})=>v?{snapshot:new DA(D,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KO(r),Zu(r),r.component??r._loadedComponent??null,r,WO(r)),consumedSegments:D,remainingSegments:T}:null));return m.pipe((0,$n.n)(v=>null===v?F_(t):this.getChildConfig(e=r._injector??e,r,s).pipe((0,$n.n)(({routes:D})=>{const T=r._loadedInjector??e,{snapshot:N,consumedSegments:L,remainingSegments:G}=v,{segmentGroup:Q,slicedSegments:ce}=GO(t,L,G,D);if(0===ce.length&&Q.hasChildren())return this.processChildren(T,D,Q).pipe((0,et.T)(Qe=>null===Qe?null:[new rh(N,Qe)]));if(0===D.length&&0===ce.length)return(0,Tt.of)([new rh(N,[])]);const De=Zu(r)===u;return this.processSegment(T,D,Q,ce,De?Zt:u,!0).pipe((0,et.T)(Qe=>[new rh(N,Qe)]))}))))}getChildConfig(e,t,r){return t.children?(0,Tt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Tt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function fV(n,e,t,r){const s=e.canLoad;if(void 0===s||0===s.length)return(0,Tt.of)(!0);const u=s.map(l=>{const m=P_(l,n);return dp(function J2(n){return n&&sD(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))});return(0,Tt.of)(u).pipe(k_(),jO())}(e,t,r).pipe((0,Xs.Z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Ds.M)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function mV(n){return GI(FO(!1,3))}())):(0,Tt.of)({routes:[],injector:e})}}function SV(n){const e=n.value.routeConfig;return e&&""===e.path}function zO(n){const e=[],t=new Set;for(const r of n){if(!SV(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=zO(r.children);e.push(new rh(r.value,s))}return e.filter(r=>!t.has(r))}function KO(n){return n.data||{}}function WO(n){return n.resolve||{}}function qO(n){return"string"==typeof n.title||null===n.title}function Ox(n){return(0,$n.n)(e=>{const t=n(e);return t?(0,pn.H)(t).pipe((0,et.T)(()=>e)):(0,Tt.of)(e)})}const L_=new h.nKC("ROUTES");let Px=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.WQX)(h.Ql9)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Tt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=dp(t.loadComponent()).pipe((0,et.T)(QO),(0,Ds.M)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),gx(()=>{this.componentLoaders.delete(t)})),s=new oO(r,()=>new bt.B).pipe(fx());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Tt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function kV(n,e,t,r){return dp(n.loadChildren()).pipe((0,et.T)(QO),(0,Xs.Z)(s=>s instanceof h.Co$||Array.isArray(s)?(0,Tt.of)(s):(0,pn.H)(e.compileModuleAsync(s))),(0,et.T)(s=>{r&&r(n);let u,l,m=!1;return Array.isArray(s)?(l=s,!0):(u=s.create(t).injector,l=u.get(L_,[],{optional:!0,self:!0}).flat()),{routes:l.map(Nx),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(gx(()=>{this.childrenLoaders.delete(r)})),l=new oO(u,()=>new bt.B).pipe(fx());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QO(n){return function FV(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let MA=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new bt.B,this.transitionAbortSubject=new bt.B,this.configLoader=(0,h.WQX)(Px),this.environmentInjector=(0,h.WQX)(h.uvJ),this.urlSerializer=(0,h.WQX)(qI),this.rootContexts=(0,h.WQX)(eD),this.inputBindingEnabled=null!==(0,h.WQX)(CA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Tt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new S2(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new A2(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,s){return this.transitions=new Yu.t({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ZI,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(co(u=>0!==u.id),(0,et.T)(u=>({...u,extractedUrl:t.urlHandlingStrategy.extract(u.rawUrl)})),(0,$n.n)(u=>{this.currentTransition=u;let l=!1,m=!1;return(0,Tt.of)(u).pipe((0,Ds.M)(v=>{this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,$n.n)(v=>{const D=v.currentBrowserUrl.toString(),T=!t.navigated||v.extractedUrl.toString()!==D||D!==v.currentUrlTree.toString();if(!T&&"reload"!==(v.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const L="";return this.events.next(new R_(v.id,this.urlSerializer.serialize(v.rawUrl),L,0)),v.resolve(null),ap.w}if(t.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return(0,Tt.of)(v).pipe((0,$n.n)(L=>{const G=this.transitions?.getValue();return this.events.next(new wA(L.id,this.urlSerializer.serialize(L.extractedUrl),L.source,L.restoredState)),G!==this.transitions?.getValue()?ap.w:Promise.resolve(L)}),function MV(n,e,t,r,s,u){return(0,Xs.Z)(l=>function bV(n,e,t,r,s,u,l="emptyOnly"){return new TV(n,e,t,r,s,l,u).recognize()}(n,e,t,r,l.extractedUrl,s,u).pipe((0,et.T)(({state:m,tree:v})=>({...l,targetSnapshot:m,urlAfterRedirects:v}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Ds.M)(L=>{u.targetSnapshot=L.targetSnapshot,u.urlAfterRedirects=L.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:L.urlAfterRedirects};const G=new TO(L.id,this.urlSerializer.serialize(L.extractedUrl),this.urlSerializer.serialize(L.urlAfterRedirects),L.targetSnapshot);this.events.next(G)}));if(T&&t.urlHandlingStrategy.shouldProcessUrl(v.currentRawUrl)){const{id:L,extractedUrl:G,source:Q,restoredState:ce,extras:De}=v,Qe=new wA(L,this.urlSerializer.serialize(G),Q,ce);this.events.next(Qe);const at=NO(0,this.rootComponentType).snapshot;return this.currentTransition=u={...v,targetSnapshot:at,urlAfterRedirects:G,extras:{...De,skipLocationChange:!1,replaceUrl:!1}},(0,Tt.of)(u)}{const L="";return this.events.next(new R_(v.id,this.urlSerializer.serialize(v.extractedUrl),L,1)),v.resolve(null),ap.w}}),(0,Ds.M)(v=>{const D=new D2(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(D)}),(0,et.T)(v=>(this.currentTransition=u={...v,guards:q2(v.targetSnapshot,v.currentSnapshot,this.rootContexts)},u)),function sV(n,e){return(0,Xs.Z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,Tt.of)({...t,guardsResult:!0}):function oV(n,e,t,r){return(0,pn.H)(n).pipe((0,Xs.Z)(s=>function hV(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,Tt.of)(!0);const l=u.map(m=>{const v=nD(e)??s,D=P_(m,v);return dp(function nV(n){return n&&sD(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):v.runInContext(()=>D(n,e,t,r))).pipe(up())});return(0,Tt.of)(l).pipe(k_())}(s.component,s.route,t,e,r)),up(s=>!0!==s,!0))}(l,r,s,n).pipe((0,Xs.Z)(m=>m&&function Z2(n){return"boolean"==typeof n}(m)?function aV(n,e,t,r){return(0,pn.H)(e).pipe(zI(s=>vy(function cV(n,e){return null!==n&&e&&e(new M2(n)),(0,Tt.of)(!0)}(s.route.parent,r),function uV(n,e){return null!==n&&e&&e(new x2(n)),(0,Tt.of)(!0)}(s.route,r),function dV(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function Q2(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>sO(()=>{const m=l.guards.map(v=>{const D=nD(l.node)??t,T=P_(v,D);return dp(function tV(n){return n&&sD(n.canActivateChild)}(T)?T.canActivateChild(r,n):D.runInContext(()=>T(r,n))).pipe(up())});return(0,Tt.of)(m).pipe(k_())}));return(0,Tt.of)(u).pipe(k_())}(n,s.path,t),function lV(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Tt.of)(!0);const s=r.map(u=>sO(()=>{const l=nD(e)??t,m=P_(u,l);return dp(function eV(n){return n&&sD(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(up())}));return(0,Tt.of)(s).pipe(k_())}(n,s.route,t))),up(s=>!0!==s,!0))}(r,u,n,e):(0,Tt.of)(m)),(0,et.T)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,v=>this.events.next(v)),(0,Ds.M)(v=>{if(u.guardsResult=v.guardsResult,jm(v.guardsResult))throw kO(0,v.guardsResult);const D=new C2(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.events.next(D)}),co(v=>!!v.guardsResult||(this.cancelNavigationTransition(v,"",3),!1)),Ox(v=>{if(v.guards.canActivateChecks.length)return(0,Tt.of)(v).pipe((0,Ds.M)(D=>{const T=new b2(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(T)}),(0,$n.n)(D=>{let T=!1;return(0,Tt.of)(D).pipe(function NV(n,e){return(0,Xs.Z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return(0,Tt.of)(t);let u=0;return(0,pn.H)(s).pipe(zI(l=>function xV(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!qO(s)&&(u[KI]=s.title),function RV(n,e,t,r){const s=function OV(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return(0,Tt.of)({});const u={};return(0,pn.H)(s).pipe((0,Xs.Z)(l=>function PV(n,e,t,r){const s=nD(e)??r,u=P_(n,s);return dp(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(up(),(0,Ds.M)(m=>{u[l]=m}))),px(1),function KL(n){return(0,et.T)(()=>n)}(u),Um(l=>BO(l)?ap.w:GI(l)))}(u,n,e,r).pipe((0,et.T)(l=>(n._resolvedData=l,n.data=xO(n,t).resolve,s&&qO(s)&&(n.data[KI]=s.title),null)))}(l.route,r,n,e)),(0,Ds.M)(()=>u++),px(1),(0,Xs.Z)(l=>u===s.length?(0,Tt.of)(t):ap.w))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Ds.M)({next:()=>T=!0,complete:()=>{T||this.cancelNavigationTransition(D,"",2)}}))}),(0,Ds.M)(D=>{const T=new T2(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(T)}))}),Ox(v=>{const D=T=>{const N=[];T.routeConfig?.loadComponent&&!T.routeConfig._loadedComponent&&N.push(this.configLoader.loadComponent(T.routeConfig).pipe((0,Ds.M)(L=>{T.component=L}),(0,et.T)(()=>{})));for(const L of T.children)N.push(...D(L));return N};return dx(D(v.targetSnapshot.root)).pipe(jT(),A_(1))}),Ox(()=>this.afterPreactivation()),(0,et.T)(v=>{const D=function L2(n,e,t){const r=tD(n,e._root,t?t._root:void 0);return new MO(r,e)}(t.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return this.currentTransition=u={...v,targetRouterState:D},u}),(0,Ds.M)(()=>{this.events.next(new wx)}),((n,e,t,r)=>(0,et.T)(s=>(new W2(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,v=>this.events.next(v),this.inputBindingEnabled),A_(1),(0,Ds.M)({next:v=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hp(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects))),t.titleStrategy?.updateTitle(v.targetRouterState.snapshot),v.resolve(!0)},complete:()=>{l=!0}}),function qL(n){return(0,Pi.N)((e,t)=>{(0,wa.Tg)(n).subscribe((0,Vn._)(t,()=>t.complete(),WL.l)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,Ds.M)(v=>{throw v}))),gx(()=>{l||m||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),Um(v=>{if(m=!0,LO(v))this.events.next(new JI(u.id,this.urlSerializer.serialize(u.extractedUrl),v.message,v.cancellationCode)),function B2(n){return LO(n)&&jm(n.url)}(v)?this.events.next(new Ix(v.url)):u.resolve(!1);else{this.events.next(new IA(u.id,this.urlSerializer.serialize(u.extractedUrl),v,u.targetSnapshot??void 0));try{u.resolve(t.errorHandler(v))}catch(D){u.reject(D)}}return ap.w}))}))}cancelNavigationTransition(t,r,s){const u=new JI(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XO(n){return n!==ZI}let YO=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[KI]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)(LV)},providedIn:"root"})}return n})(),LV=(()=>{class n extends YO{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(fu))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)(BV)},providedIn:"root"})}return n})();class UV{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let BV=(()=>{class n extends UV{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=h.xGo(n)))(s||n)}}();static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const NA=new h.nKC("",{providedIn:"root",factory:()=>({})});let jV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)($V)},providedIn:"root"})}return n})(),$V=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oD=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(oD||{});function ZO(n,e){n.events.pipe(co(t=>t instanceof hp||t instanceof JI||t instanceof IA||t instanceof R_),(0,et.T)(t=>t instanceof hp||t instanceof R_?oD.COMPLETE:t instanceof JI&&(0===t.code||1===t.code)?oD.REDIRECTING:oD.FAILED),co(t=>t!==oD.REDIRECTING),A_(1)).subscribe(()=>{e()})}function HV(n){throw n}function GV(n,e,t){return e.parse("/")}const zV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ya=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.WQX)(h.H3F),this.isNgZoneEnabled=!1,this._events=new bt.B,this.options=(0,h.WQX)(NA,{optional:!0})||{},this.pendingTasks=(0,h.WQX)(h.$K3),this.errorHandler=this.options.errorHandler||HV,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||GV,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.WQX)(jV),this.routeReuseStrategy=(0,h.WQX)(VV),this.titleStrategy=(0,h.WQX)(YO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.WQX)(L_,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.WQX)(MA),this.urlSerializer=(0,h.WQX)(qI),this.location=(0,h.WQX)(ze),this.componentInputBindingEnabled=!!(0,h.WQX)(CA,{optional:!0}),this.eventsSubscription=new hx.yU,this.isNgZoneEnabled=(0,h.WQX)(h.SKi)instanceof h.SKi&&h.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new x_,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:s}=this.navigationTransitions;if(null===s)return void(JO(r)&&this._events.next(r));if(r instanceof wA)XO(s.source)&&(this.browserUrlTree=s.extractedUrl);else if(r instanceof R_)this.rawUrlTree=s.rawUrl;else if(r instanceof TO){if("eager"===this.urlUpdateStrategy){if(!s.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl);this.setBrowserUrl(u,s)}this.browserUrlTree=s.urlAfterRedirects}}else if(r instanceof wx)this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects);else if(r instanceof JI)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(s);else if(r instanceof Ix){const u=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||XO(s.source)};this.scheduleNavigation(u,ZI,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}r instanceof IA&&this.restoreHistory(s,!0),r instanceof hp&&(this.navigated=!0),JO(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ZI,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const v={...s};delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Nx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:v}=r,D=v?this.currentUrlTree.fragment:l;let N,T=null;switch(m){case"merge":T={...this.currentUrlTree.queryParams,...u};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=u||null}null!==T&&(T=this.removeEmptyProps(T));try{N=_O(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),N=this.currentUrlTree.root}return EO(N,t,T,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=jm(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,ZI,null,r)}navigate(t,r={skipLocationChange:!1}){return function WV(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.wOt(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...zV}:!1===r?{...KV}:r,jm(t))return lO(this.currentUrlTree,t,s);const u=this.parseUrl(t);return lO(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,v,D;l?(m=l.resolve,v=l.reject,D=l.promise):D=new Promise((N,L)=>{m=N,v=L});const T=this.pendingTasks.add();return ZO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(T))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function JO(n){return!(n instanceof wx||n instanceof Ix)}let pp=(()=>{class n{constructor(t,r,s,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=m,this.href=null,this.commands=null,this.onChanges=new bt.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const v=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===v||"area"===v,this.isAnchorElement?this.subscription=t.events.subscribe(D=>{D instanceof hp&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(Ya),h.rXU(fp),h.kS0("tabindex"),h.rXU(h.sFG),h.rXU(h.aKT),h.rXU(Ue))};static#t=this.\u0275dir=h.FsC({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){1&r&&h.bIt("click",function(l){return s.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&h.BMQ("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",h.L39],skipLocationChange:["skipLocationChange","skipLocationChange",h.L39],replaceUrl:["replaceUrl","replaceUrl",h.L39],routerLink:"routerLink"},standalone:!0,features:[h.GFd,h.OA$]})}return n})();class eP{}let XV=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(co(t=>t instanceof hp),zI(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.Ol2)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,pn.H)(s).pipe((0,Mu.U)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Tt.of)(null);const u=s.pipe((0,Xs.Z)(l=>null===l?(0,Tt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,pn.H)([u,l]).pipe((0,Mu.U)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(Ya),h.KVO(h.Ql9),h.KVO(h.uvJ),h.KVO(eP),h.KVO(Px))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const kx=new h.nKC("");let tP=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hp?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof R_&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof AO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new AO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){h.QTQ()};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}return n})();function ih(n,e){return{\u0275kind:n,\u0275providers:e}}function rP(){const n=(0,h.WQX)(h.zZn);return e=>{const t=n.get(h.o8S);if(e!==t.components[0])return;const r=n.get(Ya),s=n.get(iP);1===n.get(Fx)&&r.initialNavigation(),n.get(sP,null,h.$GK.Optional)?.setUpPreloading(),n.get(kx,null,h.$GK.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const iP=new h.nKC("",{factory:()=>new bt.B}),Fx=new h.nKC("",{providedIn:"root",factory:()=>1}),sP=new h.nKC("");function eU(n){return ih(0,[{provide:sP,useExisting:XV},{provide:eP,useExisting:n}])}const oP=new h.nKC("ROUTER_FORROOT_GUARD"),nU=[ze,{provide:qI,useClass:mx},Ya,eD,{provide:fp,useFactory:function nP(n){return n.routerState.root},deps:[Ya]},Px,[]];function rU(){return new h.NEm("Router",Ya)}let aP=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[nU,[],{provide:L_,multi:!0,useValue:t},{provide:oP,useFactory:aU,deps:[[Ya,new h.Xx1,new h.kdw]]},{provide:NA,useValue:r||{}},r?.useHash?{provide:Ue,useClass:Re}:{provide:Ue,useClass:qe},{provide:kx,useFactory:()=>{const n=(0,h.WQX)(ni),e=(0,h.WQX)(h.SKi),t=(0,h.WQX)(NA),r=(0,h.WQX)(MA),s=(0,h.WQX)(qI);return t.scrollOffset&&n.setOffset(t.scrollOffset),new tP(s,r,n,e,t)}},r?.preloadingStrategy?eU(r.preloadingStrategy).\u0275providers:[],{provide:h.NEm,multi:!0,useFactory:rU},r?.initialNavigation?uU(r):[],r?.bindToComponentInputs?ih(8,[PO,{provide:CA,useExisting:PO}]).\u0275providers:[],[{provide:uP,useFactory:rP},{provide:h.iLQ,multi:!0,useExisting:uP}]]}}static forChild(t){return{ngModule:n,providers:[{provide:L_,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(oP,8))};static#t=this.\u0275mod=h.$C({type:n});static#n=this.\u0275inj=h.G2t({})}return n})();function aU(n){return"guarded"}function uU(n){return["disabled"===n.initialNavigation?ih(3,[{provide:h.hnV,multi:!0,useFactory:()=>{const e=(0,h.WQX)(Ya);return()=>{e.setUpLocationChangeListener()}}},{provide:Fx,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ih(2,[{provide:Fx,useValue:0},{provide:h.hnV,multi:!0,deps:[h.zZn],useFactory:e=>{const t=e.get(Pe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Ya),u=e.get(iP);ZO(s,()=>{r(!0)}),e.get(MA).afterPreactivation=()=>(r(!0),u.closed?(0,Tt.of)(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const uP=new h.nKC("");let Lx=(()=>{class n{loadLatest(){throw new Error("Method not implemented.")}constructor(t){this.afs=t}featuredPosts(){return this.afs.collection("posts",t=>t.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe((0,et.T)(t=>t.map(r=>{const s=r.payload.doc.data();return{id:r.payload.doc.id,data:s}})))}latest(){return this.afs.collection("posts",t=>t.orderBy("createdAt","desc")).snapshotChanges().pipe((0,et.T)(t=>t.map(r=>{const s=r.payload.doc.data();return{id:r.payload.doc.id,data:s}})))}categoryPost(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t)).snapshotChanges().pipe((0,et.T)(r=>r.map(s=>{const u=s.payload.doc.data();return{id:s.payload.doc.id,data:u}})))}singlePost(t){return this.afs.doc(`posts/${t}`).valueChanges()}similarPost(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t).limit(3)).snapshotChanges().pipe((0,et.T)(r=>r.map(s=>{const u=s.payload.doc.data();return{id:s.payload.doc.id,data:u}})))}countViews(t){const r={views:eR.A.firestore.FieldValue.increment(1)};this.afs.doc(`posts/${t}`).update(r).then(()=>{})}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(ZT))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lU(n,e){1&n&&(h.j41(0,"p",9)(1,"small"),h.EFF(2,"Featured"),h.k0s()())}const dU=function(n){return["/post",n]};function hU(n,e){if(1&n&&(h.j41(0,"div",1),h.nrm(1,"img",2),h.j41(2,"div",3)(3,"p",4)(4,"small"),h.EFF(5),h.k0s()(),h.DNE(6,lU,3,0,"p",5),h.j41(7,"p",6)(8,"small"),h.EFF(9),h.k0s()(),h.j41(10,"h5",7),h.EFF(11),h.k0s(),h.j41(12,"p"),h.EFF(13),h.k0s(),h.j41(14,"small",8),h.EFF(15),h.k0s()()()),2&n){const t=h.XpG();h.Y8G("routerLink",h.eq3(8,dU,t.postData.id)),h.R7$(1),h.FS9("src",t.postData.data.postImagePath,h.B4B),h.R7$(4),h.JRh(t.postData.data.category.category),h.R7$(1),h.Y8G("ngIf",t.postData.data.isFeatured),h.R7$(3),h.SpI("Views - ",t.postData.data.views,""),h.R7$(2),h.JRh(t.postData.data.title),h.R7$(2),h.JRh(t.postData.data.excerpt),h.R7$(2),h.SpI("LAST UPDATED - ",t.getCurrentDate(t.postData.data.createdAt),"")}}let Vx=(()=>{class n{constructor(){this.date=new Date,this.postData={id:"",data:{views:0,title:"",status:"",postImagePath:"",permalink:"",isFeatured:!1,excerpt:"",createdAt:{seconds:0,nanoseconds:0},content:"",category:{category:"",categoryId:""}}}}ngOnInit(){this.date=new Date(this.postData.data.createdAt.seconds)}getCurrentDate(t){return new Date(1e3*t.seconds+t.nanoseconds/1e6).toDateString()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-post-card"]],inputs:{postData:"postData"},decls:1,vars:1,consts:[["class","card shadow-effect mb-2 mx-auto",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect","mb-2","mx-auto",3,"routerLink"],["alt","post-image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"bg-light","text-danger",2,"display","inline-block","margin-right","7px"],["style","display: inline-block; margin-right: 7px;","class","bg-light text-success",4,"ngIf"],[1,"bg-light","text-info","text-inline",2,"display","inline-block","margin-right","7px"],[1,"mt-1"],[1,"bg-light","text-warning","text-center","ml-3"],[1,"bg-light","text-success",2,"display","inline-block","margin-right","7px"]],template:function(r,s){1&r&&h.DNE(0,hU,16,10,"div",0),2&r&&h.Y8G("ngIf",s.postData)},dependencies:[xs,pp],styles:[".card[_ngcontent-%COMP%]{max-width:400px;border:none;box-shadow:0 0 33px -10px #4772fe4d;min-height:500px;cursor:pointer}"]})}return n})();function fU(n,e){if(1&n&&(h.j41(0,"div",9),h.nrm(1,"app-post-card",10),h.k0s()),2&n){const t=e.$implicit;h.R7$(1),h.Y8G("postData",t)}}function pU(n,e){if(1&n&&(h.j41(0,"div",11),h.nrm(1,"app-post-card",10),h.k0s()),2&n){const t=e.$implicit;h.R7$(1),h.Y8G("postData",t)}}let gU=(()=>{class n{constructor(t){this.postService=t}ngOnInit(){this.postService.featuredPosts().subscribe(t=>{this.featuredPosts=[],t.forEach(r=>{this.featuredPosts.push({id:r.id,data:r.data})})}),this.postService.latest().subscribe(t=>{this.latestPosts=[],t.forEach(r=>{this.latestPosts.push({id:r.id,data:r.data})})})}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(Lx))};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-home"]],decls:18,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white"],["class","col-4",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-4"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(r,s){1&r&&(h.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),h.EFF(5,"Featured Posts"),h.k0s(),h.j41(6,"p",4),h.EFF(7,"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eum perspiciatis expedita porro quaerat sequi laborum provident adipisci, beatae explicabo at ratione assumenda incidunt quibusdam maxime quae impedit, tempore cum animi!"),h.k0s()()(),h.j41(8,"div",2),h.DNE(9,fU,2,1,"div",5),h.k0s()()(),h.j41(10,"section",6)(11,"div",7)(12,"h2"),h.EFF(13,"Latest Posts"),h.k0s(),h.j41(14,"p"),h.EFF(15,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Placeat, ad? Deserunt id, iste atque veritatis natus ipsam ducimus corrupti vel adipisci ullam recusandae, possimus sunt. Tempore temporibus in vitae excepturi."),h.k0s()(),h.j41(16,"div",2),h.DNE(17,pU,2,1,"div",8),h.k0s()()),2&r&&(h.R7$(9),h.Y8G("ngForOf",s.featuredPosts),h.R7$(8),h.Y8G("ngForOf",s.latestPosts))},dependencies:[Gi,Vx],styles:[".featured-section[_ngcontent-%COMP%]{padding-bottom:130px;background-color:var(--primary-color)}"]})}return n})();function mU(n,e){if(1&n&&(h.j41(0,"div",6),h.nrm(1,"app-post-card",7),h.k0s()),2&n){const t=e.$implicit;h.R7$(1),h.Y8G("postData",t)}}let yU=(()=>{class n{constructor(t,r){this.route=t,this.postService=r}ngOnInit(){this.route.params.subscribe(t=>{this.category=t,this.postService.categoryPost(t.id).subscribe(r=>{this.postsArray=[],r.forEach(s=>{this.postsArray.push({id:s.id,data:s.data})})})})}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(fp),h.rXU(Lx))};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-single-category"]],decls:9,vars:2,consts:[[1,"bg-theme","p-5"],[1,"container"],[1,"text-white"],[1,"container","mt-5","mb-5"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[3,"postData"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"div",1)(2,"h1",2),h.EFF(3),h.k0s(),h.j41(4,"p",2),h.EFF(5,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolore voluptatibus consequuntur!"),h.k0s()()(),h.j41(6,"div",3)(7,"div",4),h.DNE(8,mU,2,1,"div",5),h.k0s()()),2&r&&(h.R7$(3),h.JRh(s.category.category),h.R7$(5),h.Y8G("ngForOf",s.postsArray))},dependencies:[Gi,Vx]})}return n})(),vU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-comment-form"]],decls:17,vars:0,consts:[[1,"card","mt-5","shadow-effect"],[1,"card-body"],[1,"form-group","mb-3"],["for",""],["type","text","placeholder","Enter your name here",1,"form-control","shadow-effect"],["cols","30","rows","10","placeholder","Add your comment here",1,"form-control","shadow-effect"],[1,"btn","btn-info","btn-theme","text-white"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"div",1)(2,"h4"),h.EFF(3,"Leave a comment"),h.k0s(),h.j41(4,"p"),h.EFF(5,"You can leave a comment using this comment form"),h.k0s(),h.j41(6,"form")(7,"div",2)(8,"label",3),h.EFF(9,"Name"),h.k0s(),h.nrm(10,"input",4),h.k0s(),h.j41(11,"div",2)(12,"label",3),h.EFF(13,"Comment"),h.k0s(),h.nrm(14,"textarea",5),h.k0s(),h.j41(15,"button",6),h.EFF(16,"Add a comment"),h.k0s()()()())},dependencies:[kh,Mc,cd]})}return n})(),_U=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-comment-list"]],decls:46,vars:0,consts:[[1,"card","mb-5","mt-5","pb-5","shadow-effect"],[1,"card-body"],[1,"mt-3","mb-3"],[1,"comment-box","mt-3"],[1,"mb-0"],[1,"text-danger"],[2,"display","inline-block","margin-right","10px"],["href","#",1,"mt-1"],[2,"display","inline-block"],["href","#"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"div",1)(2,"h4",2),h.EFF(3,"Comments (10,300)"),h.k0s(),h.j41(4,"div",3)(5,"h6",4),h.EFF(6,"John Doe"),h.k0s(),h.j41(7,"small",5),h.EFF(8,"LAST UPDATED - AUG 20, 2024"),h.k0s(),h.j41(9,"div",2),h.EFF(10," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laudantium incidunt reiciendis saepe rem officiis! Vitae voluptas magni quidem totam odit rem dolore eum omnis, nisi aspernatur non facilis ipsum dolorem. "),h.k0s(),h.j41(11,"p",6)(12,"a",7),h.EFF(13,"Reply"),h.k0s()(),h.j41(14,"p",8)(15,"a",9),h.EFF(16,"View Reply"),h.k0s()(),h.nrm(17,"hr"),h.k0s(),h.j41(18,"div",3)(19,"h6",4),h.EFF(20,"John Doe"),h.k0s(),h.j41(21,"small",5),h.EFF(22,"LAST UPDATED - AUG 20, 2024"),h.k0s(),h.j41(23,"div",2),h.EFF(24," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laudantium incidunt reiciendis saepe rem officiis! Vitae voluptas magni quidem totam odit rem dolore eum omnis, nisi aspernatur non facilis ipsum dolorem. "),h.k0s(),h.j41(25,"p",6)(26,"a",7),h.EFF(27,"Reply"),h.k0s()(),h.j41(28,"p",8)(29,"a",9),h.EFF(30,"View Reply"),h.k0s()(),h.nrm(31,"hr"),h.k0s(),h.j41(32,"div",3)(33,"h6",4),h.EFF(34,"John Doe"),h.k0s(),h.j41(35,"small",5),h.EFF(36,"LAST UPDATED - AUG 20, 2024"),h.k0s(),h.j41(37,"div",2),h.EFF(38," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laudantium incidunt reiciendis saepe rem officiis! Vitae voluptas magni quidem totam odit rem dolore eum omnis, nisi aspernatur non facilis ipsum dolorem. "),h.k0s(),h.j41(39,"p",6)(40,"a",7),h.EFF(41,"Reply"),h.k0s()(),h.j41(42,"p",8)(43,"a",9),h.EFF(44,"View Reply"),h.k0s()(),h.nrm(45,"hr"),h.k0s()()())},styles:[".comment-box[_ngcontent-%COMP%]{padding:15px 35px;background-color:#f0f0f0}"]})}return n})();function EU(n,e){1&n&&(h.j41(0,"p",14)(1,"small"),h.EFF(2,"Featured"),h.k0s()())}function wU(n,e){if(1&n&&(h.j41(0,"div"),h.nrm(1,"app-post-card",15),h.k0s()),2&n){const t=e.$implicit;h.R7$(1),h.Y8G("postData",t)}}const IU=[{path:"",component:gU},{path:"category/:category/:id",component:yU},{path:"post/:id",component:(()=>{class n{constructor(t,r){this.route=t,this.postService=r,this.article={id:"",data:{views:0,title:"",status:"",postImagePath:"",permalink:"",isFeatured:!1,excerpt:"",createdAt:{},content:"",category:{category:"",categoryId:""}}},this.similarPosts=[]}ngOnInit(){this.route.params.subscribe(t=>{this.postService.countViews(t.id),this.postService.singlePost(t.id).subscribe(r=>{this.loadSimilarPost(r.category.categoryId);const u=r.category,l=r.content,m=r.createdAt,v=r.excerpt,D=r.isFeatured,T=r.permalink,N=r.postImagePath,L=r.status,G=r.title,Q=r.views;this.article.id=t.id,this.article.data.category=u,this.article.data.content=l,this.article.data.createdAt=m,this.article.data.excerpt=v,this.article.data.isFeatured=D,this.article.data.permalink=T,this.article.data.postImagePath=N,this.article.data.status=L,this.article.data.title=G,this.article.data.views=Q})})}getDate(t){return new Date(1e3*t.seconds+t.nanoseconds/1e6).toDateString()}loadSimilarPost(t){this.postService.similarPost(t).subscribe(r=>{this.similarPosts=[],r.forEach(s=>{this.similarPosts.push({id:s.id,data:s.data})})})}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(fp),h.rXU(Lx))};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-single-post"]],decls:23,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-md-9"],[1,"card","shadow-effect"],["alt","",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center",2,"display","inline-block","margin-right","7px"],["style","display: inline-block; margin-right: 7px;","class","bg-light text-success text-center",4,"ngIf"],[1,"bg-light","text-info","text-center",2,"display","inline-block","margin-right","7px"],[1,"bg-light","text-warning","text-center",2,"display","inline-block","margin-right","7px"],[1,"mt-3","mb-3"],[3,"innerHtml"],[1,"col-md-3"],[4,"ngFor","ngForOf"],[1,"bg-light","text-success","text-center",2,"display","inline-block","margin-right","7px"],[3,"postData"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h.nrm(4,"img",4),h.j41(5,"div",5)(6,"p",6)(7,"small"),h.EFF(8),h.k0s()(),h.DNE(9,EU,3,0,"p",7),h.j41(10,"p",8)(11,"small"),h.EFF(12),h.k0s()(),h.j41(13,"p",9)(14,"small"),h.EFF(15),h.k0s()(),h.j41(16,"h1",10),h.EFF(17),h.k0s(),h.nrm(18,"p",11),h.k0s()(),h.nrm(19,"app-comment-form")(20,"app-comment-list"),h.k0s(),h.j41(21,"div",12),h.DNE(22,wU,2,1,"div",13),h.k0s()()()),2&r&&(h.R7$(4),h.FS9("src",s.article.data.postImagePath,h.B4B),h.R7$(4),h.JRh(s.article.data.category.category),h.R7$(1),h.Y8G("ngIf",s.article.data.isFeatured),h.R7$(3),h.SpI("Views - ",s.article.data.views,""),h.R7$(3),h.SpI("LAST UPDATED - ",s.getDate(s.article.data.createdAt),""),h.R7$(2),h.JRh(s.article.data.title),h.R7$(1),h.Y8G("innerHtml",s.article.data.content,h.npT),h.R7$(4),h.Y8G("ngForOf",s.similarPosts))},dependencies:[Gi,xs,vU,_U,Vx]})}return n})()},{path:"about",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-about-us"]],decls:10,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,s){1&r&&(h.j41(0,"section",0)(1,"div",1)(2,"h1",2),h.EFF(3,"About Us"),h.k0s(),h.j41(4,"div",3)(5,"p"),h.EFF(6,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Sequi, porro aut asperiores impedit ut nisi hic eveniet quia sunt, quod rerum eos odit totam enim vero unde mollitia molestias? Modi? Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae ipsum nulla fugit delectus rem perferendis aliquid explicabo debitis incidunt culpa ut maiores blanditiis eos recusandae, optio sint, dolore voluptatem perspiciatis! Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos molestiae minima perferendis rem unde necessitatibus aut commodi perspiciatis vel, aspernatur, iure debitis ipsa modi voluptatibus facilis alias tempora eaque possimus?"),h.k0s(),h.j41(7,"div",4)(8,"button",5),h.EFF(9,"Back to home"),h.k0s()()()()())}})}return n})()},{path:"term-conditions",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-terms-and-conditions"]],decls:10,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],["routerLink","/",1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,s){1&r&&(h.j41(0,"section",0)(1,"div",1)(2,"h1",2),h.EFF(3,"Terms and Conditions"),h.k0s(),h.j41(4,"div",3)(5,"p"),h.EFF(6,"The only terms and conditions here is that you thus agree to REALLY...DO...ACTUALLY...read the blog posts!"),h.k0s(),h.j41(7,"div",4)(8,"button",5),h.EFF(9,"Back to home"),h.k0s()()()()())},dependencies:[pp]})}return n})()},{path:"contact",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-contact-us"]],decls:2,vars:0,template:function(r,s){1&r&&(h.j41(0,"p"),h.EFF(1,"contact-us works!"),h.k0s())}})}return n})()}];let DU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.$C({type:n});static#n=this.\u0275inj=h.G2t({imports:[aP.forRoot(IU),aP]})}return n})(),CU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center"],["routerLink","/",1,"site-logo"]],template:function(r,s){1&r&&(h.j41(0,"header",0)(1,"div",1)(2,"a",2),h.EFF(3,"FREDDIE'S BLOG"),h.k0s()()())},dependencies:[pp],styles:["header[_ngcontent-%COMP%]{height:100px}.site-logo[_ngcontent-%COMP%]{font-size:1.5em}"]})}return n})(),bU=(()=>{class n{constructor(t){this.afs=t}loadData(){return this.afs.collection("categories").snapshotChanges().pipe((0,et.T)(t=>t.map(r=>{const s=r.payload.doc.data();return{id:r.payload.doc.id,data:s}})))}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(ZT))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const TU=function(n,e){return["/category",n,e]};function AU(n,e){if(1&n&&(h.j41(0,"ul",4)(1,"li",5)(2,"a",6),h.EFF(3),h.k0s()()()),2&n){const t=e.$implicit;h.R7$(2),h.Y8G("routerLink",h.l_i(2,TU,t.category,t.id)),h.R7$(1),h.JRh(t.category)}}let SU=(()=>{class n{constructor(t){this.catService=t}ngOnInit(){this.catService.loadData().subscribe(t=>{this.categoryArray=[],t.forEach(r=>{this.categoryArray.push({id:r.id,category:r.data.category})})})}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(bU))};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-category-navbar"]],decls:4,vars:1,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-center"],["class","navbar-nav",4,"ngFor","ngForOf"],[1,"navbar-nav"],[1,"nav-item","ml-3"],[1,"nav-link",3,"routerLink"]],template:function(r,s){1&r&&(h.j41(0,"nav",0)(1,"div",1)(2,"div",2),h.DNE(3,AU,4,5,"ul",3),h.k0s()()()),2&r&&(h.R7$(3),h.Y8G("ngForOf",s.categoryArray))},dependencies:[Gi,pp],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase}"]})}return n})(),MU=(()=>{class n{constructor(){}ngOnInit(){}getYear(){return(new Date).getFullYear()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-footer"]],decls:22,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"site-logo"],[1,"nav","justify-content-center"],[1,"nav-item"],["routerLink","/",1,"nav-link"],["routerLink","/about",1,"nav-link"],["routerLink","/term-conditions",1,"nav-link"],[1,"mb-2","mt-2"]],template:function(r,s){1&r&&(h.j41(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),h.EFF(5,"FREDDIE'S BLOG"),h.k0s(),h.j41(6,"div")(7,"ul",4)(8,"li",5)(9,"a",6),h.EFF(10,"Home"),h.k0s()(),h.j41(11,"li",5)(12,"a",7),h.EFF(13,"About"),h.k0s()(),h.j41(14,"li",5)(15,"a",8),h.EFF(16,"Terms & Conditions"),h.k0s()(),h.j41(17,"li",5)(18,"a",6),h.EFF(19,"Contact"),h.k0s()()()(),h.j41(20,"p",9),h.EFF(21),h.k0s()()()()()),2&r&&(h.R7$(21),h.SpI("Copyright \xa9 ",s.getYear()," Freddie's Blog"))},dependencies:[pp],styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{font-size:1.2em}"]})}return n})(),NU=(()=>{class n{constructor(t,r){this.afs=t,this.toastr=r}addSubscribers(t){this.afs.collection("subscribers").add(t).then(()=>{this.toastr.success("You have subscribed successfully!")})}checkSubscriber(t){return this.afs.collection("subscribers",r=>r.where("email","==",t)).get()}static#e=this.\u0275fac=function(r){return new(r||n)(h.KVO(ZT),h.KVO(eA))};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xU(n,e){1&n&&(h.j41(0,"div"),h.EFF(1,"Name is required"),h.k0s())}function RU(n,e){if(1&n&&(h.j41(0,"div",15),h.DNE(1,xU,2,0,"div",16),h.k0s()),2&n){h.XpG();const t=h.sdS(5);h.R7$(1),h.Y8G("ngIf",null==t.errors?null:t.errors.required)}}function OU(n,e){1&n&&(h.j41(0,"div"),h.EFF(1,"Email is required"),h.k0s())}function PU(n,e){1&n&&(h.j41(0,"div"),h.EFF(1,"Please enter a valid email address"),h.k0s())}function kU(n,e){if(1&n&&(h.j41(0,"div",15),h.DNE(1,OU,2,0,"div",16),h.DNE(2,PU,2,0,"div",16),h.k0s()),2&n){h.XpG();const t=h.sdS(9);h.R7$(1),h.Y8G("ngIf",null==t.errors?null:t.errors.required),h.R7$(1),h.Y8G("ngIf",null==t.errors?null:t.errors.email)}}const cP=function(n){return{"is-invalid":n}};function FU(n,e){if(1&n){const t=h.RV6();h.j41(0,"form",5,6),h.bIt("ngSubmit",function(){h.eBV(t);const s=h.sdS(1),u=h.XpG();return h.Njj(u.onSubmit(s))}),h.j41(2,"div",7)(3,"div",8),h.nrm(4,"input",9,10),h.DNE(6,RU,2,1,"div",11),h.k0s(),h.j41(7,"div",8),h.nrm(8,"input",12,13),h.DNE(10,kU,3,2,"div",11),h.k0s(),h.j41(11,"button",14),h.EFF(12,"SUBSCRIBE"),h.k0s()()()}if(2&n){const t=h.sdS(1),r=h.sdS(5),s=h.sdS(9);h.R7$(4),h.Y8G("ngClass",h.eq3(5,cP,r.touched&&r.invalid)),h.R7$(2),h.Y8G("ngIf",r.touched&&r.invalid),h.R7$(2),h.Y8G("ngClass",h.eq3(7,cP,s.touched&&s.invalid)),h.R7$(2),h.Y8G("ngIf",s.touched&&s.invalid),h.R7$(1),h.Y8G("disabled",t.invalid)}}let LU=(()=>{class n{constructor(t,r){this.subscriberService=t,this.toastr=r,this.isSubscribed=!1}ngOnInit(){}onSubmit(t){const r={name:t.value.name,email:t.value.email};this.subscriberService.checkSubscriber(r.email).subscribe(s=>{s.empty?(this.subscriberService.addSubscribers(r),this.isSubscribed=!0):this.toastr.warning(`User with email ${r.email} is already subscribed!`)}),t.reset()}static#e=this.\u0275fac=function(r){return new(r||n)(h.rXU(NU),h.rXU(eA))};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-subscription-form"]],decls:8,vars:1,consts:[[1,"card","shadow-effect"],[1,"card-body"],[1,"text-center","mt-3","mb-5"],[1,"m-auto","subs-text"],["class","mb-5 mt-5",3,"ngSubmit",4,"ngIf"],[1,"mb-5","mt-5",3,"ngSubmit"],["subForm","ngForm"],[1,"row"],[1,"col-5"],["type","text","placeholder","your name","name","name","ngModel","","required","",1,"form-control",3,"ngClass"],["Name","ngModel"],["class","text-danger",4,"ngIf"],["type","email","placeholder","your email","name","email","ngModel","","required","","email","",1,"form-control",3,"ngClass"],["Email","ngModel"],["type","submit",1,"btn","btn-info","col-2","btn-theme","text-white",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),h.EFF(4,"SUBSCRIPTION FORM"),h.k0s(),h.j41(5,"p",3),h.EFF(6,"Lorem ipsum dolor sit amet consectetur adipisicing elit."),h.k0s(),h.DNE(7,FU,13,9,"form",4),h.k0s()()()),2&r&&(h.R7$(7),h.Y8G("ngIf",!s.isSubscribed))},dependencies:[iu,xs,kh,Po,Sc,Mc,gd,_,ly,cd],styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color)}.subs-text[_ngcontent-%COMP%]{width:500px}"]})}return n})(),VU=(()=>{class n{constructor(){this.title="blogApp"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.VBU({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"]],template:function(r,s){1&r&&(h.nrm(0,"app-header")(1,"app-category-navbar"),h.j41(2,"div",0),h.nrm(3,"router-outlet"),h.k0s(),h.j41(4,"div",1)(5,"div",2),h.nrm(6,"app-subscription-form"),h.k0s()(),h.nrm(7,"app-footer"))},dependencies:[Sx,CU,SU,MU,LU],styles:[".app-body[_ngcontent-%COMP%]{min-height:35vh;margin-top:150px}"]})}return n})();const UU_firebaseConfig={apiKey:"AIzaSyDe7lNlLtawlwQLnpcgiajX7m7203sCjmA",authDomain:"freddie-blog-base.firebaseapp.com",projectId:"freddie-blog-base",storageBucket:"freddie-blog-base.appspot.com",messagingSenderId:"512641764244",appId:"1:512641764244:web:f9ba9de21b3de42fcb9d81"};let BU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.$C({type:n,bootstrap:[VU]});static#n=this.\u0275inj=h.G2t({imports:[Us,DU,hs.bf.initializeApp(UU_firebaseConfig),wk,md,zk.forRoot(),BL]})}return n})();cr().bootstrapModule(BU).catch(n=>console.error(n))},4412:(ht,Te,O)=>{O.d(Te,{t:()=>Z});var h=O(1413);class Z extends h.B{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const re=super._subscribe(ee);return!re.closed&&ee.next(this._value),re}getValue(){const{hasError:ee,thrownError:re,_value:le}=this;if(ee)throw re;return this._throwIfClosed(),le}next(ee){super.next(this._value=ee)}}},1985:(ht,Te,O)=>{O.d(Te,{c:()=>Pe});var h=O(7707),Z=O(8359),P=O(3494),ee=O(1203),re=O(1026),le=O(8071),ge=O(9786);let Pe=(()=>{class X{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const qe=new X;return qe.source=this,qe.operator=Se,qe}subscribe(Se,qe,Re){const ze=function $(X){return X&&X instanceof h.vU||function V(X){return X&&(0,le.T)(X.next)&&(0,le.T)(X.error)&&(0,le.T)(X.complete)}(X)&&(0,Z.Uv)(X)}(Se)?Se:new h.Ms(Se,qe,Re);return(0,ge.Y)(()=>{const{operator:Ve,source:Et}=this;ze.add(Ve?Ve.call(ze,Et):Et?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Se){try{return this._subscribe(Se)}catch(qe){Se.error(qe)}}forEach(Se,qe){return new(qe=he(qe))((Re,ze)=>{const Ve=new h.Ms({next:Et=>{try{Se(Et)}catch(ft){ze(ft),Ve.unsubscribe()}},error:ze,complete:Re});this.subscribe(Ve)})}_subscribe(Se){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Se)}[P.s](){return this}pipe(...Se){return(0,ee.m)(Se)(this)}toPromise(Se){return new(Se=he(Se))((qe,Re)=>{let ze;this.subscribe(Ve=>ze=Ve,Ve=>Re(Ve),()=>qe(ze))})}}return X.create=Ue=>new X(Ue),X})();function he(X){var Ue;return null!==(Ue=X??re.$.Promise)&&void 0!==Ue?Ue:Promise}},1413:(ht,Te,O)=>{O.d(Te,{B:()=>ge});var h=O(1985),Z=O(8359);const ee=(0,O(1853).L)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=O(7908),le=O(9786);let ge=(()=>{class he extends h.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const X=new Pe(this,this);return X.operator=$,X}_throwIfClosed(){if(this.closed)throw new ee}next($){(0,le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next($)}})}error($){(0,le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:X}=this;for(;X.length;)X.shift().error($)}})}complete(){(0,le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:X,isStopped:Ue,observers:Se}=this;return X||Ue?Z.Kn:(this.currentObservers=null,Se.push($),new Z.yU(()=>{this.currentObservers=null,(0,re.o)(Se,$)}))}_checkFinalizedStatuses($){const{hasError:X,thrownError:Ue,isStopped:Se}=this;X?$.error(Ue):Se&&$.complete()}asObservable(){const $=new h.c;return $.source=this,$}}return he.create=(V,$)=>new Pe(V,$),he})();class Pe extends ge{constructor(V,$){super(),this.destination=V,this.source=$}next(V){var $,X;null===(X=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===X||X.call($,V)}error(V){var $,X;null===(X=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===X||X.call($,V)}complete(){var V,$;null===($=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===$||$.call(V)}_subscribe(V){var $,X;return null!==(X=null===($=this.source)||void 0===$?void 0:$.subscribe(V))&&void 0!==X?X:Z.Kn}}},7707:(ht,Te,O)=>{O.d(Te,{Ms:()=>Re,vU:()=>X});var h=O(8071),Z=O(8359),P=O(1026),ee=O(5334),re=O(5343);const le=he("C",void 0,void 0);function he(ne,_e,te){return{kind:ne,value:_e,error:te}}var V=O(9270),$=O(9786);class X extends Z.yU{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Z.Uv)(_e)&&_e.add(this)):this.destination=ft}static create(_e,te,Ce){return new Re(_e,te,Ce)}next(_e){this.isStopped?Et(function Pe(ne){return he("N",ne,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Et(function ge(ne){return he("E",void 0,ne)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Et(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Se(ne,_e){return Ue.call(ne,_e)}class qe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:te}=this;if(te.next)try{te.next(_e)}catch(Ce){ze(Ce)}}error(_e){const{partialObserver:te}=this;if(te.error)try{te.error(_e)}catch(Ce){ze(Ce)}else ze(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(te){ze(te)}}}class Re extends X{constructor(_e,te,Ce){let Fe;if(super(),(0,h.T)(_e)||!_e)Fe={next:_e??void 0,error:te??void 0,complete:Ce??void 0};else{let Ke;this&&P.$.useDeprecatedNextContext?(Ke=Object.create(_e),Ke.unsubscribe=()=>this.unsubscribe(),Fe={next:_e.next&&Se(_e.next,Ke),error:_e.error&&Se(_e.error,Ke),complete:_e.complete&&Se(_e.complete,Ke)}):Fe=_e}this.destination=new qe(Fe)}}function ze(ne){P.$.useDeprecatedSynchronousErrorHandling?(0,$.l)(ne):(0,ee.m)(ne)}function Et(ne,_e){const{onStoppedNotification:te}=P.$;te&&V.f.setTimeout(()=>te(ne,_e))}const ft={closed:!0,next:re.l,error:function Ve(ne){throw ne},complete:re.l}},8359:(ht,Te,O)=>{O.d(Te,{Kn:()=>le,yU:()=>re,Uv:()=>ge});var h=O(8071);const P=(0,O(1853).L)(he=>function($){he(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((X,Ue)=>`${Ue+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ee=O(7908);class re{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Se of $)Se.remove(this);else $.remove(this);const{initialTeardown:X}=this;if((0,h.T)(X))try{X()}catch(Se){V=Se instanceof P?Se.errors:[Se]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Se of Ue)try{Pe(Se)}catch(qe){V=V??[],qe instanceof P?V=[...V,...qe.errors]:V.push(qe)}}if(V)throw new P(V)}}add(V){var $;if(V&&V!==this)if(this.closed)Pe(V);else{if(V instanceof re){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(V)}}_hasParent(V){const{_parentage:$}=this;return $===V||Array.isArray($)&&$.includes(V)}_addParent(V){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(V),$):$?[$,V]:V}_removeParent(V){const{_parentage:$}=this;$===V?this._parentage=null:Array.isArray($)&&(0,ee.o)($,V)}remove(V){const{_finalizers:$}=this;$&&(0,ee.o)($,V),V instanceof re&&V._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const le=re.EMPTY;function ge(he){return he instanceof re||he&&"closed"in he&&(0,h.T)(he.remove)&&(0,h.T)(he.add)&&(0,h.T)(he.unsubscribe)}function Pe(he){(0,h.T)(he)?he():he.unsubscribe()}},1026:(ht,Te,O)=>{O.d(Te,{$:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},983:(ht,Te,O)=>{O.d(Te,{w:()=>Z});const Z=new(O(1985).c)(re=>re.complete())},8455:(ht,Te,O)=>{O.d(Te,{H:()=>_e});var h=O(8750),Z=O(941),P=O(6745),le=O(1985),Pe=O(4761),he=O(8071),V=O(5225);function X(te,Ce){if(!te)throw new Error("Iterable cannot be null");return new le.c(Fe=>{(0,V.N)(Fe,Ce,()=>{const Ke=te[Symbol.asyncIterator]();(0,V.N)(Fe,Ce,()=>{Ke.next().then(ue=>{ue.done?Fe.complete():Fe.next(ue.value)})},0,!0)})})}var Ue=O(5055),Se=O(9858),qe=O(7441),Re=O(5397),ze=O(7953),Ve=O(591),Et=O(5196);function _e(te,Ce){return Ce?function ne(te,Ce){if(null!=te){if((0,Ue.l)(te))return function ee(te,Ce){return(0,h.Tg)(te).pipe((0,P._)(Ce),(0,Z.Q)(Ce))}(te,Ce);if((0,qe.X)(te))return function ge(te,Ce){return new le.c(Fe=>{let Ke=0;return Ce.schedule(function(){Ke===te.length?Fe.complete():(Fe.next(te[Ke++]),Fe.closed||this.schedule())})})}(te,Ce);if((0,Se.y)(te))return function re(te,Ce){return(0,h.Tg)(te).pipe((0,P._)(Ce),(0,Z.Q)(Ce))}(te,Ce);if((0,ze.T)(te))return X(te,Ce);if((0,Re.x)(te))return function $(te,Ce){return new le.c(Fe=>{let Ke;return(0,V.N)(Fe,Ce,()=>{Ke=te[Pe.l](),(0,V.N)(Fe,Ce,()=>{let ue,Ct;try{({value:ue,done:Ct}=Ke.next())}catch(Gt){return void Fe.error(Gt)}Ct?Fe.complete():Fe.next(ue)},0,!0)}),()=>(0,he.T)(Ke?.return)&&Ke.return()})}(te,Ce);if((0,Et.U)(te))return function ft(te,Ce){return X((0,Et.C)(te),Ce)}(te,Ce)}throw(0,Ve.L)(te)}(te,Ce):(0,h.Tg)(te)}},8750:(ht,Te,O)=>{O.d(Te,{Tg:()=>Ue});var h=O(1635),Z=O(7441),P=O(9858),ee=O(1985),re=O(5055),le=O(7953),ge=O(591),Pe=O(5397),he=O(5196),V=O(8071),$=O(5334),X=O(3494);function Ue(ne){if(ne instanceof ee.c)return ne;if(null!=ne){if((0,re.l)(ne))return function Se(ne){return new ee.c(_e=>{const te=ne[X.s]();if((0,V.T)(te.subscribe))return te.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ne);if((0,Z.X)(ne))return function qe(ne){return new ee.c(_e=>{for(let te=0;te<ne.length&&!_e.closed;te++)_e.next(ne[te]);_e.complete()})}(ne);if((0,P.y)(ne))return function Re(ne){return new ee.c(_e=>{ne.then(te=>{_e.closed||(_e.next(te),_e.complete())},te=>_e.error(te)).then(null,$.m)})}(ne);if((0,le.T)(ne))return Ve(ne);if((0,Pe.x)(ne))return function ze(ne){return new ee.c(_e=>{for(const te of ne)if(_e.next(te),_e.closed)return;_e.complete()})}(ne);if((0,he.U)(ne))return function Et(ne){return Ve((0,he.C)(ne))}(ne)}throw(0,ge.L)(ne)}function Ve(ne){return new ee.c(_e=>{(function ft(ne,_e){var te,Ce,Fe,Ke;return(0,h.sH)(this,void 0,void 0,function*(){try{for(te=(0,h.xN)(ne);!(Ce=yield te.next()).done;)if(_e.next(Ce.value),_e.closed)return}catch(ue){Fe={error:ue}}finally{try{Ce&&!Ce.done&&(Ke=te.return)&&(yield Ke.call(te))}finally{if(Fe)throw Fe.error}}_e.complete()})})(ne,_e).catch(te=>_e.error(te))})}},7786:(ht,Te,O)=>{O.d(Te,{h:()=>le});var h=O(6365),Z=O(8750),P=O(983),ee=O(3794),re=O(8455);function le(...ge){const Pe=(0,ee.lI)(ge),he=(0,ee.R0)(ge,1/0),V=ge;return V.length?1===V.length?(0,Z.Tg)(V[0]):(0,h.U)(he)((0,re.H)(V,Pe)):P.w}},7673:(ht,Te,O)=>{O.d(Te,{of:()=>P});var h=O(3794),Z=O(8455);function P(...ee){const re=(0,h.lI)(ee);return(0,Z.H)(ee,re)}},4360:(ht,Te,O)=>{O.d(Te,{_:()=>Z});var h=O(7707);function Z(ee,re,le,ge,Pe){return new P(ee,re,le,ge,Pe)}class P extends h.vU{constructor(re,le,ge,Pe,he,V){super(re),this.onFinalize=he,this.shouldUnsubscribe=V,this._next=le?function($){try{le($)}catch(X){re.error(X)}}:super._next,this._error=Pe?function($){try{Pe($)}catch(X){re.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch($){re.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},3294:(ht,Te,O)=>{O.d(Te,{F:()=>ee});var h=O(3669),Z=O(9974),P=O(4360);function ee(le,ge=h.D){return le=le??re,(0,Z.N)((Pe,he)=>{let V,$=!0;Pe.subscribe((0,P._)(he,X=>{const Ue=ge(X);($||!le(V,Ue))&&($=!1,V=Ue,he.next(X))}))})}function re(le,ge){return le===ge}},6354:(ht,Te,O)=>{O.d(Te,{T:()=>P});var h=O(9974),Z=O(4360);function P(ee,re){return(0,h.N)((le,ge)=>{let Pe=0;le.subscribe((0,Z._)(ge,he=>{ge.next(ee.call(re,he,Pe++))}))})}},6365:(ht,Te,O)=>{O.d(Te,{U:()=>P});var h=O(1397),Z=O(3669);function P(ee=1/0){return(0,h.Z)(Z.D,ee)}},1397:(ht,Te,O)=>{O.d(Te,{Z:()=>Pe});var h=O(6354),Z=O(8750),P=O(9974),ee=O(5225),re=O(4360),ge=O(8071);function Pe(he,V,$=1/0){return(0,ge.T)(V)?Pe((X,Ue)=>(0,h.T)((Se,qe)=>V(X,Se,Ue,qe))((0,Z.Tg)(he(X,Ue))),$):("number"==typeof V&&($=V),(0,P.N)((X,Ue)=>function le(he,V,$,X,Ue,Se,qe,Re){const ze=[];let Ve=0,Et=0,ft=!1;const ne=()=>{ft&&!ze.length&&!Ve&&V.complete()},_e=Ce=>Ve<X?te(Ce):ze.push(Ce),te=Ce=>{Se&&V.next(Ce),Ve++;let Fe=!1;(0,Z.Tg)($(Ce,Et++)).subscribe((0,re._)(V,Ke=>{Ue?.(Ke),Se?_e(Ke):V.next(Ke)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Ve--;ze.length&&Ve<X;){const Ke=ze.shift();qe?(0,ee.N)(V,qe,()=>te(Ke)):te(Ke)}ne()}catch(Ke){V.error(Ke)}}))};return he.subscribe((0,re._)(V,_e,()=>{ft=!0,ne()})),()=>{Re?.()}}(X,Ue,he,$)))}},941:(ht,Te,O)=>{O.d(Te,{Q:()=>ee});var h=O(5225),Z=O(9974),P=O(4360);function ee(re,le=0){return(0,Z.N)((ge,Pe)=>{ge.subscribe((0,P._)(Pe,he=>(0,h.N)(Pe,re,()=>Pe.next(he),le),()=>(0,h.N)(Pe,re,()=>Pe.complete(),le),he=>(0,h.N)(Pe,re,()=>Pe.error(he),le)))})}},7647:(ht,Te,O)=>{O.d(Te,{u:()=>re});var h=O(8750),Z=O(1413),P=O(7707),ee=O(9974);function re(ge={}){const{connector:Pe=(()=>new Z.B),resetOnError:he=!0,resetOnComplete:V=!0,resetOnRefCountZero:$=!0}=ge;return X=>{let Ue,Se,qe,Re=0,ze=!1,Ve=!1;const Et=()=>{Se?.unsubscribe(),Se=void 0},ft=()=>{Et(),Ue=qe=void 0,ze=Ve=!1},ne=()=>{const _e=Ue;ft(),_e?.unsubscribe()};return(0,ee.N)((_e,te)=>{Re++,!Ve&&!ze&&Et();const Ce=qe=qe??Pe();te.add(()=>{Re--,0===Re&&!Ve&&!ze&&(Se=le(ne,$))}),Ce.subscribe(te),!Ue&&Re>0&&(Ue=new P.Ms({next:Fe=>Ce.next(Fe),error:Fe=>{Ve=!0,Et(),Se=le(ft,he,Fe),Ce.error(Fe)},complete:()=>{ze=!0,Et(),Se=le(ft,V),Ce.complete()}}),(0,h.Tg)(_e).subscribe(Ue))})(X)}}function le(ge,Pe,...he){if(!0===Pe)return void ge();if(!1===Pe)return;const V=new P.Ms({next:()=>{V.unsubscribe(),ge()}});return(0,h.Tg)(Pe(...he)).subscribe(V)}},6745:(ht,Te,O)=>{O.d(Te,{_:()=>Z});var h=O(9974);function Z(P,ee=0){return(0,h.N)((re,le)=>{le.add(P.schedule(()=>re.subscribe(le),ee))})}},5558:(ht,Te,O)=>{O.d(Te,{n:()=>ee});var h=O(8750),Z=O(9974),P=O(4360);function ee(re,le){return(0,Z.N)((ge,Pe)=>{let he=null,V=0,$=!1;const X=()=>$&&!he&&Pe.complete();ge.subscribe((0,P._)(Pe,Ue=>{he?.unsubscribe();let Se=0;const qe=V++;(0,h.Tg)(re(Ue,qe)).subscribe(he=(0,P._)(Pe,Re=>Pe.next(le?le(Ue,Re,qe,Se++):Re),()=>{he=null,X()}))},()=>{$=!0,X()}))})}},8141:(ht,Te,O)=>{O.d(Te,{M:()=>re});var h=O(8071),Z=O(9974),P=O(4360),ee=O(3669);function re(le,ge,Pe){const he=(0,h.T)(le)||ge||Pe?{next:le,error:ge,complete:Pe}:le;return he?(0,Z.N)((V,$)=>{var X;null===(X=he.subscribe)||void 0===X||X.call(he);let Ue=!0;V.subscribe((0,P._)($,Se=>{var qe;null===(qe=he.next)||void 0===qe||qe.call(he,Se),$.next(Se)},()=>{var Se;Ue=!1,null===(Se=he.complete)||void 0===Se||Se.call(he),$.complete()},Se=>{var qe;Ue=!1,null===(qe=he.error)||void 0===qe||qe.call(he,Se),$.error(Se)},()=>{var Se,qe;Ue&&(null===(Se=he.unsubscribe)||void 0===Se||Se.call(he)),null===(qe=he.finalize)||void 0===qe||qe.call(he)}))}):ee.D}},6780:(ht,Te,O)=>{O.d(Te,{R:()=>re});var h=O(8359);class Z extends h.yU{constructor(ge,Pe){super()}schedule(ge,Pe=0){return this}}const P={setInterval(le,ge,...Pe){const{delegate:he}=P;return he?.setInterval?he.setInterval(le,ge,...Pe):setInterval(le,ge,...Pe)},clearInterval(le){const{delegate:ge}=P;return(ge?.clearInterval||clearInterval)(le)},delegate:void 0};var ee=O(7908);class re extends Z{constructor(ge,Pe){super(ge,Pe),this.scheduler=ge,this.work=Pe,this.pending=!1}schedule(ge,Pe=0){var he;if(this.closed)return this;this.state=ge;const V=this.id,$=this.scheduler;return null!=V&&(this.id=this.recycleAsyncId($,V,Pe)),this.pending=!0,this.delay=Pe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId($,this.id,Pe),this}requestAsyncId(ge,Pe,he=0){return P.setInterval(ge.flush.bind(ge,this),he)}recycleAsyncId(ge,Pe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return Pe;null!=Pe&&P.clearInterval(Pe)}execute(ge,Pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ge,Pe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,Pe){let V,he=!1;try{this.work(ge)}catch($){he=!0,V=$||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:ge,scheduler:Pe}=this,{actions:he}=Pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.o)(he,this),null!=ge&&(this.id=this.recycleAsyncId(Pe,ge,null)),this.delay=null,super.unsubscribe()}}}},9687:(ht,Te,O)=>{O.d(Te,{q:()=>P});var h=O(6129);class Z{constructor(re,le=Z.now){this.schedulerActionCtor=re,this.now=le}schedule(re,le=0,ge){return new this.schedulerActionCtor(this,re).schedule(ge,le)}}Z.now=h.U.now;class P extends Z{constructor(re,le=Z.now){super(re,le),this.actions=[],this._active=!1}flush(re){const{actions:le}=this;if(this._active)return void le.push(re);let ge;this._active=!0;do{if(ge=re.execute(re.state,re.delay))break}while(re=le.shift());if(this._active=!1,ge){for(;re=le.shift();)re.unsubscribe();throw ge}}}},3236:(ht,Te,O)=>{O.d(Te,{E:()=>P});var h=O(6780);const P=new(O(9687).q)(h.R)},6129:(ht,Te,O)=>{O.d(Te,{U:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},9270:(ht,Te,O)=>{O.d(Te,{f:()=>h});const h={setTimeout(Z,P,...ee){const{delegate:re}=h;return re?.setTimeout?re.setTimeout(Z,P,...ee):setTimeout(Z,P,...ee)},clearTimeout(Z){const{delegate:P}=h;return(P?.clearTimeout||clearTimeout)(Z)},delegate:void 0}},4761:(ht,Te,O)=>{O.d(Te,{l:()=>Z});const Z=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(ht,Te,O)=>{O.d(Te,{s:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3794:(ht,Te,O)=>{O.d(Te,{R0:()=>le,ms:()=>ee,lI:()=>re});var h=O(8071);function P(ge){return ge[ge.length-1]}function ee(ge){return(0,h.T)(P(ge))?ge.pop():void 0}function re(ge){return function Z(ge){return ge&&(0,h.T)(ge.schedule)}(P(ge))?ge.pop():void 0}function le(ge,Pe){return"number"==typeof P(ge)?ge.pop():Pe}},7908:(ht,Te,O)=>{function h(Z,P){if(Z){const ee=Z.indexOf(P);0<=ee&&Z.splice(ee,1)}}O.d(Te,{o:()=>h})},1853:(ht,Te,O)=>{function h(Z){const ee=Z(re=>{Error.call(re),re.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}O.d(Te,{L:()=>h})},9786:(ht,Te,O)=>{O.d(Te,{Y:()=>P,l:()=>ee});var h=O(1026);let Z=null;function P(re){if(h.$.useDeprecatedSynchronousErrorHandling){const le=!Z;if(le&&(Z={errorThrown:!1,error:null}),re(),le){const{errorThrown:ge,error:Pe}=Z;if(Z=null,ge)throw Pe}}else re()}function ee(re){h.$.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=re)}},5225:(ht,Te,O)=>{function h(Z,P,ee,re=0,le=!1){const ge=P.schedule(function(){ee(),le?Z.add(this.schedule(null,re)):this.unsubscribe()},re);if(Z.add(ge),!le)return ge}O.d(Te,{N:()=>h})},3669:(ht,Te,O)=>{function h(Z){return Z}O.d(Te,{D:()=>h})},7441:(ht,Te,O)=>{O.d(Te,{X:()=>h});const h=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},7953:(ht,Te,O)=>{O.d(Te,{T:()=>Z});var h=O(8071);function Z(P){return Symbol.asyncIterator&&(0,h.T)(P?.[Symbol.asyncIterator])}},8071:(ht,Te,O)=>{function h(Z){return"function"==typeof Z}O.d(Te,{T:()=>h})},5055:(ht,Te,O)=>{O.d(Te,{l:()=>P});var h=O(3494),Z=O(8071);function P(ee){return(0,Z.T)(ee[h.s])}},5397:(ht,Te,O)=>{O.d(Te,{x:()=>P});var h=O(4761),Z=O(8071);function P(ee){return(0,Z.T)(ee?.[h.l])}},9858:(ht,Te,O)=>{O.d(Te,{y:()=>Z});var h=O(8071);function Z(P){return(0,h.T)(P?.then)}},5196:(ht,Te,O)=>{O.d(Te,{C:()=>P,U:()=>ee});var h=O(1635),Z=O(8071);function P(re){return(0,h.AQ)(this,arguments,function*(){const ge=re.getReader();try{for(;;){const{value:Pe,done:he}=yield(0,h.N3)(ge.read());if(he)return yield(0,h.N3)(void 0);yield yield(0,h.N3)(Pe)}}finally{ge.releaseLock()}})}function ee(re){return(0,Z.T)(re?.getReader)}},9974:(ht,Te,O)=>{O.d(Te,{N:()=>P,S:()=>Z});var h=O(8071);function Z(ee){return(0,h.T)(ee?.lift)}function P(ee){return re=>{if(Z(re))return re.lift(function(le){try{return ee(le,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},5343:(ht,Te,O)=>{function h(){}O.d(Te,{l:()=>h})},1203:(ht,Te,O)=>{O.d(Te,{F:()=>Z,m:()=>P});var h=O(3669);function Z(...ee){return P(ee)}function P(ee){return 0===ee.length?h.D:1===ee.length?ee[0]:function(le){return ee.reduce((ge,Pe)=>Pe(ge),le)}}},5334:(ht,Te,O)=>{O.d(Te,{m:()=>P});var h=O(1026),Z=O(9270);function P(ee){Z.f.setTimeout(()=>{const{onUnhandledError:re}=h.$;if(!re)throw ee;re(ee)})}},591:(ht,Te,O)=>{function h(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Te,{L:()=>h})},7705:(ht,Te,O)=>{O.d(Te,{$C:()=>ic,$GK:()=>yt,$K3:()=>lI,$MX:()=>Xh,AVh:()=>bv,Agw:()=>jy,B4B:()=>Id,BIS:()=>LD,BMQ:()=>po,C4Q:()=>yo,Co$:()=>mw,DNE:()=>pE,EFF:()=>Mf,EJ8:()=>sc,EmA:()=>v0,FS9:()=>IE,FsC:()=>_l,G2t:()=>qt,GFd:()=>Or,H3F:()=>aI,H5H:()=>YE,H8p:()=>Cd,HJs:()=>VT,HbH:()=>Af,Hbi:()=>sp,JRh:()=>Gd,JZv:()=>an,Jv_:()=>gw,KH2:()=>Qs,KVO:()=>nn,Kcf:()=>VA,L39:()=>b1,LfX:()=>tn,MKu:()=>C_,NEm:()=>yT,NYb:()=>u1,Njj:()=>Wl,O8t:()=>Xm,OA$:()=>ga,OM3:()=>yg,Ocv:()=>cT,Ol2:()=>_w,PLl:()=>D0,QTQ:()=>Fu,Ql9:()=>bm,QuC:()=>eo,R7$:()=>z0,RV6:()=>Jo,Rfq:()=>qe,RxE:()=>uf,SKi:()=>zr,SpI:()=>Kg,TL$:()=>Wh,Tbb:()=>X,UyX:()=>Ty,VBU:()=>mr,Vns:()=>Xd,Vt3:()=>nE,WHO:()=>ia,WPN:()=>wd,WQX:()=>Rt,XpG:()=>wE,Xx1:()=>zp,Y8G:()=>Di,Z63:()=>Yh,ZF7:()=>Qh,_9s:()=>_g,_q3:()=>NI,aKT:()=>Vc,aNF:()=>zf,bIt:()=>_E,bVm:()=>vv,bc$:()=>pg,bkB:()=>Ko,c1b:()=>Xf,cWb:()=>UA,czy:()=>Bh,e01:()=>Qa,e5t:()=>BA,eBV:()=>wc,eq3:()=>Hv,fpN:()=>rN,gRc:()=>II,gXe:()=>ct,giA:()=>tl,h9k:()=>MD,hnV:()=>uT,iLQ:()=>Jf,j41:()=>Gc,jDH:()=>Pt,jNT:()=>_v,k0s:()=>jg,kS0:()=>Mh,kdw:()=>xh,lNU:()=>ft,l_i:()=>Ku,lsd:()=>qb,mGM:()=>Yv,mq5:()=>sb,n$t:()=>ky,nKC:()=>lt,naY:()=>Rm,npT:()=>ND,nrm:()=>$g,o8S:()=>Wu,oH4:()=>m_,osQ:()=>u0,plB:()=>vm,qex:()=>mo,rXU:()=>Qo,rcV:()=>Gs,sFG:()=>R0,sZ2:()=>By,sdS:()=>Hc,uvJ:()=>Go,vPA:()=>Co,w6W:()=>Uv,wOt:()=>ne,wni:()=>Zv,xGo:()=>Fp,xc7:()=>OE,xe9:()=>Cm,xvI:()=>GD,zZn:()=>Ks,zcH:()=>zo,zjR:()=>Cf,zvX:()=>Nv});var h=O(1413),Z=O(8359),P=O(1985),ee=O(7786),re=O(4412),le=O(7673),ge=O(7647),Pe=O(5558),he=O(3294);function V(i){for(let o in i)if(i[o]===V)return o;throw Error("Could not find renamed property on target object.")}function $(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function X(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(X).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Ue(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const Se=V({__forward_ref__:V});function qe(i){return i.__forward_ref__=qe,i.toString=function(){return X(this())},i}function Re(i){return ze(i)?i():i}function ze(i){return"function"==typeof i&&i.hasOwnProperty(Se)&&i.__forward_ref__===qe}function Ve(i){return i&&!!i.\u0275providers}const ft="https://g.co/ng/security#xss";class ne extends Error{constructor(o,a){super(function _e(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function te(i){return"string"==typeof i?i:null==i?"":String(i)}function Ct(i,o){throw new ne(-201,!1)}function Ye(i,o){null==i&&function Ge(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Pt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function qt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Mn(i){return fr(i,fi)||fr(i,Ys)}function tn(i){return null!==Mn(i)}function fr(i,o){return i.hasOwnProperty(o)?i[o]:null}function vo(i){return i&&(i.hasOwnProperty(pi)||i.hasOwnProperty(eu))?i[pi]:null}const fi=V({\u0275prov:V}),pi=V({\u0275inj:V}),Ys=V({ngInjectableDef:V}),eu=V({ngInjectorDef:V});var yt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(yt||{});let zt;function fn(i){const o=zt;return zt=i,o}function Tn(i,o,a){const c=Mn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&yt.Optional?null:void 0!==o?o:void Ct(X(i))}const an=globalThis;class lt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Pt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Nn={},Hi="__NG_DI_FLAG__",Vr="ngTempTokenPath",U=/\n/gm,Ie="__source";let ie;function It(i){const o=ie;return ie=i,o}function Yt(i,o=yt.Default){if(void 0===ie)throw new ne(-203,!1);return null===ie?Tn(i,void 0,o):ie.get(i,o&yt.Optional?null:void 0,o)}function nn(i,o=yt.Default){return(function xt(){return zt}()||Yt)(Re(i),o)}function Rt(i,o=yt.Default){return nn(i,Qt(o))}function Qt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function gr(i){const o=[];for(let a=0;a<i.length;a++){const c=Re(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ne(900,!1);let d,p=yt.Default;for(let y=0;y<c.length;y++){const w=c[y],C=Ms(w);"number"==typeof C?-1===C?d=w.token:p|=C:d=w}o.push(nn(d,p))}else o.push(nn(c))}return o}function Jr(i,o){return i[Hi]=o,i.prototype[Hi]=o,i}function Ms(i){return i[Hi]}function J(i){return{toString:i}.toString()}var Oe=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Oe||{}),ct=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(ct||{});const gt={},Je=[],Jt=V({\u0275cmp:V}),zn=V({\u0275dir:V}),kn=V({\u0275pipe:V}),ss=V({\u0275mod:V}),ei=V({\u0275fac:V}),Ns=V({__NG_ELEMENT_ID__:V}),dl=V({__NG_ENV_ID__:V});function iu(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}function Ju(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],y=a[c++],w=a[c++];i.setAttribute(o,y,w,p)}else{const p=d,y=a[++c];ec(p)?i.setProperty(o,p,y):i.setAttribute(o,p,y),c++}}return c}function Ti(i){return 3===i||4===i||6===i}function ec(i){return 64===i.charCodeAt(0)}function Gi(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||hl(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function hl(i,o,a,c,d){let p=0,y=i.length;if(-1===o)y=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(i.splice(y,0,o),p=y+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}const Fn="ng-template";function xs(i,o,a){let c=0,d=!0;for(;c<i.length;){let p=i[c++];if("string"==typeof p&&d){const y=i[c++];if(a&&"class"===p&&-1!==iu(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;c<i.length&&"string"==typeof(p=i[c++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function mp(i){return 4===i.type&&i.value!==Fn}function yp(i,o,a){return o===(4!==i.type||a?i.value:Fn)}function tc(i,o,a){let c=4;const d=i.attrs||[],p=function _o(i){for(let o=0;o<i.length;o++)if(Ti(i[o]))return o;return i.length}(d);let y=!1;for(let w=0;w<o.length;w++){const C=o[w];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!yp(i,C,a)||""===C&&1===o.length){if(br(c))return!1;y=!0}}else{const S=8&c?C:o[++w];if(8&c&&null!==i.attrs){if(!xs(i.attrs,S,a)){if(br(c))return!1;y=!0}continue}const F=oh(8&c?"class":C,d,mp(i),a);if(-1===F){if(br(c))return!1;y=!0;continue}if(""!==S){let z;z=F>p?"":d[F+1].toLowerCase();const W=8&c?z:null;if(W&&-1!==iu(W,S,0)||2&c&&S!==z){if(br(c))return!1;y=!0}}}}else{if(!y&&!br(c)&&!br(C))return!1;if(y&&br(C))continue;y=!1,c=C|1&c}}return br(c)||y}function br(i){return 0==(1&i)}function oh(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const y=o[d];if(y===i)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function vp(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function fl(i,o,a=!1){for(let c=0;c<o.length;c++)if(tc(i,o[c],a))return!0;return!1}function pl(i,o){return i?":not("+o.trim()+")":o}function ah(i){let o=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!br(y)&&(o+=pl(p,d),d=""),c=y,p=p||!br(c);a++}return""!==d&&(o+=pl(p,d)),o}function mr(i){return J(()=>{const o=_p(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Oe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||ct.Emulated,styles:i.styles||Je,_:null,schemas:i.schemas||null,tView:null,id:""};El(a);const c=i.dependencies;return a.directiveDefs=Eo(c,!1),a.pipeDefs=Eo(c,!0),a.id=function wl(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function rc(i){return Kt(i)||yr(i)}function yl(i){return null!==i}function ic(i){return J(()=>({type:i.type,bootstrap:i.bootstrap||Je,declarations:i.declarations||Je,imports:i.imports||Je,exports:i.exports||Je,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function ca(i,o){if(null==i)return gt;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}function _l(i){return J(()=>{const o=_p(i);return El(o),o})}function sc(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Kt(i){return i[Jt]||null}function yr(i){return i[zn]||null}function vr(i){return i[kn]||null}function eo(i){const o=Kt(i)||yr(i)||vr(i);return null!==o&&o.standalone}function ti(i,o){const a=i[ss]||null;if(!a&&!0===o)throw new Error(`Type ${X(i)} does not have '\u0275mod' property.`);return a}function _p(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||gt,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Je,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ca(i.inputs,o),outputs:ca(i.outputs)}}function El(i){i.features?.forEach(o=>o(i))}function Eo(i,o){if(!i)return null;const a=o?vr:rc;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(yl)}const xn=0,$e=1,Ft=2,dn=3,gi=4,la=5,Ur=6,to=7,Rn=8,no=9,zi=10,mt=11,oc=12,su=13,Rs=14,Jn=15,da=16,ni=17,ri=18,Mi=19,uh=20,Ki=21,Os=22,ro=23,os=24,Xt=25,ou=1,as=2,mi=7,Ps=9,ar=11;function Br(i){return Array.isArray(i)&&"object"==typeof i[ou]}function Ar(i){return Array.isArray(i)&&!0===i[ou]}function Dl(i){return 0!=(4&i.flags)}function Sr(i){return i.componentOffset>-1}function wo(i){return 1==(1&i.flags)}function ii(i){return!!i.template}function io(i){return 0!=(512&i[Ft])}function Fs(i,o){return i.hasOwnProperty(ei)?i[ei]:null}const us=Symbol("SIGNAL");function xl(i,o){return(null===i||"object"!=typeof i)&&Object.is(i,o)}let Kn=null,ha=!1;function _r(i){const o=Kn;return Kn=i,o}const cc={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function cu(i){if(ha)throw new Error("");if(null===Kn)return;const o=Kn.nextProducerIndex++;Ls(Kn),o<Kn.producerNode.length&&Kn.producerNode[o]!==i&&Do(Kn)&&pa(Kn.producerNode[o],Kn.producerIndexOfThis[o]),Kn.producerNode[o]!==i&&(Kn.producerNode[o]=i,Kn.producerIndexOfThis[o]=Do(Kn)?Pl(i,Kn,o):0),Kn.producerLastReadVersion[o]=i.version}function dh(i){if(!Do(i)||i.dirty){if(!i.producerMustRecompute(i)&&!Rl(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function lu(i){if(void 0===i.liveConsumerNode)return;const o=ha;ha=!0;try{for(const a of i.liveConsumerNode)a.dirty||Dp(a)}finally{ha=o}}function fa(){return!1!==Kn?.consumerAllowSignalWrites}function Dp(i){i.dirty=!0,lu(i),i.consumerMarkedDirty?.(i)}function ur(i){return i&&(i.nextProducerIndex=0),_r(i)}function lc(i,o){if(_r(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Do(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)pa(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Rl(i){Ls(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],c=i.producerLastReadVersion[o];if(c!==a.version||(dh(a),c!==a.version))return!0}return!1}function Ol(i){if(Ls(i),Do(i))for(let o=0;o<i.producerNode.length;o++)pa(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Pl(i,o,a){if(dc(i),Ls(i),0===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)i.producerIndexOfThis[c]=Pl(i.producerNode[c],i,c);return i.liveConsumerIndexOfThis.push(a),i.liveConsumerNode.push(o)-1}function pa(i,o){if(dc(i),Ls(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)pa(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[o],d=i.liveConsumerNode[o];Ls(d),d.producerIndexOfThis[c]=o}}function Do(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Ls(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}function dc(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}let kl=function bp(){throw new Error};function Fl(){kl()}let Ll=null;function Co(i,o){const a=Object.create(hh);function c(){return cu(a),a.value}return a.value=i,o?.equal&&(a.equal=o.equal),c.set=du,c.update=hu,c.mutate=Tp,c.asReadonly=Vl,c[us]=a,c}const hh=(()=>({...cc,equal:xl,readonlyFn:void 0}))();function fh(i){i.version++,lu(i),Ll?.()}function du(i){const o=this[us];fa()||Fl(),o.equal(o.value,i)||(o.value=i,fh(o))}function hu(i){fa()||Fl(),du.call(this,i(this[us].value))}function Tp(i){const o=this[us];fa()||Fl(),i(o.value),fh(o)}function Vl(){const i=this[us];if(void 0===i.readonlyFn){const o=()=>this();o[us]=i,i.readonlyFn=o}return i.readonlyFn}function Xm(i){const o=_r(null);try{return i()}finally{_r(o)}}const gh=()=>{},mc=(()=>({...cc,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:gh}))();class mh{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ga(){return yh}function yh(i){return i.type.prototype.ngOnChanges&&(i.setInput=Vs),bo}function bo(){const i=Ul(this),o=i?.current;if(o){const a=i.previous;if(a===gt)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Vs(i,o,a,c){const d=this.declaredInputs[a],p=Ul(i)||function Bl(i,o){return i[To]=o}(i,{previous:gt,current:null}),y=p.current||(p.current={}),w=p.previous,C=w[d];y[d]=new mh(C&&C.currentValue,o,w===gt),i[c]=o}ga.ngInherit=!0;const To="__ngSimpleChanges__";function Ul(i){return i[To]||null}const cs=function(i,o,a){};function on(i){for(;Array.isArray(i);)i=i[xn];return i}function So(i,o){return on(o[i])}function si(i,o){return on(o[i.index])}function $l(i,o){return i.data[o]}function yi(i,o){const a=o[i];return Br(a)?a:a[xn]}function No(i,o){return null==o?null:i[o]}function yc(i){i[ni]=0}function Hl(i){1024&i[Ft]||(i[Ft]|=1024,En(i,1))}function Zm(i){1024&i[Ft]&&(i[Ft]&=-1025,En(i,-1))}function En(i,o){let a=i[dn];if(null===a)return;a[la]+=o;let c=a;for(a=a[dn];null!==a&&(1===o&&1===c[la]||-1===o&&0===c[la]);)a[la]+=o,c=a,a=a[dn]}const St={lFrame:bh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function va(){return St.bindingsEnabled}function Ae(){return St.lFrame.lView}function Lt(){return St.lFrame.tView}function wc(i){return St.lFrame.contextLView=i,i[Rn]}function Wl(i){return St.lFrame.contextLView=null,i}function er(){let i=ql();for(;null!==i&&64===i.type;)i=i.parent;return i}function ql(){return St.lFrame.currentTNode}function oi(i,o){const a=St.lFrame;a.currentTNode=i,a.isParent=o}function Xl(){return St.lFrame.isParent}function Yl(){St.lFrame.isParent=!1}function tr(){const i=St.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function xo(){return St.lFrame.bindingIndex++}function Wi(i){const o=St.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function ty(i,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ch(o)}function Ch(i){St.lFrame.currentDirectiveIndex=i}function gu(i){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}function xp(){return St.lFrame.currentQueryIndex}function Ic(i){St.lFrame.currentQueryIndex=i}function ny(i){const o=i[$e];return 2===o.type?o.declTNode:1===o.type?i[Ur]:null}function pn(i,o,a){if(a&yt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&yt.Host||(d=ny(p),null===d||(p=p[Rs],10&d.type))););if(null===d)return!1;o=d,i=p}const c=St.lFrame=_a();return c.currentTNode=o,c.lView=i,!0}function qi(i){const o=_a(),a=i[$e];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function _a(){const i=St.lFrame,o=null===i?null:i.child;return null===o?bh(i):o}function bh(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Ea(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Dc=Ea;function Ro(){const i=Ea();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ln(){return St.lFrame.selectedIndex}function Vn(i){St.lFrame.selectedIndex=i}function et(){const i=St.lFrame;return $l(i.tView,i.selectedIndex)}let Ia=!0;function Ri(){return Ia}function mn(i){Ia=i}function Da(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:x}=p;y&&(i.contentHooks??=[]).push(-a,y),w&&((i.contentHooks??=[]).push(a,w),(i.contentCheckHooks??=[]).push(a,w)),C&&(i.viewHooks??=[]).push(-a,C),S&&((i.viewHooks??=[]).push(a,S),(i.viewCheckHooks??=[]).push(a,S)),null!=x&&(i.destroyHooks??=[]).push(a,x)}}function Cc(i,o,a){Po(i,o,3,a)}function Ca(i,o,a,c){(3&i[Ft])===a&&Po(i,o,a,c)}function Th(i,o){let a=i[Ft];(3&a)===o&&(a&=8191,a+=1,i[Ft]=a)}function Po(i,o,a,c){const p=c??-1,y=o.length-1;let w=0;for(let C=void 0!==c?65535&i[ni]:0;C<y;C++)if("number"==typeof o[C+1]){if(w=o[C],null!=c&&w>=c)break}else o[C]<0&&(i[ni]+=65536),(w<p||-1==p)&&(bc(i,a,o,C),i[ni]=(4294901760&i[ni])+C+2),C++}function Qi(i,o){cs(4,i,o);const a=_r(null);try{o.call(i)}finally{_r(a),cs(5,i,o)}}function bc(i,o,a,c){const d=a[c]<0,p=a[c+1],w=i[d?-a[c]:a[c]];d?i[Ft]>>13<i[ni]>>16&&(3&i[Ft])===o&&(i[Ft]+=8192,Qi(w,p)):Qi(w,p)}const bn=-1;class Xi{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function _u(i){return i!==bn}function ba(i){return 32767&i}function Aa(i,o){let a=function Ta(i){return i>>16}(i),c=o;for(;a>0;)c=c[Rs],a--;return c}let Ac=!0;function ko(i){const o=Ac;return Ac=i,o}const kp=255,Eu=5;let Sh=0;const ai={};function so(i,o){const a=Lo(i,o);if(-1!==a)return a;const c=o[$e];c.firstCreatePass&&(i.injectorIndex=o.length,Fo(c.data,i),Fo(o,null),Fo(c.blueprint,null));const d=Vo(i,o),p=i.injectorIndex;if(_u(d)){const y=ba(d),w=Aa(d,o),C=w[$e].data;for(let S=0;S<8;S++)o[p+S]=w[y+S]|C[y+S]}return o[p+8]=d,p}function Fo(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Lo(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Vo(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Up(d),null===c)return bn;if(a++,d=d[Rs],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return bn}function oo(i,o,a){!function wu(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Ns)&&(c=a[Ns]),null==c&&(c=a[Ns]=Sh++);const d=c&kp;o.data[i+(d>>Eu)]|=1<<d}(i,o,a)}function Sa(i,o,a){if(a&yt.Optional||void 0!==i)return i;Ct()}function Iu(i,o,a,c){if(a&yt.Optional&&void 0===c&&(c=null),!(a&(yt.Self|yt.Host))){const d=i[no],p=fn(void 0);try{return d?d.get(o,c,a&yt.Optional):Tn(o,c,a&yt.Optional)}finally{fn(p)}}return Sa(c,0,a)}function id(i,o,a,c=yt.Default,d){if(null!==i){if(2048&o[Ft]&&!(c&yt.Self)){const y=function Vp(i,o,a,c,d){let p=i,y=o;for(;null!==p&&null!==y&&2048&y[Ft]&&!(512&y[Ft]);){const w=Er(p,y,a,c|yt.Self,ai);if(w!==ai)return w;let C=p.parent;if(!C){const S=y[uh];if(S){const x=S.get(a,ai,c);if(x!==ai)return x}C=Up(y),y=y[Rs]}p=C}return d}(i,o,a,c,ai);if(y!==ai)return y}const p=Er(i,o,a,c,ai);if(p!==ai)return p}return Iu(o,a,c,d)}function Er(i,o,a,c,d){const p=function jo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Ns)?i[Ns]:void 0;return"number"==typeof o?o>=0?o&kp:js:o}(a);if("function"==typeof p){if(!pn(o,i,c))return c&yt.Host?Sa(d,0,c):Iu(o,a,c,d);try{let y;if(y=p(c),null!=y||c&yt.Optional)return y;Ct()}finally{Dc()}}else if("number"==typeof p){let y=null,w=Lo(i,o),C=bn,S=c&yt.Host?o[Jn][Ur]:null;for((-1===w||c&yt.SkipSelf)&&(C=-1===w?Vo(i,o):o[w+8],C!==bn&&Mc(c,!1)?(y=o[$e],w=ba(C),o=Aa(C,o)):w=-1);-1!==w;){const x=o[$e];if(Sc(p,w,x.data)){const F=Bo(w,o,a,y,c,S);if(F!==ai)return F}C=o[w+8],C!==bn&&Mc(c,o[$e].data[w+8]===S)&&Sc(p,w,o)?(y=x,w=ba(C),o=Aa(C,o)):w=-1}}return d}function Bo(i,o,a,c,d,p){const y=o[$e],w=y.data[i+8],x=Du(w,y,a,null==c?Sr(w)&&Ac:c!=y&&0!=(3&w.type),d&yt.Host&&p===w);return null!==x?Ma(o,y,x,w):ai}function Du(i,o,a,c,d){const p=i.providerIndexes,y=o.data,w=1048575&p,C=i.directiveStart,x=p>>20,z=d?w+x:i.directiveEnd;for(let W=c?w:w+x;W<z;W++){const me=y[W];if(W<C&&a===me||W>=C&&me.type===a)return W}if(d){const W=y[C];if(W&&ii(W)&&W.type===a)return C}return null}function Ma(i,o,a,c){let d=i[a];const p=o.data;if(function nd(i){return i instanceof Xi}(d)){const y=d;y.resolving&&function Fe(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ne(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ce(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():te(i)}(p[a]));const w=ko(y.canSeeViewProviders);y.resolving=!0;const S=y.injectImpl?fn(y.injectImpl):null;pn(i,c,yt.Default);try{d=i[a]=y.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function td(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const y=yh(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),p&&((a.preOrderHooks??=[]).push(i,p),(a.preOrderCheckHooks??=[]).push(i,p))}(a,p[a],o)}finally{null!==S&&fn(S),ko(w),y.resolving=!1,Dc()}}return d}function Sc(i,o,a){return!!(a[o+(i>>Eu)]&1<<i)}function Mc(i,o){return!(i&yt.Self||i&yt.Host&&o)}class lr{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return id(this._tNode,this._lView,o,Qt(c),a)}}function js(){return new lr(er(),Ae())}function Fp(i){return J(()=>{const o=i.prototype.constructor,a=o[ei]||Lp(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[ei]||Lp(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Lp(i){return ze(i)?()=>{const o=Lp(Re(i));return o&&o()}:Fs(i)}function Up(i){const o=i[$e],a=o.type;return 2===a?o.declTNode:1===a?i[Ur]:null}function Mh(i){return function Uo(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(Ti(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(er(),i)}const I="__parameters__";function H(i,o,a){return J(()=>{const c=function k(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return w.annotation=y,w;function w(C,S,x){const F=C.hasOwnProperty(I)?C[I]:Object.defineProperty(C,I,{value:[]})[I];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(y),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function sd(i,o){i.forEach(a=>Array.isArray(a)?sd(a,o):o(a))}function B_(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function od(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function ui(i,o,a){let c=Ra(i,o);return c>=0?i[1|c]=a:(c=~c,function xc(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function jp(i,o){const a=Ra(i,o);if(a>=0)return i[1|a]}function Ra(i,o){return function Hp(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),y=i[p<<a];if(o===y)return p<<a;y>o?d=p:c=p+1}return~(d<<a)}(i,o,1)}const zp=Jr(H("Optional"),8),xh=Jr(H("SkipSelf"),4);function Uh(i){return 128==(128&i.flags)}var Bh=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Bh||{});const uo=/^>|^->|<!--|-->|--!>|<!-$/g,py=/(<|>)/g,W_="\u200b$1\u200b";const eg=new Map;let q_=0;const jh="__ngContext__";function xr(i,o){Br(o)?(i[jh]=o[Mi],function tg(i){eg.set(i[Mi],i)}(o)):i[jh]=o}let Y;function xe(i,o){return Y(i,o)}function tt(i){const o=i[dn];return Ar(o)?o[dn]:o}function Hs(i){return my(i[oc])}function $h(i){return my(i[gi])}function my(i){for(;null!==i&&!Ar(i);)i=i[gi];return i}function Su(i,o,a,c,d){if(null!=c){let p,y=!1;Ar(c)?p=c:Br(c)&&(y=!0,c=c[xn]);const w=on(c);0===i&&null!==a?null==d?pD(o,a,w):Kh(o,a,w,d||null,!0):1===i&&null!==a?Kh(o,a,w,d||null,!0):2===i?function Ey(i,o,a){const c=$o(i,o);c&&function yd(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,w,y):3===i&&o.destroyNode(w),null!=p&&function Fc(i,o,a,c,d){const p=a[mi];p!==on(a)&&Su(o,i,c,p,d);for(let w=ar;w<a.length;w++){const C=a[w];Rr(C[$e],C,i,o,c,p)}}(o,i,p,a,d)}}function md(i,o){return i.createComment(function Jp(i){return i.replace(uo,o=>o.replace(py,W_))}(o))}function Gh(i,o,a){return i.createElement(o,a)}function vy(i,o){const a=i[Ps],c=a.indexOf(o);Zm(o),a.splice(c,1)}function Pi(i,o){if(i.length<=ar)return;const a=ar+o,c=i[a];if(c){const d=c[da];null!==d&&d!==i&&vy(d,c),o>0&&(i[a-1][gi]=c[gi]);const p=od(i,ar+o);!function hs(i,o){Rr(i,o,o[mt],2,null,null),o[xn]=null,o[Ur]=null}(c[$e],c);const y=p[ri];null!==y&&y.detachView(p[$e]),c[dn]=null,c[gi]=null,c[Ft]&=-129}return c}function zh(i,o){if(!(256&o[Ft])){const a=o[mt];o[ro]&&Ol(o[ro]),o[os]&&Ol(o[os]),a.destroyNode&&Rr(i,o,a,3,null,null),function $r(i){let o=i[oc];if(!o)return sg(i[$e],i);for(;o;){let a=null;if(Br(o))a=o[oc];else{const c=o[ar];c&&(a=c)}if(!a){for(;o&&!o[gi]&&o!==i;)Br(o)&&sg(o[$e],o),o=o[dn];null===o&&(o=i),Br(o)&&sg(o[$e],o),a=o&&o[gi]}o=a}}(o)}}function sg(i,o){if(!(256&o[Ft])){o[Ft]&=-129,o[Ft]|=256,function _y(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Xi)){const p=a[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=d[p[y]],C=p[y+1];cs(4,w,C);try{C.call(w)}finally{cs(5,w,C)}}else{cs(4,d,p);try{p.call(d)}finally{cs(5,d,p)}}}}}(i,o),function PA(i,o){const a=i.cleanup,c=o[to];if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+3];y>=0?c[y]():c[-y].unsubscribe(),p+=2}else a[p].call(c[a[p+1]]);null!==c&&(o[to]=null);const d=o[Ki];if(null!==d){o[Ki]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(i,o),1===o[$e].type&&o[mt].destroy();const a=o[da];if(null!==a&&Ar(o[dn])){a!==o[dn]&&vy(a,o);const c=o[ri];null!==c&&c.detachView(i)}!function gy(i){eg.delete(i[Mi])}(o)}}function Y_(i,o,a){return function co(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[xn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===ct.None||p===ct.Emulated)return null}return si(c,a)}}(i,o.parent,a)}function Kh(i,o,a,c,d){i.insertBefore(o,a,c,d)}function pD(i,o,a){i.appendChild(o,a)}function Ee(i,o,a,c,d){null!==c?Kh(i,o,a,c,d):pD(i,o,a)}function $o(i,o){return i.parentNode(o)}let og,Gr,n0,qh,nt=function lo(i,o,a){return 40&i.type?si(i,a):null};function vd(i,o,a,c){const d=Y_(i,c,o),p=o[mt],w=function gD(i,o,a){return nt(i,o,a)}(c.parent||o[Ur],c,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)Ee(p,d,a[C],w,!1);else Ee(p,d,a,w,!1);void 0!==og&&og(p,c,o,a,d)}function Nu(i,o){if(null!==o){const a=o.type;if(3&a)return si(o,i);if(4&a)return ag(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Nu(i,c);{const d=i[o.index];return Ar(d)?ag(-1,d):on(d)}}if(32&a)return xe(o,i)()||on(i[o.index]);{const c=mD(i,o);return null!==c?Array.isArray(c)?c[0]:Nu(tt(i[Jn]),c):Nu(i,o.next)}}return null}function mD(i,o){return null!==o?i[Jn][Ur].projection[o.projection]:null}function ag(i,o){const a=ar+i+1;if(a<o.length){const c=o[a],d=c[$e].firstChild;if(null!==d)return Nu(c,d)}return o[mi]}function J_(i,o,a,c,d,p,y){for(;null!=a;){const w=c[a.index],C=a.type;if(y&&0===o&&(w&&xr(on(w),c),a.flags|=2),32!=(32&a.flags))if(8&C)J_(i,o,a.child,c,d,p,!1),Su(o,i,d,w,p);else if(32&C){const S=xe(a,c);let x;for(;x=S();)Su(o,i,d,x,p);Su(o,i,d,w,p)}else 16&C?Hr(i,o,c,a,d,p):Su(o,i,d,w,p);a=y?a.projectionNext:a.next}}function Rr(i,o,a,c,d,p){J_(a,c,i.firstChild,o,d,p,!1)}function Hr(i,o,a,c,d,p){const y=a[Jn],C=y[Ur].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)Su(o,i,d,C[S],p);else{let S=C;const x=y[dn];Uh(c)&&(S.flags|=128),J_(i,o,S,x,d,p,!0)}}function Iy(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function e0(i,o,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&Ju(i,o,c),null!==d&&Iy(i,o,d),null!==p&&function vD(i,o,a){i.setAttribute(o,"style",a)}(i,o,p)}function La(i){return function t0(){if(void 0===Gr&&(Gr=null,an.trustedTypes))try{Gr=an.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Gr}()?.createHTML(i)||i}function Wh(i){n0=i}function _d(){if(void 0!==n0)return n0;if(typeof document<"u")return document;throw new ne(210,!1)}function Cy(){if(void 0===qh&&(qh=null,an.trustedTypes))try{qh=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return qh}function ED(i){return Cy()?.createHTML(i)||i}function by(i){return Cy()?.createScriptURL(i)||i}class xu{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ft})`}}class s0 extends xu{getTypeName(){return"HTML"}}class o0 extends xu{getTypeName(){return"Style"}}class a0 extends xu{getTypeName(){return"Script"}}class wD extends xu{getTypeName(){return"URL"}}class LA extends xu{getTypeName(){return"ResourceURL"}}function Gs(i){return i instanceof xu?i.changingThisBreaksApplicationSecurity:i}function Qh(i,o){const a=function ug(i){return i instanceof xu&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ft})`)}return a===o}function VA(i){return new s0(i)}function UA(i){return new o0(i)}function Ty(i){return new a0(i)}function u0(i){return new wD(i)}function BA(i){return new LA(i)}class ID{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(La(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class DD{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const a=this.inertDocument.createElement("template");return a.innerHTML=La(o),a}}const l0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Xh(i){return(i=String(i)).match(l0)?i:"unsafe:"+i}function Ho(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function Ed(...i){const o={};for(const a of i)for(const c in a)a.hasOwnProperty(c)&&(o[c]=!0);return o}const d0=Ho("area,br,col,hr,img,wbr"),h0=Ho("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),CD=Ho("rp,rt"),Sy=Ed(d0,Ed(h0,Ho("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ed(CD,Ho("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ed(CD,h0)),f0=Ho("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),My=Ed(f0,Ho("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ho("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),di=Ho("script,style,template");class _i{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!Sy.hasOwnProperty(a))return this.sanitizedSomething=!0,!di.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=o.attributes;for(let d=0;d<c.length;d++){const p=c.item(d),y=p.name,w=y.toLowerCase();if(!My.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let C=p.value;f0[w]&&(C=Xh(C)),this.buf.push(" ",y,'="',SD(C),'"')}return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();Sy.hasOwnProperty(a)&&!d0.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(SD(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const Ny=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p0=/([^\#-~ |!])/g;function SD(i){return i.replace(/&/g,"&amp;").replace(Ny,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(p0,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xy;function MD(i,o){let a=null;try{xy=xy||function c0(i){const o=new DD(i);return function Ay(){try{return!!(new window.DOMParser).parseFromString(La(""),"text/html")}catch{return!1}}()?new ID(o):o}(i);let c=o?String(o):"";a=xy.getInertBodyElement(c);let d=5,p=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=p,p=a.innerHTML,a=xy.getInertBodyElement(c)}while(c!==p);return La((new _i).sanitizeChildren(Ry(a)||a))}finally{if(a){const c=Ry(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Ry(i){return"content"in i&&function HA(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var wd=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(wd||{});function ND(i){const o=Ru();return o?ED(o.sanitize(wd.HTML,i)||""):Qh(i,"HTML")?ED(Gs(i)):MD(_d(),te(i))}function Id(i){const o=Ru();return o?o.sanitize(wd.URL,i)||"":Qh(i,"URL")?Gs(i):Xh(te(i))}function Oy(i){const o=Ru();if(o)return by(o.sanitize(wd.RESOURCE_URL,i)||"");if(Qh(i,"ResourceURL"))return by(Gs(i));throw new ne(904,!1)}function ky(i,o,a){return function g0(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Oy:Id}(o,a)(i)}function Ru(){const i=Ae();return i&&i[zi].sanitizer}const Yh=new lt("ENVIRONMENT_INITIALIZER"),m0=new lt("INJECTOR",-1),y0=new lt("INJECTOR_DEF_TYPES");class Zh{get(o,a=Nn){if(a===Nn){const c=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw c.name="NullInjectorError",c}return a}}function v0(i){return{\u0275providers:i}}function KA(...i){return{\u0275providers:Dd(0,i),\u0275fromNgModule:!0}}function Dd(i,...o){const a=[],c=new Set;let d;const p=y=>{a.push(y)};return sd(o,y=>{const w=y;Fy(w,p,[],c)&&(d||=[],d.push(w))}),void 0!==d&&RD(d,p),a}function RD(i,o){for(let a=0;a<i.length;a++){const{ngModule:c,providers:d}=i[a];Ly(d,p=>{o(p,c)})}}function Fy(i,o,a,c){if(!(i=Re(i)))return!1;let d=null,p=vo(i);const y=!p&&Kt(i);if(p||y){if(y&&!y.standalone)return!1;d=i}else{const C=i.ngModule;if(p=vo(C),!p)return!1;d=C}const w=c.has(d);if(y){if(w)return!1;if(c.add(d),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of C)Fy(S,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let S;c.add(d);try{sd(p.imports,x=>{Fy(x,o,a,c)&&(S||=[],S.push(x))})}finally{}void 0!==S&&RD(S,o)}if(!w){const S=Fs(d)||(()=>new d);o({provide:d,useFactory:S,deps:Je},d),o({provide:y0,useValue:d,multi:!0},d),o({provide:Yh,useValue:()=>nn(d),multi:!0},d)}const C=p.providers;if(null!=C&&!w){const S=i;Ly(C,x=>{o(x,S)})}}}return d!==i&&void 0!==i.providers}function Ly(i,o){for(let a of i)Ve(a)&&(a=a.\u0275providers),Array.isArray(a)?Ly(a,o):o(a)}const Vy=V({provide:String,useValue:V});function Uy(i){return null!==i&&"object"==typeof i&&Vy in i}function wr(i){return"function"==typeof i}const Cd=new lt("Set Injector scope."),bd={},PD={};let lg;function dg(){return void 0===lg&&(lg=new Zh),lg}class Go{}class Ua extends Go{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,tf(o,y=>this.processProvider(y)),this.records.set(m0,Ba(void 0,this)),d.has("environment")&&this.records.set(Go,Ba(void 0,this));const p=this.records.get(Cd);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(y0.multi,Je,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=It(this),c=fn(void 0);try{return o()}finally{It(a),fn(c)}}get(o,a=Nn,c=yt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(dl))return o[dl](this);c=Qt(c);const p=It(this),y=fn(void 0);try{if(!(c&yt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const S=function I0(i){return"function"==typeof i||"object"==typeof i&&i instanceof lt}(o)&&Mn(o);C=S&&this.injectableDefInScope(S)?Ba(hg(o),bd):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&yt.Self?dg():this.parent).get(o,a=c&yt.Optional&&a===Nn?null:a)}catch(w){if("NullInjectorError"===w.name){if((w[Vr]=w[Vr]||[]).unshift(X(o)),p)throw w;return function ru(i,o,a,c){const d=i[Vr];throw o[Ie]&&d.unshift(o[Ie]),i.message=function pe(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=X(o);if(Array.isArray(o))d=o.map(X).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):X(w)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(U,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Vr]=null,i}(w,o,"R3InjectorError",this.source)}throw w}finally{fn(y),It(p)}}resolveInjectorInitializers(){const o=It(this),a=fn(void 0);try{const d=this.get(Yh.multi,Je,yt.Self);for(const p of d)p()}finally{It(o),fn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(X(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(o){let a=wr(o=Re(o))?o:Re(o&&o.provide);const c=function w0(i){return Uy(i)?Ba(void 0,i.useValue):Ba(fg(i),bd)}(o);if(wr(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Ba(void 0,bd,!0),d.factory=()=>gr(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===bd&&(a.value=PD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function WA(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Re(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function hg(i){const o=Mn(i),a=null!==o?o.factory:Fs(i);if(null!==a)return a;if(i instanceof lt)throw new ne(204,!1);if(i instanceof Function)return function E0(i){const o=i.length;if(o>0)throw function $s(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new ne(204,!1);const a=function Fr(i){return i&&(i[fi]||i[Ys])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ne(204,!1)}function fg(i,o,a){let c;if(wr(i)){const d=Re(i);return Fs(d)||hg(d)}if(Uy(i))c=()=>Re(i.useValue);else if(function _0(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...gr(i.deps||[]));else if(function ef(i){return!(!i||!i.useExisting)}(i))c=()=>nn(Re(i.useExisting));else{const d=Re(i&&(i.useClass||i.provide));if(!function kD(i){return!!i.deps}(i))return Fs(d)||hg(d);c=()=>new d(...gr(i.deps))}return c}function Ba(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function tf(i,o){for(const a of i)Array.isArray(a)?tf(a,o):a&&Ve(a)?tf(a.\u0275providers,o):o(a)}const By=new lt("AppId",{providedIn:"root",factory:()=>FD}),FD="ng",D0=new lt("Platform Initializer"),jy=new lt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pg=new lt("AnimationModuleType"),LD=new lt("CSP nonce",{providedIn:"root",factory:()=>_d().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let UD=(i,o,a)=>null;function T0(i,o,a=!1){return UD(i,o,a)}class $D{}class Wy{}class eS{resolveComponentFactory(o){throw function N0(i){const o=Error(`No component factory found for ${X(i)}.`);return o.ngComponent=i,o}(o)}}let yg=(()=>{class i{static#e=this.NULL=new eS}return i})();function tS(){return af(er(),Ae())}function af(i,o){return new Vc(si(i,o))}let Vc=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=tS}return i})();function vg(i){return i instanceof Vc?i.nativeElement:i}class _g{}let R0=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function HD(){const i=Ae(),a=yi(er().index,i);return(Br(a)?a:i)[mt]}()}return i})(),Eg=(()=>{class i{static#e=this.\u0275prov=Pt({token:i,providedIn:"root",factory:()=>null})}return i})();class uf{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const GD=new uf("16.2.12"),qn={};function QD(i,o=null,a=null,c){const d=k0(i,o,a,c);return d.resolveInjectorInitializers(),d}function k0(i,o=null,a=null,c,d=new Set){const p=[a||Je,KA(i)];return c=c||("object"==typeof i?void 0:X(i)),new Ua(p,o||dg(),c||null,d)}let Ks=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=Nn;static#t=this.NULL=new Zh;static create(a,c){if(Array.isArray(a))return QD({name:""},c,a,"");{const d=a.name??"";return QD({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=Pt({token:i,providedIn:"any",factory:()=>nn(m0)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function Ig(i){return i.ngOriginalError}class zo{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Ig(o);for(;a&&Ig(a);)a=Ig(a);return a||null}}function Nd(i){return o=>{setTimeout(i,void 0,o)}}const Ko=class XD extends h.B{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),p=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(p=Nd(p),d&&(d=Nd(d)),y&&(y=Nd(y)));const w=super.subscribe({next:d,error:p,complete:y});return o instanceof Z.yU&&o.add(w),w}};function F0(...i){}class zr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ko(!1),this.onMicrotaskEmpty=new Ko(!1),this.onStable=new Ko(!1),this.onError=new Ko(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function L0(){const i="function"==typeof an.requestAnimationFrame;let o=an[i?"requestAnimationFrame":"setTimeout"],a=an[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function xd(i){const o=()=>{!function ZD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(an,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Yy(i),i.isCheckStableRunning=!0,Xy(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Yy(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,y,w)=>{if(function eC(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(w))return a.invokeTask(d,p,y,w);try{return V0(i),a.invokeTask(d,p,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),U0(i)}},onInvoke:(a,c,d,p,y,w,C)=>{try{return V0(i),a.invoke(d,p,y,w,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),U0(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Yy(i),Xy(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zr.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(zr.isInAngularZone())throw new ne(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,Qy,F0,F0);try{return p.runTask(y,a,c)}finally{p.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const Qy={};function Xy(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Yy(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function V0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function U0(i){i._nesting--,Xy(i)}class JD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ko,this.onMicrotaskEmpty=new Ko,this.onStable=new Ko,this.onError=new Ko}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const Cg=new lt("",{providedIn:"root",factory:fs});function fs(){const i=Rt(zr);let o=!0;const a=new P.c(d=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(o),d.complete()})}),c=new P.c(d=>{let p;i.runOutsideAngular(()=>{p=i.onStable.subscribe(()=>{zr.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{zr.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ee.h)(a,c.pipe((0,ge.u)()))}function Wo(i){return i instanceof Function?i():i}let bg=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Pt({token:i,providedIn:"root",factory:()=>new i})}return i})();function $a(i){for(;i;){i[Ft]|=64;const o=tt(i);if(io(i)&&!o)return i;i=o}return null}const Ha=new lt("",{providedIn:"root",factory:()=>!1});let tv=null;function G0(i,o){return i[o]??aC()}function sC(i,o){const a=aC();a.producerNode?.length&&(i[o]=tv,a.lView=i,tv=oC())}const nv={...cc,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{$a(i.lView)},lView:null};function oC(){return Object.create(nv)}function aC(){return tv??=oC(),tv}const Ot={};function z0(i){Kr(Lt(),Ae(),Ln()+i,!1)}function Kr(i,o,a,c){if(!c)if(3==(3&o[Ft])){const p=i.preOrderCheckHooks;null!==p&&Cc(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Ca(o,p,0,a)}Vn(a)}function Qo(i,o=yt.Default){const a=Ae();return null===a?nn(i,o):id(er(),a,Re(i),o)}function Fu(){throw new Error("invalid")}function rv(i,o,a,c,d,p,y,w,C,S,x){const F=o.blueprint.slice();return F[xn]=d,F[Ft]=140|c,(null!==S||i&&2048&i[Ft])&&(F[Ft]|=2048),yc(F),F[dn]=F[Rs]=i,F[Rn]=a,F[zi]=y||i&&i[zi],F[mt]=w||i&&i[mt],F[no]=C||i&&i[no]||null,F[Ur]=p,F[Mi]=function li(){return q_++}(),F[Os]=x,F[uh]=S,F[Jn]=2==o.type?i[Jn]:F,F}function ke(i,o,a,c,d){let p=i.data[o];if(null===p)p=function nr(i,o,a,c,d){const p=ql(),y=Xl(),C=i.data[o]=function dS(i,o,a,c,d,p){let y=o?o.injectorIndex:-1,w=0;return function Us(){return null!==St.skipHydrationRootTNode}()&&(w|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C,C.prev=p)),C}(i,o,a,c,d),function Ih(){return St.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const y=function Ql(){const i=St.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return oi(p,!0),p}function Fi(i,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function iv(i,o,a,c,d){const p=G0(o,ro),y=Ln(),w=2&c;try{Vn(-1),w&&o.length>Xt&&Kr(i,o,Xt,!1),cs(w?2:0,d);const S=w?p:null,x=ur(S);try{null!==S&&(S.dirty=!1),a(c,d)}finally{lc(S,x)}}finally{w&&null===o[ro]&&sC(o,ro),Vn(y),cs(w?3:1,d)}}function it(i,o,a){if(Dl(o)){const c=_r(null);try{const p=o.directiveEnd;for(let y=o.directiveStart;y<p;y++){const w=i.data[y];w.contentQueries&&w.contentQueries(1,a[y],y)}}finally{_r(c)}}}function pt(i,o,a){va()&&(function pS(i,o,a,c){const d=a.directiveStart,p=a.directiveEnd;Sr(a)&&function Mg(i,o,a){const c=si(o,i),d=Ze(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const w=pf(i,rv(i,d,null,y,c,o,null,i[zi].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=w}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||so(a,o),xr(c,o);const y=a.initialInputs;for(let w=d;w<p;w++){const C=i.data[w],S=Ma(o,i,w,a);xr(S,o),null!==y&&Ws(0,w-d,S,C,0,y),ii(C)&&(yi(a.index,o)[Rn]=Ma(o,i,w,a))}}(i,o,a,si(a,o)),64==(64&a.flags)&&rr(i,o,a))}function W0(i,o,a=si){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],w=-1===y?a(o,i):i[y];i[d++]=w}}}function Ze(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=ae(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function ae(i,o,a,c,d,p,y,w,C,S,x){const F=Xt+c,z=F+d,W=function Me(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Ot);return a}(F,z),me="function"==typeof S?S():S;return W[$e]={type:i,blueprint:W,template:a,queries:null,viewQuery:w,declTNode:o,data:W.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:me,incompleteFirstPass:!1,ssrId:x}}let cC=i=>null;function q0(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?lC(a,o,d,p):c.hasOwnProperty(d)&&lC(a,o,c[d],p)}return a}function lC(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function ps(i,o,a,c,d,p,y,w){const C=si(o,a);let x,S=o.inputs;!w&&null!=S&&(x=S[c])?(Y0(i,a,x,c,d),Sr(o)&&function jt(i,o){const a=yi(o,i);16&a[Ft]||(a[Ft]|=64)}(a,o.index)):3&o.type&&(c=function hS(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,o.value||"",c):d,p.setProperty(C,c,d))}function On(i,o,a,c){if(va()){const d=null===c?null:{"":-1},p=function sv(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];if(fl(o,y.selectors,!1))if(c||(c=[]),ii(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),c.unshift(...w,y),Sg(i,o,w.length)}else c.unshift(y),Sg(i,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,w;null===p?y=w=null:[y,w]=p,null!==y&&vt(i,o,a,y,d,w),d&&function Rd(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new ne(-301,!1);c.push(o[d],p)}}}(a,c,d)}a.mergedAttrs=Gi(a.mergedAttrs,a.attrs)}function vt(i,o,a,c,d,p){for(let S=0;S<c.length;S++)oo(so(a,o),i,c[S].type);!function ov(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let S=0;S<c.length;S++){const x=c[S];x.providersResolver&&x.providersResolver(x)}let y=!1,w=!1,C=Fi(i,o,c.length,null);for(let S=0;S<c.length;S++){const x=c[S];a.mergedAttrs=Gi(a.mergedAttrs,x.hostAttrs),mS(i,a,o,C,x),gS(C,x,d),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const F=x.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!w&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),w=!0),C++}!function Gx(i,o,a){const d=o.directiveEnd,p=i.data,y=o.attrs,w=[];let C=null,S=null;for(let x=o.directiveStart;x<d;x++){const F=p[x],z=a?a.get(F):null,me=z?z.outputs:null;C=q0(F.inputs,x,C,z?z.inputs:null),S=q0(F.outputs,x,S,me);const Le=null===C||null===y||mp(o)?null:dC(C,x,y);w.push(Le)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=w,o.inputs=C,o.outputs=S}(i,a,p)}function rr(i,o,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,y=function Dh(){return St.lFrame.currentDirectiveIndex}();try{Vn(p);for(let w=c;w<d;w++){const C=i.data[w],S=o[w];Ch(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Xe(C,S)}}finally{Vn(-1),Ch(y)}}function Xe(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Sg(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function gS(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;ii(o)&&(a[""]=i)}}function mS(i,o,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=Fs(d.type)),y=new Xi(p,ii(d),Qo);i.blueprint[c]=y,a[c]=y,function Ag(i,o,a,c,d){const p=d.hostBindings;if(p){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~o.index;(function cn(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,c,p)}}(i,o,c,Fi(i,a,d.hostVars,Ot),d)}function Xo(i,o,a,c,d,p){const y=si(i,o);!function av(i,o,a,c,d,p,y){if(null==p)i.removeAttribute(o,d,a);else{const w=null==y?te(p):y(p,c||"",d);i.setAttribute(o,d,w,a)}}(o[mt],y,p,i.value,a,c,d)}function Ws(i,o,a,c,d,p){const y=p[o];if(null!==y)for(let w=0;w<y.length;)uv(c,a,y[w++],y[w++],y[w++])}function uv(i,o,a,c,d){const p=_r(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(d=y[c].call(o,d)),null!==i.setInput?i.setInput(o,d,a,c):o[c]=d}finally{_r(p)}}function dC(i,o,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const y=i[p];for(let w=0;w<y.length;w+=2)if(y[w]===o){c.push(p,y[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Q0(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null,null]}function Lu(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const y=i.data[p];Ic(a[c]),y.contentQueries(2,o[p],p)}}}function pf(i,o){return i[oc]?i[su][gi]=o:i[oc]=o,i[su]=o,o}function se(i,o,a){Ic(0);const c=_r(null);try{o(i,a)}finally{_r(c)}}function fo(i){return i[to]||(i[to]=[])}function hC(i){return i.cleanup||(i.cleanup=[])}function gf(i,o,a){return(null===i||ii(i))&&(a=function ma(i){for(;Array.isArray(i);){if("object"==typeof i[ou])return i;i=i[xn]}return null}(a[o.index])),a[mt]}function Vu(i,o){const a=i[no],c=a?a.get(zo,null):null;c&&c.handleError(o)}function Y0(i,o,a,c,d){for(let p=0;p<a.length;){const y=a[p++],w=a[p++];uv(i.data[y],o[y],c,w,d)}}function fC(i,o){const a=yi(o,i),c=a[$e];!function Z0(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const d=a[xn];null!==d&&null===a[Os]&&(a[Os]=T0(d,a[no])),J0(c,a,a[Rn])}function J0(i,o,a){qi(o);try{const c=i.viewQuery;null!==c&&se(1,c,a);const d=i.template;null!==d&&iv(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Lu(i,o),i.staticViewQueries&&se(2,i.viewQuery,a);const p=i.components;null!==p&&function yS(i,o){for(let a=0;a<o.length;a++)fC(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Ft]&=-5,Ro()}}let gs=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const p=typeof Zone>"u"?null:Zone.current,y=function ph(i,o,a){const c=Object.create(mc);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=o;const d=y=>{c.cleanupFn=y};return c.ref={notify:()=>Dp(c),run:()=>{if(c.dirty=!1,c.hasRun&&!Rl(c))return;c.hasRun=!0;const y=ur(c);try{c.cleanupFn(),c.cleanupFn=gh,c.fn(d)}finally{lc(c,y)}},cleanup:()=>c.cleanupFn()},c.ref}(a,S=>{this.all.has(S)&&this.queue.set(S,p)},d);let w;this.all.add(y),y.notify();const C=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=c?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Pt({token:i,providedIn:"root",factory:()=>new i})}return i})();function Uc(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?p=w:1==p?d=Ue(d,w):2==p&&(c=Ue(c,w+": "+o[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function mf(i,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];null!==p&&c.push(on(p)),Ar(p)&&wi(p,c);const y=a.type;if(8&y)mf(i,o,a.child,c);else if(32&y){const w=xe(a,o);let C;for(;C=w();)c.push(C)}else if(16&y){const w=mD(o,a);if(Array.isArray(w))c.push(...w);else{const C=tt(o[Jn]);mf(C[$e],C,w,c,!0)}}a=d?a.projectionNext:a.next}return c}function wi(i,o){for(let a=ar;a<i.length;a++){const c=i[a],d=c[$e].firstChild;null!==d&&mf(c[$e],c,d,o)}i[mi]!==i[xn]&&o.push(i[mi])}function cv(i,o,a,c=!0){const d=o[zi],p=d.rendererFactory,y=d.afterRenderEventManager;p.begin?.(),y?.begin();try{eE(i,o,i.template,a)}catch(C){throw c&&Vu(o,C),C}finally{p.end?.(),d.effectManager?.flush(),y?.end()}}function eE(i,o,a,c){const d=o[Ft];if(256!=(256&d)){o[zi].effectManager?.flush(),qi(o);try{yc(o),function Zl(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&iv(i,o,a,2,c);const y=3==(3&d);if(y){const S=i.preOrderCheckHooks;null!==S&&Cc(o,S,null)}else{const S=i.preOrderHooks;null!==S&&Ca(o,S,0,null),Th(o,0)}if(function pC(i){for(let o=Hs(i);null!==o;o=$h(o)){if(!o[as])continue;const a=o[Ps];for(let c=0;c<a.length;c++){Hl(a[c])}}}(o),xg(o,2),null!==i.contentQueries&&Lu(i,o),y){const S=i.contentCheckHooks;null!==S&&Cc(o,S)}else{const S=i.contentHooks;null!==S&&Ca(o,S,1),Th(o,1)}!function K0(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const c=G0(o,os);try{for(let d=0;d<a.length;d++){const p=a[d];if(p<0)Vn(~p);else{const y=p,w=a[++d],C=a[++d];ty(w,y),c.dirty=!1;const S=ur(c);try{C(2,o[y])}finally{lc(c,S)}}}}finally{null===o[os]&&sC(o,os),Vn(-1)}}(i,o);const w=i.components;null!==w&&mC(o,w,0);const C=i.viewQuery;if(null!==C&&se(2,C,c),y){const S=i.viewCheckHooks;null!==S&&Cc(o,S)}else{const S=i.viewHooks;null!==S&&Ca(o,S,2),Th(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Ft]&=-73,Zm(o)}finally{Ro()}}}function xg(i,o){for(let a=Hs(i);null!==a;a=$h(a))for(let c=ar;c<a.length;c++)gC(a[c],o)}function _S(i,o,a){gC(yi(o,i),a)}function gC(i,o){if(!function Ap(i){return 128==(128&i[Ft])}(i))return;const a=i[$e],c=i[Ft];if(80&c&&0===o||1024&c||2===o)eE(a,i,a.template,i[Rn]);else if(i[la]>0){xg(i,1);const d=a.components;null!==d&&mC(i,d,1)}}function mC(i,o,a){for(let c=0;c<o.length;c++)_S(i,o[c],a)}class Rg{get rootNodes(){const o=this._lView,a=o[$e];return mf(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(o){this._lView[Rn]=o}get destroyed(){return 256==(256&this._lView[Ft])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[dn];if(Ar(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Pi(o,c),od(a,c))}this._attachedToViewContainer=!1}zh(this._lView[$e],this._lView)}onDestroy(o){!function Sp(i,o){if(256==(256&i[Ft]))throw new ne(911,!1);null===i[Ki]&&(i[Ki]=[]),i[Ki].push(o)}(this._lView,o)}markForCheck(){$a(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ft]&=-129}reattach(){this._lView[Ft]|=128}detectChanges(){cv(this._lView[$e],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Tt(i,o){Rr(i,o,o[mt],2,null,null)}(this._lView[$e],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=o}}class ES extends Rg{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;cv(o[$e],o,o[Rn],!1)}checkNoChanges(){}get context(){return null}}class yC extends yg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Kt(o);return new Og(a,this.ngModule)}}function vC(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class IS{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Qt(c);const d=this.injector.get(o,qn,c);return d!==qn||a===qn?d:this.parentInjector.get(o,a,c)}}class Og extends Wy{get inputs(){const o=this.componentDef,a=o.inputTransforms,c=vC(o.inputs);if(null!==a)for(const d of c)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return c}get outputs(){return vC(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Ai(i){return i.map(ah).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let p=(d=d||this.ngModule)instanceof Go?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new IS(o,p):o,w=y.get(_g,null);if(null===w)throw new ne(407,!1);const F={rendererFactory:w,sanitizer:y.get(Eg,null),effectManager:y.get(gs,null),afterRenderEventManager:y.get(bg,null)},z=w.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",me=c?function Wr(i,o,a,c){const p=c.get(Ha,!1)||a===ct.ShadowDom,y=i.selectRootElement(o,p);return function uC(i){cC(i)}(y),y}(z,c,this.componentDef.encapsulation,y):Gh(z,W,function wS(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(W)),Dt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ne=null;null!==me&&(Ne=T0(me,y,!0));const Vt=ae(0,null,null,1,0,null,null,null,null,null,null),bt=rv(null,Vt,null,Dt,null,null,F,z,y,null,Ne);let In,bi;qi(bt);try{const $n=this.componentDef;let op,PI=null;$n.findHostDirectiveDefs?(op=[],PI=new Map,$n.findHostDirectiveDefs($n,op,PI),op.push($n)):op=[$n];const fN=function CS(i,o){const a=i[$e],c=Xt;return i[c]=o,ke(a,c,2,"#host",null)}(bt,me),UT=function bS(i,o,a,c,d,p,y){const w=d[$e];!function TS(i,o,a,c){for(const d of i)o.mergedAttrs=Gi(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Uc(o,o.mergedAttrs,!0),null!==a&&e0(c,a,o))}(c,i,o,y);let C=null;null!==o&&(C=T0(o,d[no]));const S=p.rendererFactory.createRenderer(o,a);let x=16;a.signals?x=4096:a.onPush&&(x=64);const F=rv(d,Ze(a),null,x,d[i.index],i,p,S,null,null,C);return w.firstCreatePass&&Sg(w,i,c.length-1),pf(d,F),d[i.index]=F}(fN,me,$n,op,bt,F,z);bi=$l(Vt,Xt),me&&function _C(i,o,a,c){if(c)Ju(i,a,["ng-version",GD.full]);else{const{attrs:d,classes:p}=function gl(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++c]):8===d&&a.push(p);else{if(!br(d))break;d=p}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Ju(i,a,d),p&&p.length>0&&Iy(i,a,p.join(" "))}}(z,$n,me,c),void 0!==a&&function SS(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(bi,this.ngContentSelectors,a),In=function AS(i,o,a,c,d,p){const y=er(),w=d[$e],C=si(y,d);vt(w,d,y,a,null,c);for(let x=0;x<a.length;x++)xr(Ma(d,w,y.directiveStart+x,y),d);rr(w,d,y),C&&xr(C,d);const S=Ma(d,w,y.directiveStart+y.componentOffset,y);if(i[Rn]=d[Rn]=S,null!==p)for(const x of p)x(S,o);return it(w,y,i),S}(UT,$n,op,PI,bt,[EC]),J0(Vt,bt,null)}finally{Ro()}return new DS(this.componentType,In,af(bi,bt),bt,bi)}}class DS extends $D{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new ES(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const p=this._rootLView;Y0(p[$e],p,d,o,a),this.previousInputValues.set(o,a),$a(yi(this._tNode.index,p))}}get injector(){return new lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function EC(){const i=er();Da(Ae()[$e],i)}function nE(i){let o=function tE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(ii(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ne(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=Ir(i.inputs),y.inputTransforms=Ir(i.inputTransforms),y.declaredInputs=Ir(i.declaredInputs),y.outputs=Ir(i.outputs);const w=d.hostBindings;w&&IC(i,w);const C=d.viewQuery,S=d.contentQueries;if(C&&wC(i,C),S&&Bc(i,S),$(i.inputs,d.inputs),$(i.declaredInputs,d.declaredInputs),$(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),$(y.inputTransforms,d.inputTransforms)),ii(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(i),w===nE&&(a=!1)}}o=Object.getPrototypeOf(o)}!function rE(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Gi(d.hostAttrs,a=Gi(a,d.hostAttrs))}}(c)}function Ir(i){return i===gt?{}:i===Je?[]:i}function wC(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function Bc(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{o(c,d,p),a(c,d,p)}:o}function IC(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}function Or(i){const o=i.inputConfig,a={};for(const c in o)if(o.hasOwnProperty(c)){const d=o[c];Array.isArray(d)&&d[2]&&(a[c]=d[2])}i.inputTransforms=a}function Yo(i){return!!yf(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function yf(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ys(i,o,a){return i[o]=a}function ir(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function po(i,o,a,c){const d=Ae();return ir(d,xo(),o)&&(Lt(),Xo(et(),d,i,o,a,c)),po}function qs(i,o,a,c){return ir(i,xo(),a)?o+te(a)+c:Ot}function pE(i,o,a,c,d,p,y,w){const C=Ae(),S=Lt(),x=i+Xt,F=S.firstCreatePass?function ju(i,o,a,c,d,p,y,w,C){const S=o.consts,x=ke(o,i,4,y||null,No(S,w));On(o,a,x,No(S,C)),Da(o,x);const F=x.tView=ae(2,x,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S,null);return null!==o.queries&&(o.queries.template(o,x),F.queries=o.queries.embeddedTView(x)),x}(x,S,C,o,a,c,d,p,y):S.data[x];oi(F,!1);const z=Ud(S,C,F,i);Ri()&&vd(S,C,z,F),xr(z,C),pf(C,C[x]=Q0(z,C,z,F)),wo(F)&&pt(S,C,F),null!=y&&W0(C,F,w)}let Ud=function gE(i,o,a,c){return mn(!0),o[mt].createComment("")};function Hc(i){return function ls(i,o){return i[o]}(function ey(){return St.lFrame.contextLView}(),Xt+i)}function Di(i,o,a){const c=Ae();return ir(c,xo(),o)&&ps(Lt(),et(),c,i,o,c[mt],a,!1),Di}function Bg(i,o,a,c,d){const y=d?"class":"style";Y0(i,a,o.inputs[y],y,c)}function Gc(i,o,a,c){const d=Ae(),p=Lt(),y=Xt+i,w=d[mt],C=p.firstCreatePass?function yv(i,o,a,c,d,p){const y=o.consts,C=ke(o,i,2,c,No(y,d));return On(o,a,C,No(y,p)),null!==C.attrs&&Uc(C,C.attrs,!1),null!==C.mergedAttrs&&Uc(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,p,d,o,a,c):p.data[y],S=Df(p,d,C,w,o,i);d[y]=S;const x=wo(C);return oi(C,!0),e0(w,S,C),32!=(32&C.flags)&&Ri()&&vd(p,d,S,C),0===function cr(){return St.lFrame.elementDepthCount}()&&xr(S,d),function wh(){St.lFrame.elementDepthCount++}(),x&&(pt(p,d,C),it(p,C,d)),null!==c&&W0(d,C),Gc}function jg(){let i=er();Xl()?Yl():(i=i.parent,oi(i,!1));const o=i;(function _c(i){return St.skipHydrationRootTNode===i})(o)&&function fu(){St.skipHydrationRootTNode=null}(),function Mr(){St.lFrame.elementDepthCount--}();const a=Lt();return a.firstCreatePass&&(Da(a,i),Dl(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Rp(i){return 0!=(8&i.flags)}(o)&&Bg(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Tc(i){return 0!=(16&i.flags)}(o)&&Bg(a,o,Ae(),o.stylesWithoutHost,!1),jg}function $g(i,o,a,c){return Gc(i,o,a,c),jg(),$g}let Df=(i,o,a,c,d,p)=>(mn(!0),Gh(c,d,function yu(){return St.lFrame.currentNamespace}()));function mo(i,o,a){const c=Ae(),d=Lt(),p=i+Xt,y=d.firstCreatePass?function kS(i,o,a,c,d){const p=o.consts,y=No(p,c),w=ke(o,i,8,"ng-container",y);return null!==y&&Uc(w,y,!0),On(o,a,w,No(p,d)),null!==o.queries&&o.queries.elementStart(o,w),w}(p,d,c,o,a):d.data[p];oi(y,!0);const w=vE(d,c,y,i);return c[p]=w,Ri()&&vd(d,c,w,y),xr(w,c),wo(y)&&(pt(d,c,y),it(d,y,c)),null!=a&&W0(c,y),mo}function vv(){let i=er();const o=Lt();return Xl()?Yl():(i=i.parent,oi(i,!1)),o.firstCreatePass&&(Da(o,i),Dl(i)&&o.queries.elementEnd(i)),vv}let vE=(i,o,a,c)=>(mn(!0),md(o[mt],""));function Jo(){return Ae()}function _v(i){return!!i&&"function"==typeof i.then}function Cf(i){return!!i&&"function"==typeof i.subscribe}function _E(i,o,a,c){const d=Ae(),p=Lt(),y=er();return function LC(i,o,a,c,d,p,y){const w=wo(c),S=i.firstCreatePass&&hC(i),x=o[Rn],F=fo(o);let z=!0;if(3&c.type||y){const Le=si(c,o),We=y?y(Le):Le,Dt=F.length,Ne=y?bt=>y(on(bt[c.index])):c.index;let Vt=null;if(!y&&w&&(Vt=function Wt(i,o,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===c){const w=o[to],C=d[p+2];return w.length>C?w[C]:null}"string"==typeof y&&(p+=2)}return null}(i,o,d,c.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=p,Vt.__ngLastListenerFn__=p,z=!1;else{p=EE(c,o,x,p,!1);const bt=a.listen(We,d,p);F.push(p,bt),S&&S.push(d,Ne,Dt,Dt+1)}}else p=EE(c,o,x,p,!1);const W=c.outputs;let me;if(z&&null!==W&&(me=W[d])){const Le=me.length;if(Le)for(let We=0;We<Le;We+=2){const In=o[me[We]][me[We+1]].subscribe(p),bi=F.length;F.push(p,In),S&&S.push(d,c.index,bi,-(bi+1))}}}(p,d,d[mt],y,i,o,c),_E}function Ev(i,o,a,c){try{return cs(6,o,a),!1!==a(c)}catch(d){return Vu(i,d),!1}finally{cs(7,o,a)}}function EE(i,o,a,c,d){return function p(y){if(y===Function)return c;$a(i.componentOffset>-1?yi(i.index,o):o);let C=Ev(o,a,c,y),S=p.__ngNextListenerFn__;for(;S;)C=Ev(o,a,S,y)&&C,S=S.__ngNextListenerFn__;return d&&!1===C&&y.preventDefault(),C}}function wE(i=1){return function mu(i){return(St.lFrame.contextLView=function wa(i,o){for(;i>0;)o=o[Rs],i--;return o}(i,St.lFrame.contextLView))[Rn]}(i)}function IE(i,o,a){return Iv(i,"",o,"",a),IE}function Iv(i,o,a,c,d){const p=Ae(),y=qs(p,o,a,c);return y!==Ot&&ps(Lt(),et(),p,i,y,p[mt],d,!1),Iv}function Wc(i,o){return i<<17|o<<2}function qc(i){return i>>17&32767}function bf(i){return 2|i}function Wa(i){return(131068&i)>>2}function Dv(i,o){return-131069&i|o<<2}function $d(i){return 1|i}function AE(i,o,a,c,d){const p=i[a+1],y=null===o;let w=c?qc(p):Wa(p),C=!1;for(;0!==w&&(!1===C||y);){const x=i[w+1];UC(i[w],o)&&(C=!0,i[w+1]=c?$d(x):bf(x)),w=c?qc(x):Wa(x)}C&&(i[a+1]=c?bf(p):$d(p))}function UC(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Ra(i,o)>=0}const Pr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Hd(i){return i.substring(Pr.key,Pr.keyEnd)}function Cv(i,o){const a=Pr.textEnd;return a===o?-1:(o=Pr.keyEnd=function ln(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,Pr.key=o,a),Bn(i,o,a))}function Bn(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function OE(i,o,a){return ts(i,o,a,!1),OE}function bv(i,o){return ts(i,o,null,!0),bv}function Af(i){!function Es(i,o,a,c){const d=Lt(),p=Wi(2);d.firstUpdatePass&&FE(d,null,p,c);const y=Ae();if(a!==Ot&&ir(y,p,a)){const w=d.data[Ln()];if(jE(w,c)&&!kE(d,p)){let C=c?w.classesWithoutHost:w.stylesWithoutHost;null!==C&&(a=Ue(C,a||"")),Bg(d,w,y,a,c)}else!function Sf(i,o,a,c,d,p,y,w){d===Ot&&(d=Je);let C=0,S=0,x=0<d.length?d[0]:null,F=0<p.length?p[0]:null;for(;null!==x||null!==F;){const z=C<d.length?d[C+1]:void 0,W=S<p.length?p[S+1]:void 0;let Le,me=null;x===F?(C+=2,S+=2,z!==W&&(me=F,Le=W)):null===F||null!==x&&x<F?(C+=2,me=x):(S+=2,me=F,Le=W),null!==me&&UE(i,o,a,c,me,Le,y,w),x=C<d.length?d[C]:null,F=S<p.length?p[S]:null}}(d,w,y,y[mt],y[p+1],y[p+1]=function $S(i,o,a){if(null==a||""===a)return Je;const c=[],d=Gs(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)i(c,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&i(c,p,d[p]);else"string"==typeof d&&o(c,d);return c}(i,o,a),c,p)}}(VE,_s,i,!0)}function _s(i,o){for(let a=function ME(i){return function jC(i){Pr.key=0,Pr.keyEnd=0,Pr.value=0,Pr.valueEnd=0,Pr.textEnd=i.length}(i),Cv(i,Bn(i,0,Pr.textEnd))}(o);a>=0;a=Cv(o,a))ui(i,Hd(o),!0)}function ts(i,o,a,c){const d=Ae(),p=Lt(),y=Wi(2);p.firstUpdatePass&&FE(p,i,y,c),o!==Ot&&ir(d,y,o)&&UE(p,p.data[Ln()],d,d[mt],i,d[y+1]=function BE(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=X(Gs(i)))),i}(o,a),c,y)}function kE(i,o){return o>=i.expandoStartIndex}function FE(i,o,a,c){const d=i.data;if(null===d[a+1]){const p=d[Ln()],y=kE(i,a);jE(p,c)&&null===o&&!y&&(o=!1),o=function HC(i,o,a,c){const d=gu(i);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=zg(a=LE(null,i,o,a,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==d)if(a=LE(d,i,o,a,c),null===p){let C=function jS(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Wa(c))return i[qc(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=LE(null,i,o,C[1],c),C=zg(C,o.attrs,c),function GC(i,o,a,c){i[qc(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else p=function zC(i,o,a){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=zg(c,i[p].hostAttrs,a);return zg(c,o.attrs,a)}(i,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,c),function Tf(i,o,a,c,d,p){let y=p?o.classBindings:o.styleBindings,w=qc(y),C=Wa(y);i[c]=a;let x,S=!1;if(Array.isArray(a)?(x=a[1],(null===x||Ra(a,x)>0)&&(S=!0)):x=a,d)if(0!==C){const z=qc(i[w+1]);i[c+1]=Wc(z,w),0!==z&&(i[z+1]=Dv(i[z+1],c)),i[w+1]=function Xn(i,o){return 131071&i|o<<17}(i[w+1],c)}else i[c+1]=Wc(w,0),0!==w&&(i[w+1]=Dv(i[w+1],c)),w=c;else i[c+1]=Wc(C,0),0===w?w=c:i[C+1]=Dv(i[C+1],c),C=c;S&&(i[c+1]=bf(i[c+1])),AE(i,x,c,!0),AE(i,x,c,!1),function $u(i,o,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Ra(p,o)>=0&&(a[c+1]=$d(a[c+1]))}(o,x,i,c,p),y=Wc(w,C),p?o.classBindings=y:o.styleBindings=y}(d,p,o,a,y,c)}}function LE(i,o,a,c,d){let p=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(p=o[w],c=zg(c,p.hostAttrs,d),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function zg(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ui(i,y,!!a||o[++p]))}return void 0===i?null:i}function VE(i,o,a){const c=String(o);""!==c&&!c.includes(" ")&&ui(i,c,a)}function UE(i,o,a,c,d,p,y,w){if(!(3&o.type))return;const C=i.data,S=C[w+1],x=function VS(i){return 1==(1&i)}(S)?WC(C,o,a,d,Wa(S),y):void 0;Yn(x)||(Yn(p)||function LS(i){return 2==(2&i)}(S)&&(p=WC(C,null,a,d,w,y)),function kA(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Bh.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Bh.Important),i.setStyle(a,c,d,p))}}(c,y,So(Ln(),a),d,p))}function WC(i,o,a,c,d,p){const y=null===o;let w;for(;d>0;){const C=i[d],S=Array.isArray(C),x=S?C[1]:C,F=null===x;let z=a[d+1];z===Ot&&(z=F?Je:void 0);let W=F?jp(z,c):x===c?z:void 0;if(S&&!Yn(W)&&(W=jp(C,c)),Yn(W)&&(w=W,y))return w;const me=i[d+1];d=y?qc(me):Wa(me)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(w=jp(C,c))}return w}function Yn(i){return void 0!==i}function jE(i,o){return 0!=(i.flags&(o?8:16))}function Mf(i,o=""){const a=Ae(),c=Lt(),d=i+Xt,p=c.firstCreatePass?ke(c,d,1,o,null):c.data[d],y=ta(c,a,p,o,i);a[d]=y,Ri()&&vd(c,a,y,p),oi(p,!1)}let ta=(i,o,a,c,d)=>(mn(!0),function Hh(i,o){return i.createText(o)}(o[mt],c));function Gd(i){return Kg("",i,""),Gd}function Kg(i,o,a){const c=Ae(),d=qs(c,i,o,a);return d!==Ot&&function Ji(i,o,a){const c=So(o,i);!function yy(i,o,a){i.setValue(o,a)}(i[mt],c,a)}(c,Ln(),d),Kg}function Nv(i,o,a){const c=Ae();if(ir(c,xo(),o)){const p=Lt(),y=et();ps(p,y,c,i,o,gf(gu(p.data),y,c),a,!0)}return Nv}const qa=void 0;var Kd=["en",[["a","p"],["AM","PM"],qa],[["AM","PM"],qa,qa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qa,"{1} 'at' {0}",qa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Wg(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Of={};function YE(i){const o=function ob(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Pf(o);if(a)return a;const c=o.split("-")[0];if(a=Pf(c),a)return a;if("en"===c)return Kd;throw new ne(701,!1)}function sb(i){return YE(i)[Qs.PluralCase]}function Pf(i){return i in Of||(Of[i]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[i]),Of[i]}var Qs=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Qs||{});const Ff="en-US";let JE=Ff;function Lv(i,o,a,c,d){if(i=Re(i),Array.isArray(i))for(let p=0;p<i.length;p++)Lv(i[p],o,a,c,d);else{const p=Lt(),y=Ae(),w=er();let C=wr(i)?i:Re(i.provide);const S=fg(i),x=1048575&w.providerIndexes,F=w.directiveStart,z=w.providerIndexes>>20;if(wr(i)||!i.multi){const W=new Xi(S,d,Qo),me=Qd(C,o,d?x:x+z,F);-1===me?(oo(so(w,y),p,C),um(p,i,o.length),o.push(C),w.directiveStart++,w.directiveEnd++,d&&(w.providerIndexes+=1048576),a.push(W),y.push(W)):(a[me]=W,y[me]=W)}else{const W=Qd(C,o,x+z,F),me=Qd(C,o,x,x+z),We=me>=0&&a[me];if(d&&!We||!d&&!(W>=0&&a[W])){oo(so(w,y),p,C);const Dt=function pw(i,o,a,c,d){const p=new Xi(i,a,Qo);return p.multi=[],p.index=o,p.componentProviders=0,cm(p,d,c&&!a),p}(d?fw:Vv,a.length,d,c,S);!d&&We&&(a[me].providerFactory=Dt),um(p,i,o.length,0),o.push(C),w.directiveStart++,w.directiveEnd++,d&&(w.providerIndexes+=1048576),a.push(Dt),y.push(Dt)}else um(p,i,W>-1?W:me,cm(a[d?me:W],S,!d&&c));!d&&c&&We&&a[me].componentProviders++}}}function um(i,o,a,c){const d=wr(o),p=function OD(i){return!!i.useClass}(o);if(d||p){const C=(p?Re(o.useClass):o).prototype.ngOnDestroy;if(C){const S=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const x=S.indexOf(a);-1===x?S.push(a,[c,C]):S[x+1].push(c,C)}else S.push(a,C)}}}function cm(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Qd(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function Vv(i,o,a,c){return lm(this.multi,[])}function fw(i,o,a,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Ma(a,a[$e],this.providerFactory.index,c);p=w.slice(0,y),lm(d,p);for(let C=y;C<w.length;C++)p.push(w[C])}else p=[],lm(d,p);return p}function lm(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function gw(i,o=[]){return a=>{a.providersResolver=(c,d)=>function Mb(i,o,a){const c=Lt();if(c.firstCreatePass){const d=ii(i);Lv(a,c.data,c.blueprint,d,!0),Lv(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class Xd{}class mw{}function Uv(i,o){return new yw(i,o??null,[])}class yw extends Xd{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yC(this);const d=ti(o);this._bootstrapComponents=Wo(d.bootstrap),this._r3Injector=k0(o,a,[{provide:Xd,useValue:this},{provide:yg,useValue:this.componentFactoryResolver},...c],X(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class vw extends mw{constructor(o){super(),this.moduleType=o}create(o){return new yw(this.moduleType,o,[])}}class xb extends Xd{constructor(o){super(),this.componentFactoryResolver=new yC(this),this.instance=null;const a=new Ua([...o.providers,{provide:Xd,useValue:this},{provide:yg,useValue:this.componentFactoryResolver}],o.parent||dg(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function _w(i,o,a=null){return new xb({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let Bv=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=Dd(0,a.type),d=c.length>0?_w([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Pt({token:i,providedIn:"environment",factory:()=>new i(nn(Go))})}return i})();function zf(i){i.getStandaloneInjector=o=>o.get(Bv).getOrCreateStandaloneInjector(i)}function Hv(i,o,a,c){return function Gv(i,o,a,c,d,p){const y=o+a;return ir(i,y,d)?ys(i,y+1,p?c.call(p,d):c(d)):Zc(i,y+1)}(Ae(),tr(),i,o,a,c)}function Ku(i,o,a,c,d){return function Sw(i,o,a,c,d,p,y){const w=o+a;return function vs(i,o,a,c){const d=ir(i,o,a);return ir(i,o+1,c)||d}(i,w,d,p)?ys(i,w+2,y?c.call(y,d,p):c(d,p)):Zc(i,w+2)}(Ae(),tr(),i,o,a,c,d)}function Zc(i,o){const a=i[o];return a===Ot?void 0:a}function Rw(){return this._results[Symbol.iterator]()}class Kv{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ko)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Kv.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Rw)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function Zi(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Cu(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Pw(i,o,a,c=!0){const d=o[$e];if(function Mu(i,o,a,c){const d=ar+c,p=a.length;c>0&&(a[d-1][gi]=o),c<p-ar?(o[gi]=a[d],B_(a,ar+c,o)):(a.push(o),o[gi]=null),o[dn]=a;const y=o[da];null!==y&&a!==y&&function X_(i,o){const a=i[Ps];o[Jn]!==o[dn][dn][Jn]&&(i[as]=!0),null===a?i[Ps]=[o]:a.push(o)}(y,o);const w=o[ri];null!==w&&w.insertView(i),o[Ft]|=128}(d,o,i,a),c){const p=ag(a,i),y=o[mt],w=$o(y,i[mi]);null!==w&&function ig(i,o,a,c,d,p){c[xn]=d,c[Ur]=o,Rr(i,c,a,1,d,p)}(d,i[Ur],y,o,w,p)}}let yo=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=qf}return i})();const kw=yo,Wf=class extends kw{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,c){const d=function Ow(i,o,a,c){const d=o.tView,w=rv(i,d,a,4096&i[Ft]?4096:16,null,o,null,null,null,c?.injector??null,c?.hydrationInfo??null);w[da]=i[o.index];const S=i[ri];return null!==S&&(w[ri]=S.createEmbeddedView(d)),J0(d,w,a),w}(this._declarationLView,this._declarationTContainer,o,{injector:a,hydrationInfo:c});return new Rg(d)}};function qf(){return pm(er(),Ae())}function pm(i,o){return 4&i.type?new Wf(o,i,af(i,o)):null}let Xf=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=TM}return i})();function TM(){return Uw(er(),Ae())}const $b=Xf,Hb=class extends $b{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return af(this._hostTNode,this._hostLView)}get injector(){return new lr(this._hostTNode,this._hostLView)}get parentInjector(){const o=Vo(this._hostTNode,this._hostLView);if(_u(o)){const a=Aa(o,this._hostLView),c=ba(o);return new lr(a[$e].data[c+8],a)}return new lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Vw(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-ar}createEmbeddedView(o,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const w=o.createEmbeddedViewImpl(a||{},p,null);return this.insertImpl(w,d,false),w}createComponent(o,a,c,d,p){const y=o&&!function jr(i){return"function"==typeof i}(o);let w;if(y)w=a;else{const Le=a||{};w=Le.index,c=Le.injector,d=Le.projectableNodes,p=Le.environmentInjector||Le.ngModuleRef}const C=y?o:new Og(Kt(o)),S=c||this.parentInjector;if(!p&&null==C.ngModule){const We=(y?S:this.parentInjector).get(Go,null);We&&(p=We)}Kt(C.componentType??{});const W=C.create(S,d,null,p);return this.insertImpl(W.hostView,w,false),W}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,c){const d=o._lView;if(function Mo(i){return Ar(i[dn])}(d)){const C=this.indexOf(o);if(-1!==C)this.detach(C);else{const S=d[dn],x=new Hb(S,S[Ur],S[dn]);x.detach(x.indexOf(o))}}const y=this._adjustIndex(a),w=this._lContainer;return Pw(w,d,y,!c),o.attachToViewContainerRef(),B_(Qv(w),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Vw(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Pi(this._lContainer,a);c&&(od(Qv(this._lContainer),a),zh(c[$e],c))}detach(o){const a=this._adjustIndex(o,-1),c=Pi(this._lContainer,a);return c&&null!=od(Qv(this._lContainer),a)?new Rg(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Vw(i){return i[8]}function Qv(i){return i[8]||(i[8]=[])}function Uw(i,o){let a;const c=o[i.index];return Ar(c)?a=c:(a=Q0(c,o,null,i),o[i.index]=a,pf(o,a)),zb(a,o,i,c),new Hb(a,i,o)}let zb=function Kb(i,o,a,c){if(i[mi])return;let d;d=8&a.type?on(c):function Gb(i,o){const a=i[mt],c=a.createComment(""),d=si(o,i);return Kh(a,$o(a,d),c,function hn(i,o){return i.nextSibling(o)}(a,d),!1),c}(o,a),i[mi]=d};class gm{constructor(o){this.queryList=o,this.matches=null}clone(){return new gm(this.queryList)}setDirty(){this.queryList.setDirty()}}class mm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const y=a.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new mm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==e_(o,a).matches&&this.queries[a].setDirty()}}class Xv{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Bw{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new Bw(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ym{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new ym(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,MM(a,p)),this.matchTNodeWithReadOption(o,a,Du(a,o,p,!1,!1))}else c===yo?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Du(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Vc||d===Xf||d===yo&&4&a.type)this.addMatch(a.index,-2);else{const p=Du(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function MM(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function Wb(i,o,a,c){return-1===a?function jw(i,o){return 11&i.type?af(i,o):4&i.type?pm(i,o):null}(o,i):-2===a?function $w(i,o,a){return a===Vc?af(o,i):a===yo?pm(o,i):a===Xf?Uw(o,i):void 0}(i,o,c):Ma(i,i[$e],a,o)}function Hw(i,o,a,c){const d=o[ri].queries[c];if(null===d.matches){const p=i.data,y=a.matches,w=[];for(let C=0;C<y.length;C+=2){const S=y[C];w.push(S<0?null:Wb(o,p[S],y[C+1],a.metadata.read))}d.matches=w}return d.matches}function Gw(i,o,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const y=Hw(i,o,d,a);for(let w=0;w<p.length;w+=2){const C=p[w];if(C>0)c.push(y[w/2]);else{const S=p[w+1],x=o[-C];for(let F=ar;F<x.length;F++){const z=x[F];z[da]===z[dn]&&Gw(z[$e],z,S,c)}if(null!==x[Ps]){const F=x[Ps];for(let z=0;z<F.length;z++){const W=F[z];Gw(W[$e],W,S,c)}}}}}return c}function Yv(i){const o=Ae(),a=Lt(),c=xp();Ic(c+1);const d=e_(a,c);if(i.dirty&&function ya(i){return 4==(4&i[Ft])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Gw(a,o,c,[]):Hw(a,o,d,c);i.reset(p,vg),i.notifyOnChanges()}return!0}return!1}function Zv(i,o,a,c){const d=Lt();if(d.firstCreatePass){const p=er();(function Jv(i,o,a){null===i.queries&&(i.queries=new Bw),i.queries.track(new ym(o,a))})(d,new Xv(o,a,c),p.index),function Kw(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Qb(i,o,a){const c=new Kv(4==(4&a));(function lS(i,o,a,c){const d=fo(o);d.push(a),i.firstCreatePass&&hC(i).push(c,d.length-1)})(i,o,c,c.destroy),null===o[ri]&&(o[ri]=new mm),o[ri].queries.push(new gm(c))}(d,Ae(),a)}function qb(){return function zw(i,o){return i[ri].queries[o].queryList}(Ae(),xp())}function e_(i,o){return i.queries.getByIndex(o)}function vm(i){return!!ti(i)}const uT=new lt("Application Initializer");let d_=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Rt(uT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const p=d();if(_v(p))a.push(p);else if(Cf(p)){const y=new Promise((w,C)=>{p.subscribe({complete:w,error:C})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=Pt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),aI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=Pt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const Cm=new lt("LocaleId",{providedIn:"root",factory:()=>Rt(Cm,yt.Optional|yt.SkipSelf)||function uI(){return typeof $localize<"u"&&$localize.locale||Ff}()}),cT=new lt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let lI=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new re.t(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=Pt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class lT{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let bm=(()=>{class i{compileModuleSync(a){return new vw(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Wo(ti(a).declarations).reduce((y,w)=>{const C=Kt(w);return C&&y.push(new Og(C)),y},[]);return new lT(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=Pt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ia=new lt(""),Qa=new lt("");let mI,u1=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,mI||(function p_(i){mI=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(nn(zr),nn(tl),nn(Qa))};static#t=this.\u0275prov=Pt({token:i,factory:i.\u0275fac})}return i})(),tl=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return mI?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=Pt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),nl=null;const yI=new lt("AllowMultipleToken"),g_=new lt("PlatformDestroyListeners"),Jf=new lt("appBootstrapListener");class yT{constructor(o,a){this.name=o,this.token=a}}function m_(i,o,a=[]){const c=`Platform: ${o}`,d=new lt(c);return(p=[])=>{let y=y_();if(!y||y.injector.get(yI,!1)){const w=[...a,...p,{provide:d,useValue:!0}];i?i(w):function vI(i){if(nl&&!nl.get(yI,!1))throw new ne(400,!1);(function Am(){!function pc(i){kl=i}(()=>{throw new ne(600,!1)})})(),nl=i;const o=i.get(wI);(function vT(i){i.get(D0,null)?.forEach(a=>a())})(i)}(function EI(i=[],o){return Ks.create({name:o,providers:[{provide:Cd,useValue:"platform"},{provide:g_,useValue:new Set([()=>nl=null])},...i]})}(w,c))}return function _I(i){const o=y_();if(!o)throw new ne(401,!1);return o}()}}function y_(){return nl?.get(wI)??null}let wI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Mm(i="zone.js",o){return"noop"===i?new JD:"zone.js"===i?new zr(o):i}(c?.ngZone,function v_(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const p=function Ui(i,o,a){return new yw(i,o,a)}(a.moduleType,this.injector,function rp(i){return[{provide:zr,useFactory:i},{provide:Yh,multi:!0,useFactory:()=>{const o=Rt(wT,{optional:!0});return()=>o.initialize()}},{provide:ET,useFactory:__},{provide:Cg,useFactory:fs}]}(()=>d)),y=p.injector.get(zo,null);return d.runOutsideAngular(()=>{const w=d.onError.subscribe({next:C=>{y.handleError(C)}});p.onDestroy(()=>{xm(this._modules,p),w.unsubscribe()})}),function _T(i,o,a){try{const c=a();return _v(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const w=p.injector.get(d_);return w.runInitializers(),w.donePromise.then(()=>(function Qg(i){Ye(i,"Expected localeId to be defined"),"string"==typeof i&&(JE=i.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Cm,Ff)||Ff),this._moduleDoBootstrap(p),p))})})}bootstrapModule(a,c=[]){const d=Nm({},c);return function qM(i,o,a){const c=new vw(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(Wu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ne(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(g_,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(nn(Ks))};static#t=this.\u0275prov=Pt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function Nm(i,o){return Array.isArray(o)?o.reduce(Nm,i):{...i,...o}}let Wu=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Rt(ET),this.zoneIsStable=Rt(Cg),this.componentTypes=[],this.components=[],this.isStable=Rt(lI).hasPendingTasks.pipe((0,Pe.n)(a=>a?(0,le.of)(!1):this.zoneIsStable),(0,he.F)(),(0,ge.u)()),this._injector=Rt(Go)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Wy;if(!this._injector.get(d_).done)throw!d&&eo(a),new ne(405,!1);let y;y=d?a:this._injector.get(yg).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function Sm(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Xd),S=y.create(Ks.NULL,[],c||y.selector,w),x=S.location.nativeElement,F=S.injector.get(ia,null);return F?.registerApplication(x),S.onDestroy(()=>{this.detachView(S.hostView),xm(this.components,S),F?.unregisterApplication(x)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new ne(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;xm(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Jf,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>xm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ne(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=Pt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function xm(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const ET=new lt("",{providedIn:"root",factory:()=>Rt(zo).handleError.bind(void 0)});function __(){const i=Rt(zr),o=Rt(zo);return a=>i.runOutsideAngular(()=>o.handleError(a))}let wT=(()=>{class i{constructor(){this.zone=Rt(zr),this.applicationRef=Rt(Wu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=Pt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Rm(){return!1}let II=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=YM}return i})();function YM(i){return function E_(i,o,a){if(Sr(i)&&!a){const c=yi(i.index,o);return new Rg(c,c)}return 47&i.type?new Rg(o[Jn],o):null}(er(),Ae(),16==(16&i))}class JM{constructor(){}supports(o){return Yo(o)}create(o){return new qu(o)}}const eh=(i,o)=>o;class qu{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||eh}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const y=!c||a&&a.currentIndex<MI(c,d,p)?a:c,w=MI(y,d,p),C=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const S=w-d,x=C-d;if(S!=x){for(let z=0;z<S;z++){const W=z<p.length?p[z]:p[z]=0,me=W+z;x<=me&&me<S&&(p[z]=W+1)}p[y.previousIndex]=x-S}}w!==C&&o(y,w,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Yo(o))throw new ne(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],y=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,p,y,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,w),c=!0),a=a._next}else d=0,function Uu(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new km(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new CT),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new CT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class km{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sl{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class CT{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new sl,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function MI(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class bT{constructor(){}supports(o){return o instanceof Map||yf(o)}create(){return new ol}}class ol{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||yf(o)))throw new ne(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new eN(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class eN{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TT(){return new NI([new JM])}let NI=(()=>{class i{static#e=this.\u0275prov=Pt({token:i,providedIn:"root",factory:TT});constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||TT()),deps:[[i,new xh,new zp]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ne(901,!1)}}return i})();function AT(){return new C_([new bT])}let C_=(()=>{class i{static#e=this.\u0275prov=Pt({token:i,providedIn:"root",factory:AT});constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||AT()),deps:[[i,new xh,new zp]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ne(901,!1)}}return i})();const rN=m_(null,"core",[]);let sp=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(nn(Wu))};static#t=this.\u0275mod=ic({type:i});static#n=this.\u0275inj=qt({})}return i})();function b1(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function VT(i){const o=Kt(i);if(!o)return null;const a=new Og(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3345:(ht,Te,O)=>{O.d(Te,{A:()=>qe});var h=O(1076),Z=O(1362),P=O(7852),ee=O(8041);class re{constructor(ze,Ve){this._delegate=ze,this.firebase=Ve,(0,P._addComponent)(ze,new Z.uA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ze,Ve=P._DEFAULT_ENTRY_NAME){var Et;this._delegate.checkDestroyed();const ft=this._delegate.container.getProvider(ze);return!ft.isInitialized()&&"EXPLICIT"===(null===(Et=ft.getComponent())||void 0===Et?void 0:Et.instantiationMode)&&ft.initialize(),ft.getImmediate({identifier:Ve})}_removeServiceInstance(ze,Ve=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Ve)}_addComponent(ze){(0,P._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,P._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new h.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function he(){const Re=function Pe(Re){const ze={},Ve={__esModule:!0,initializeApp:function ne(Fe,Ke={}){const ue=P.initializeApp(Fe,Ke);if((0,h.gR)(ze,ue.name))return ze[ue.name];const Ct=new Re(ue,Ve);return ze[ue.name]=Ct,Ct},app:ft,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function te(Fe){const Ke=Fe.name,ue=Ke.replace("-compat","");if(P._registerComponent(Fe)&&"PUBLIC"===Fe.type){const Ct=(Gt=ft())=>{if("function"!=typeof Gt[ue])throw ge.create("invalid-app-argument",{appName:Ke});return Gt[ue]()};void 0!==Fe.serviceProps&&(0,h.zw)(Ct,Fe.serviceProps),Ve[ue]=Ct,Re.prototype[ue]=function(...Gt){return this._getService.bind(this,Ke).apply(this,Fe.multipleInstances?Gt:[])}}return"PUBLIC"===Fe.type?Ve[ue]:null},removeApp:function Et(Fe){delete ze[Fe]},useAsService:function Ce(Fe,Ke){return"serverAuth"===Ke?null:Ke},modularAPIs:P}};function ft(Fe){if(!(0,h.gR)(ze,Fe=Fe||P._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Fe});return ze[Fe]}return Ve.default=Ve,Object.defineProperty(Ve,"apps",{get:function _e(){return Object.keys(ze).map(Fe=>ze[Fe])}}),ft.App=Re,Ve}(re);return Re.INTERNAL=Object.assign(Object.assign({},Re.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ze(Ve){(0,h.zw)(Re,Ve)},createSubscribe:h.tD,ErrorFactory:h.FA,deepExtend:h.zw}),Re}(),$=new ee.Vy("@firebase/app-compat");if((0,h.Bd)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Re=self.firebase.SDK_VERSION;Re&&Re.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=V;!function Se(Re){(0,P.registerVersion)("@firebase/app-compat","0.2.13",Re)}()},7852:(ht,Te,O)=>{O.r(Te),O.d(Te,{FirebaseError:()=>ee.g,SDK_VERSION:()=>As,_DEFAULT_ENTRY_NAME:()=>yt,_addComponent:()=>Tn,_addOrOverwriteComponent:()=>Yr,_apps:()=>xt,_clearComponents:()=>lt,_components:()=>fn,_getProvider:()=>pr,_registerComponent:()=>an,_removeServiceInstance:()=>tu,deleteApp:()=>$i,getApp:()=>Lr,getApps:()=>Js,initializeApp:()=>nu,onLog:()=>Ss,registerVersion:()=>or,setLogLevel:()=>Nn});var h=O(467),Z=O(1362),P=O(8041),ee=O(1076);const re=(pe,J)=>J.some(Oe=>pe instanceof Oe);let le,ge;const V=new WeakMap,$=new WeakMap,X=new WeakMap,Ue=new WeakMap,Se=new WeakMap;let ze={get(pe,J,Oe){if(pe instanceof IDBTransaction){if("done"===J)return $.get(pe);if("objectStoreNames"===J)return pe.objectStoreNames||X.get(pe);if("store"===J)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return ne(pe[J])},set:(pe,J,Oe)=>(pe[J]=Oe,!0),has:(pe,J)=>pe instanceof IDBTransaction&&("done"===J||"store"===J)||J in pe};function ft(pe){return"function"==typeof pe?function Et(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...J){return pe.apply(_e(this),J),ne(V.get(this))}:function(...J){return ne(pe.apply(_e(this),J))}:function(J,...Oe){const ct=pe.call(_e(this),J,...Oe);return X.set(ct,J.sort?J.sort():[J]),ne(ct)}}(pe):(pe instanceof IDBTransaction&&function Re(pe){if($.has(pe))return;const J=new Promise((Oe,ct)=>{const gt=()=>{pe.removeEventListener("complete",Je),pe.removeEventListener("error",Jt),pe.removeEventListener("abort",Jt)},Je=()=>{Oe(),gt()},Jt=()=>{ct(pe.error||new DOMException("AbortError","AbortError")),gt()};pe.addEventListener("complete",Je),pe.addEventListener("error",Jt),pe.addEventListener("abort",Jt)});$.set(pe,J)}(pe),re(pe,function Pe(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,ze):pe)}function ne(pe){if(pe instanceof IDBRequest)return function qe(pe){const J=new Promise((Oe,ct)=>{const gt=()=>{pe.removeEventListener("success",Je),pe.removeEventListener("error",Jt)},Je=()=>{Oe(ne(pe.result)),gt()},Jt=()=>{ct(pe.error),gt()};pe.addEventListener("success",Je),pe.addEventListener("error",Jt)});return J.then(Oe=>{Oe instanceof IDBCursor&&V.set(Oe,pe)}).catch(()=>{}),Se.set(J,pe),J}(pe);if(Ue.has(pe))return Ue.get(pe);const J=ft(pe);return J!==pe&&(Ue.set(pe,J),Se.set(J,pe)),J}const _e=pe=>Se.get(pe),Fe=["get","getKey","getAll","getAllKeys","count"],Ke=["put","add","delete","clear"],ue=new Map;function Ct(pe,J){if(!(pe instanceof IDBDatabase)||J in pe||"string"!=typeof J)return;if(ue.get(J))return ue.get(J);const Oe=J.replace(/FromIndex$/,""),ct=J!==Oe,gt=Ke.includes(Oe);if(!(Oe in(ct?IDBIndex:IDBObjectStore).prototype)||!gt&&!Fe.includes(Oe))return;const Je=function(){var Jt=(0,h.A)(function*(zn,...kn){const ss=this.transaction(zn,gt?"readwrite":"readonly");let ei=ss.store;return ct&&(ei=ei.index(kn.shift())),(yield Promise.all([ei[Oe](...kn),gt&&ss.done]))[0]});return function(kn){return Jt.apply(this,arguments)}}();return ue.set(J,Je),Je}!function Ve(pe){ze=pe(ze)}(pe=>({...pe,get:(J,Oe,ct)=>Ct(J,Oe)||pe.get(J,Oe,ct),has:(J,Oe)=>!!Ct(J,Oe)||pe.has(J,Oe)}));class Gt{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function hr(pe){const J=pe.getComponent();return"VERSION"===J?.type}(Oe)){const ct=Oe.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(Oe=>Oe).join(" ")}}const Xr="@firebase/app",Hn=new P.Vy("@firebase/app"),yt="[DEFAULT]",zt={[Xr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xt=new Map,fn=new Map;function Tn(pe,J){try{pe.container.addComponent(J)}catch(Oe){Hn.debug(`Component ${J.name} failed to register with FirebaseApp ${pe.name}`,Oe)}}function Yr(pe,J){pe.container.addOrOverwriteComponent(J)}function an(pe){const J=pe.name;if(fn.has(J))return Hn.debug(`There were multiple attempts to register component ${J}.`),!1;fn.set(J,pe);for(const Oe of xt.values())Tn(Oe,pe);return!0}function pr(pe,J){const Oe=pe.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),pe.container.getProvider(J)}function tu(pe,J,Oe=yt){pr(pe,J).clearInstance(Oe)}function lt(){fn.clear()}const $t=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zs{constructor(J,Oe,ct){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new Z.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw $t.create("app-deleted",{appName:this._name})}}const As="9.23.0";function nu(pe,J={}){let Oe=pe;"object"!=typeof J&&(J={name:J});const ct=Object.assign({name:yt,automaticDataCollectionEnabled:!1},J),gt=ct.name;if("string"!=typeof gt||!gt)throw $t.create("bad-app-name",{appName:String(gt)});if(Oe||(Oe=(0,ee.T9)()),!Oe)throw $t.create("no-options");const Je=xt.get(gt);if(Je){if((0,ee.bD)(Oe,Je.options)&&(0,ee.bD)(ct,Je.config))return Je;throw $t.create("duplicate-app",{appName:gt})}const Jt=new Z.h1(gt);for(const kn of fn.values())Jt.addComponent(kn);const zn=new Zs(Oe,ct,Jt);return xt.set(gt,zn),zn}function Lr(pe=yt){const J=xt.get(pe);if(!J&&pe===yt&&(0,ee.T9)())return nu();if(!J)throw $t.create("no-app",{appName:pe});return J}function Js(){return Array.from(xt.values())}function $i(pe){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.A)(function*(pe){const J=pe.name;xt.has(J)&&(xt.delete(J),yield Promise.all(pe.container.getProviders().map(Oe=>Oe.delete())),pe.isDeleted=!0)})).apply(this,arguments)}function or(pe,J,Oe){var ct;let gt=null!==(ct=zt[pe])&&void 0!==ct?ct:pe;Oe&&(gt+=`-${Oe}`);const Je=gt.match(/\s|\//),Jt=J.match(/\s|\//);if(Je||Jt){const zn=[`Unable to register library "${gt}" with version "${J}":`];return Je&&zn.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),Je&&Jt&&zn.push("and"),Jt&&zn.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void Hn.warn(zn.join(" "))}an(new Z.uA(`${gt}-version`,()=>({library:gt,version:J}),"VERSION"))}function Ss(pe,J){if(null!==pe&&"function"!=typeof pe)throw $t.create("invalid-log-argument");(0,P.Ey)(pe,J)}function Nn(pe){(0,P.He)(pe)}const Hi="firebase-heartbeat-database",Vr=1,B="firebase-heartbeat-store";let U=null;function K(){return U||(U=function te(pe,J,{blocked:Oe,upgrade:ct,blocking:gt,terminated:Je}={}){const Jt=indexedDB.open(pe,J),zn=ne(Jt);return ct&&Jt.addEventListener("upgradeneeded",kn=>{ct(ne(Jt.result),kn.oldVersion,kn.newVersion,ne(Jt.transaction),kn)}),Oe&&Jt.addEventListener("blocked",kn=>Oe(kn.oldVersion,kn.newVersion,kn)),zn.then(kn=>{Je&&kn.addEventListener("close",()=>Je()),gt&&kn.addEventListener("versionchange",ss=>gt(ss.oldVersion,ss.newVersion,ss))}).catch(()=>{}),zn}(Hi,Vr,{upgrade:(pe,J)=>{0===J&&pe.createObjectStore(B)}}).catch(pe=>{throw $t.create("idb-open",{originalErrorMessage:pe.message})})),U}function ie(){return(ie=(0,h.A)(function*(pe){try{return yield(yield K()).transaction(B).objectStore(B).get(Yt(pe))}catch(J){if(J instanceof ee.g)Hn.warn(J.message);else{const Oe=$t.create("idb-get",{originalErrorMessage:J?.message});Hn.warn(Oe.message)}}})).apply(this,arguments)}function rt(pe,J){return It.apply(this,arguments)}function It(){return(It=(0,h.A)(function*(pe,J){try{const ct=(yield K()).transaction(B,"readwrite");yield ct.objectStore(B).put(J,Yt(pe)),yield ct.done}catch(Oe){if(Oe instanceof ee.g)Hn.warn(Oe.message);else{const ct=$t.create("idb-set",{originalErrorMessage:Oe?.message});Hn.warn(ct.message)}}})).apply(this,arguments)}function Yt(pe){return`${pe.name}!${pe.options.appId}`}class Rt{constructor(J){this.container=J,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new Jr(Oe),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var J=this;return(0,h.A)(function*(){const ct=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=Qt();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==gt&&!J._heartbeatsCache.heartbeats.some(Je=>Je.date===gt))return J._heartbeatsCache.heartbeats.push({date:gt,agent:ct}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(Je=>{const Jt=new Date(Je.date).valueOf();return Date.now()-Jt<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,h.A)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Oe=Qt(),{heartbeatsToSend:ct,unsentEntries:gt}=function gr(pe,J=1024){const Oe=[];let ct=pe.slice();for(const gt of pe){const Je=Oe.find(Jt=>Jt.agent===gt.agent);if(Je){if(Je.dates.push(gt.date),Ms(Oe)>J){Je.dates.pop();break}}else if(Oe.push({agent:gt.agent,dates:[gt.date]}),Ms(Oe)>J){Oe.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:ct}}(J._heartbeatsCache.heartbeats),Je=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:ct}));return J._heartbeatsCache.lastSentHeartbeatDate=Oe,gt.length>0?(J._heartbeatsCache.heartbeats=gt,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),Je})()}}function Qt(){return(new Date).toISOString().substring(0,10)}class Jr{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,h.A)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Ie(pe){return ie.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Oe=this;return(0,h.A)(function*(){var ct;if(yield Oe._canUseIndexedDBPromise){const Je=yield Oe.read();return rt(Oe.app,{lastSentHeartbeatDate:null!==(ct=J.lastSentHeartbeatDate)&&void 0!==ct?ct:Je.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Oe=this;return(0,h.A)(function*(){var ct;if(yield Oe._canUseIndexedDBPromise){const Je=yield Oe.read();return rt(Oe.app,{lastSentHeartbeatDate:null!==(ct=J.lastSentHeartbeatDate)&&void 0!==ct?ct:Je.lastSentHeartbeatDate,heartbeats:[...Je.heartbeats,...J.heartbeats]})}})()}}function Ms(pe){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:pe})).length}!function ru(pe){an(new Z.uA("platform-logger",J=>new Gt(J),"PRIVATE")),an(new Z.uA("heartbeat",J=>new Rt(J),"PRIVATE")),or(Xr,"0.9.13",pe),or(Xr,"0.9.13","esm2017"),or("fire-js","")}("")},1362:(ht,Te,O)=>{O.d(Te,{h1:()=>Pe,uA:()=>P});var h=O(467),Z=O(1076);class P{constructor(V,$,X){this.name=V,this.instanceFactory=$,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const ee="[DEFAULT]";class re{constructor(V,$){this.name=V,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const $=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has($)){const X=new Z.cY;if(this.instancesDeferred.set($,X),this.isInitialized($)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:$});Ue&&X.resolve(Ue)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(V){var $;const X=this.normalizeInstanceIdentifier(V?.identifier),Ue=null!==($=V?.optional)&&void 0!==$&&$;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Se){if(Ue)return null;throw Se}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function ge(he){return"EAGER"===he.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[$,X]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier($);try{const Se=this.getOrInitializeService({instanceIdentifier:Ue});X.resolve(Se)}catch{}}}}clearInstance(V=ee){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,h.A)(function*(){const $=Array.from(V.instances.values());yield Promise.all([...$.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...$.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=ee){return this.instances.has(V)}getOptions(V=ee){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:$={}}=V,X=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:X,options:$});for(const[Se,qe]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Se)&&qe.resolve(Ue);return Ue}onInit(V,$){var X;const Ue=this.normalizeInstanceIdentifier($),Se=null!==(X=this.onInitCallbacks.get(Ue))&&void 0!==X?X:new Set;Se.add(V),this.onInitCallbacks.set(Ue,Se);const qe=this.instances.get(Ue);return qe&&V(qe,Ue),()=>{Se.delete(V)}}invokeOnInitCallbacks(V,$){const X=this.onInitCallbacks.get($);if(X)for(const Ue of X)try{Ue(V,$)}catch{}}getOrInitializeService({instanceIdentifier:V,options:$={}}){let X=this.instances.get(V);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(he=V,he===ee?void 0:he),options:$}),this.instances.set(V,X),this.instancesOptions.set(V,$),this.invokeOnInitCallbacks(X,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,X)}catch{}var he;return X||null}normalizeInstanceIdentifier(V=ee){return this.component?this.component.multipleInstances?V:ee:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pe{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const $=this.getProvider(V.name);if($.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);$.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const $=new re(V,this);return this.providers.set(V,$),$}getProviders(){return Array.from(this.providers.values())}}},8041:(ht,Te,O)=>{O.d(Te,{$b:()=>Z,Ey:()=>he,He:()=>Pe,Vy:()=>ge});const h=[];var Z=function(V){return V[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",V}(Z||{});const P={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},ee=Z.INFO,re={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},le=(V,$,...X)=>{if($<V.logLevel)return;const Ue=(new Date).toISOString(),Se=re[$];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Se](`[${Ue}]  ${V.name}:`,...X)};class ge{constructor($){this.name=$,this._logLevel=ee,this._logHandler=le,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Z))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?P[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...$),this._logHandler(this,Z.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...$),this._logHandler(this,Z.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...$),this._logHandler(this,Z.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...$),this._logHandler(this,Z.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...$),this._logHandler(this,Z.ERROR,...$)}}function Pe(V){h.forEach($=>{$.setLogLevel(V)})}function he(V,$){for(const X of h){let Ue=null;$&&$.level&&(Ue=P[$.level]),X.userLogHandler=null===V?null:(Se,qe,...Re)=>{const ze=Re.map(Ve=>{if(null==Ve)return null;if("string"==typeof Ve)return Ve;if("number"==typeof Ve||"boolean"==typeof Ve)return Ve.toString();if(Ve instanceof Error)return Ve.message;try{return JSON.stringify(Ve)}catch{return null}}).filter(Ve=>Ve).join(" ");qe>=(Ue??Se.logLevel)&&V({level:Z[qe].toLowerCase(),message:ze,args:Re,type:Se.name})}}}},2214:(ht,Te,O)=>{O.d(Te,{Dk:()=>h.getApps,Sx:()=>h.getApp});var h=O(7852);(0,h.registerVersion)("firebase","9.23.0","app")},7935:(ht,Te,O)=>{O.d(Te,{A:()=>h.A});var h=O(3345);h.A.registerVersion("firebase","9.23.0","app-compat")},6922:(ht,Te,O)=>{var h=O(467),Z=O(3345),P=O(1076),ee=O(7852),re=O(1635),le=O(8041),ge=O(1362);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const qe=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Re=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new P.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Et=new le.Vy("@firebase/auth");function ne(_,...f){Et.logLevel<=le.$b.ERROR&&Et.error(`Auth (${ee.SDK_VERSION}): ${_}`,...f)}function _e(_,...f){throw Ke(_,...f)}function te(_,...f){return Ke(_,...f)}function Ce(_,f,g){const E=Object.assign(Object.assign({},Re()),{[f]:g});return new P.FA("auth","Firebase",E).create(f,{appName:_.name})}function Fe(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&_e(_,"argument-error"),Ce(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(_,...f){if("string"!=typeof _){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(g,...E)}return ze.create(_,...f)}function ue(_,f,...g){if(!_)throw Ke(f,...g)}function Ct(_){const f="INTERNAL ASSERTION FAILED: "+_;throw ne(f),new Error(f)}function Gt(_,f){_||Ct(f)}function hr(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Xr(){return"http:"===bs()||"https:"===bs()}function bs(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Ts{constructor(f,g){this.shortDelay=f,this.longDelay=g,Gt(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.jZ)()||(0,P.lV)()}get(){return function Hn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xr()||(0,P.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function oe(_,f){Gt(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class de{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},we=new Ts(3e4,6e4);function ve(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function be(_,f,g,E){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,h.A)(function*(_,f,g,E,A={}){return Ge(_,A,(0,h.A)(function*(){let R={},j={};E&&("GET"===f?j=E:R={body:JSON.stringify(E)});const Y=(0,P.Am)(Object.assign({key:_.config.apiKey},j)).slice(1),xe=yield _._getAdditionalHeaders();return xe["Content-Type"]="application/json",_.languageCode&&(xe["X-Firebase-Locale"]=_.languageCode),de.fetch()(Pt(_,_.config.apiHost,g,Y),Object.assign({method:f,headers:xe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Ge(_,f,g){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,h.A)(function*(_,f,g){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},ye),f);try{const A=new is(_),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const j=yield R.json();if("needConfirmation"in j)throw qt(_,"account-exists-with-different-credential",j);if(R.ok&&!("errorMessage"in j))return j;{const Y=R.ok?j.errorMessage:j.error.message,[xe,je]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw qt(_,"credential-already-in-use",j);if("EMAIL_EXISTS"===xe)throw qt(_,"email-already-in-use",j);if("USER_DISABLED"===xe)throw qt(_,"user-disabled",j);const tt=E[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw Ce(_,tt,je);_e(_,tt)}}catch(A){if(A instanceof P.g)throw A;_e(_,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function wt(_,f,g,E){return en.apply(this,arguments)}function en(){return(en=(0,h.A)(function*(_,f,g,E,A={}){const R=yield be(_,f,g,E,A);return"mfaPendingCredential"in R&&_e(_,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Pt(_,f,g,E){const A=`${f}${g}?${E}`;return _.config.emulator?oe(_.config,A):`${_.config.apiScheme}://${A}`}class is{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(te(this.auth,"network-request-failed")),we.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qt(_,f,g){const E={appName:_.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const A=te(_,f,E);return A.customData._tokenResponse=g,A}function tn(){return(tn=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Fr(){return(Fr=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function fi(){return(fi=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function pi(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function yt(){return(yt=(0,h.A)(function*(_,f=!1){const g=(0,P.Ku)(_),E=yield g.getIdToken(f),A=xt(E);ue(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,j=R?.sign_in_provider;return{claims:A,token:E,authTime:pi(zt(A.auth_time)),issuedAtTime:pi(zt(A.iat)),expirationTime:pi(zt(A.exp)),signInProvider:j||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function zt(_){return 1e3*Number(_)}function xt(_){const[f,g,E]=_.split(".");if(void 0===f||void 0===g||void 0===E)return ne("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,P.u)(g);return A?JSON.parse(A):(ne("Failed to decode base64 JWT payload"),null)}catch(A){return ne("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Tn(_,f){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,h.A)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof P.g&&function an({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}class pr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,h.A)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,h.A)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&f.schedule(!0))}f.schedule()})()}}class tu{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=pi(this.lastLoginAt),this.creationTime=pi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function lt(_){return Zr.apply(this,arguments)}function Zr(){return Zr=(0,h.A)(function*(_){var f;const g=_.auth,E=yield _.getIdToken(),A=yield Tn(_,function vo(_,f){return fi.apply(this,arguments)}(g,{idToken:E}));ue(A?.users.length,g,"internal-error");const R=A.users[0];_._notifyReloadListener(R);const j=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?function nu(_){return _.map(f=>{var{providerId:g}=f,E=(0,re.Tt)(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(R.providerUserInfo):[],Y=function As(_,f){return[..._.filter(E=>!f.some(A=>A.providerId===E.providerId)),...f]}(_.providerData,j),tt=!!_.isAnonymous&&!(_.email&&R.passwordHash||Y?.length),ot={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:Y,metadata:new tu(R.createdAt,R.lastLoginAt),isAnonymous:tt};Object.assign(_,ot)}),Zr.apply(this,arguments)}function Zs(){return(Zs=(0,h.A)(function*(_){const f=(0,P.Ku)(_);yield lt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Js(){return(Js=(0,h.A)(function*(_,f){const g=yield Ge(_,{},(0,h.A)(function*(){const E=(0,P.Am)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:R}=_.config,j=Pt(_,A,"/v1/token",`key=${R}`),Y=yield _._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",de.fetch()(j,{method:"POST",headers:Y,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class $i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ue(f.idToken,"internal-error"),ue(typeof f.idToken<"u","internal-error"),ue(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function fn(_){const f=xt(_);return ue(f,"internal-error"),ue(typeof f.exp<"u","internal-error"),ue(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,h.A)(function*(){return ue(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,h.A)(function*(){const{accessToken:A,refreshToken:R,expiresIn:j}=yield function Lr(_,f){return Js.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(A,R,Number(j))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:A,expirationTime:R}=g,j=new $i;return E&&(ue("string"==typeof E,"internal-error",{appName:f}),j.refreshToken=E),A&&(ue("string"==typeof A,"internal-error",{appName:f}),j.accessToken=A),R&&(ue("number"==typeof R,"internal-error",{appName:f}),j.expirationTime=R),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new $i,this.toJSON())}_performRefresh(){return Ct("not implemented")}}function sr(_,f){ue("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class or{constructor(f){var{uid:g,auth:E,stsTokenManager:A}=f,R=(0,re.Tt)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new tu(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.A)(function*(){const E=yield Tn(g,g.stsTokenManager.getToken(g.auth,f));return ue(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function eu(_){return yt.apply(this,arguments)}(this,f)}reload(){return function $t(_){return Zs.apply(this,arguments)}(this)}_assign(f){this!==f&&(ue(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const g=new or(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(f){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,h.A)(function*(){let A=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield lt(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,h.A)(function*(){const g=yield f.getIdToken();return yield Tn(f,function Mn(_,f){return tn.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,A,R,j,Y,xe,je,tt;const ot=null!==(E=g.displayName)&&void 0!==E?E:void 0,Wn=null!==(A=g.email)&&void 0!==A?A:void 0,Hs=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,$h=null!==(j=g.photoURL)&&void 0!==j?j:void 0,my=null!==(Y=g.tenantId)&&void 0!==Y?Y:void 0,Su=null!==(xe=g._redirectEventId)&&void 0!==xe?xe:void 0,Hh=null!==(je=g.createdAt)&&void 0!==je?je:void 0,yy=null!==(tt=g.lastLoginAt)&&void 0!==tt?tt:void 0,{uid:md,emailVerified:Gh,isAnonymous:hs,providerData:ig,stsTokenManager:Tt}=g;ue(md&&Tt,f,"internal-error");const $r=$i.fromJSON(this.name,Tt);ue("string"==typeof md,f,"internal-error"),sr(ot,f.name),sr(Wn,f.name),ue("boolean"==typeof Gh,f,"internal-error"),ue("boolean"==typeof hs,f,"internal-error"),sr(Hs,f.name),sr($h,f.name),sr(my,f.name),sr(Su,f.name),sr(Hh,f.name),sr(yy,f.name);const Mu=new or({uid:md,auth:f,email:Wn,emailVerified:Gh,displayName:ot,isAnonymous:hs,photoURL:$h,phoneNumber:Hs,tenantId:my,stsTokenManager:$r,createdAt:Hh,lastLoginAt:yy});return ig&&Array.isArray(ig)&&(Mu.providerData=ig.map(X_=>Object.assign({},X_))),Su&&(Mu._redirectEventId=Su),Mu}static _fromIdTokenResponse(f,g,E=!1){return(0,h.A)(function*(){const A=new $i;A.updateFromServerResponse(g);const R=new or({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:E});return yield lt(R),R})()}}const Ss=new Map;function Nn(_){Gt(_ instanceof Function,"Expected a class definition");let f=Ss.get(_);return f?(Gt(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,Ss.set(_,f),f)}const Vr=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.A)(function*(){return!0})()}_set(g,E){var A=this;return(0,h.A)(function*(){A.storage[g]=E})()}_get(g){var E=this;return(0,h.A)(function*(){const A=E.storage[g];return void 0===A?null:A})()}_remove(g){var E=this;return(0,h.A)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return _.type="NONE",_})();function B(_,f,g){return`firebase:${_}:${f}:${g}`}class U{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:A,name:R}=this.auth;this.fullUserKey=B(this.userKey,A.apiKey,R),this.fullPersistenceKey=B("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.A)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?or._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.A)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,h.A)(function*(){if(!g.length)return new U(Nn(Vr),f,E);const A=(yield Promise.all(g.map(function(){var je=(0,h.A)(function*(tt){if(yield tt._isAvailable())return tt});return function(tt){return je.apply(this,arguments)}}()))).filter(je=>je);let R=A[0]||Nn(Vr);const j=B(E,f.config.apiKey,f.name);let Y=null;for(const je of g)try{const tt=yield je._get(j);if(tt){const ot=or._fromJSON(f,tt);je!==R&&(Y=ot),R=je;break}}catch{}const xe=A.filter(je=>je._shouldAllowMigration);return R._shouldAllowMigration&&xe.length?(R=xe[0],Y&&(yield R._set(j,Y.toJSON())),yield Promise.all(g.map(function(){var je=(0,h.A)(function*(tt){if(tt!==R)try{yield tt._remove(j)}catch{}});return function(tt){return je.apply(this,arguments)}}())),new U(R,f,E)):new U(R,f,E)})()}}function K(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(It(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ie(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(nn(f))return"Blackberry";if(Gn(f))return"Webos";if(ie(f))return"Safari";if((f.includes("chrome/")||rt(f))&&!f.includes("edge/"))return"Chrome";if(Yt(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ie(_=(0,P.ZQ)()){return/firefox\//i.test(_)}function ie(_=(0,P.ZQ)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function rt(_=(0,P.ZQ)()){return/crios\//i.test(_)}function It(_=(0,P.ZQ)()){return/iemobile/i.test(_)}function Yt(_=(0,P.ZQ)()){return/android/i.test(_)}function nn(_=(0,P.ZQ)()){return/blackberry/i.test(_)}function Gn(_=(0,P.ZQ)()){return/webos/i.test(_)}function Rt(_=(0,P.ZQ)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Ms(_=(0,P.ZQ)()){return Rt(_)||Yt(_)||Gn(_)||nn(_)||/windows phone/i.test(_)||It(_)}function pe(_,f=[]){let g;switch(_){case"Browser":g=K((0,P.ZQ)());break;case"Worker":g=`${K((0,P.ZQ)())}-${_}`;break;default:g=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ee.SDK_VERSION}/${E}`}function Oe(){return(Oe=(0,h.A)(function*(_){return(yield be(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ct(_,f){return gt.apply(this,arguments)}function gt(){return(gt=(0,h.A)(function*(_,f){return be(_,"GET","/v2/recaptchaConfig",ve(_,f))})).apply(this,arguments)}function Je(_){return void 0!==_&&void 0!==_.getResponse}function Jt(_){return void 0!==_&&void 0!==_.enterprise}class zn{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function ss(_){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=A=>{const R=te("internal-error");R.customData=A,g(R)},E.type="text/javascript",E.charset="UTF-8",function kn(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function ei(_){return`__${_}${Math.floor(1e6*Math.random())}`}class Ju{constructor(f){this.type="recaptcha-enterprise",this.auth=Fn(f)}verify(f="verify",g=!1){var E=this;return(0,h.A)(function*(){function R(){return R=(0,h.A)(function*(Y){if(!g){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var xe=(0,h.A)(function*(je,tt){ct(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ot=>{if(void 0!==ot.recaptchaKey){const Wn=new zn(ot);return null==Y.tenantId?Y._agentRecaptchaConfig=Wn:Y._tenantRecaptchaConfigs[Y.tenantId]=Wn,je(Wn.siteKey)}tt(new Error("recaptcha Enterprise site key undefined"))}).catch(ot=>{tt(ot)})});return function(je,tt){return xe.apply(this,arguments)}}())}),R.apply(this,arguments)}function j(Y,xe,je){const tt=window.grecaptcha;Jt(tt)?tt.enterprise.ready(()=>{tt.enterprise.execute(Y,{action:f}).then(ot=>{xe(ot)}).catch(()=>{xe("NO_RECAPTCHA")})}):je(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,xe)=>{(function A(Y){return R.apply(this,arguments)})(E.auth).then(je=>{if(!g&&Jt(window.grecaptcha))j(je,Y,xe);else{if(typeof window>"u")return void xe(new Error("RecaptchaVerifier is only supported in browser"));ss("https://www.google.com/recaptcha/enterprise.js?render="+je).then(()=>{j(je,Y,xe)}).catch(tt=>{xe(tt)})}}).catch(je=>{xe(je)})})})()}}function Ti(_,f,g){return ec.apply(this,arguments)}function ec(){return(ec=(0,h.A)(function*(_,f,g,E=!1){const A=new Ju(_);let R;try{R=yield A.verify(g)}catch{R=yield A.verify(g,!0)}const j=Object.assign({},f);return Object.assign(j,E?{captchaResp:R}:{captchaResponse:R}),Object.assign(j,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(j,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),j})).apply(this,arguments)}class Gi{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const E=R=>new Promise((j,Y)=>{try{j(f(R))}catch(xe){Y(xe)}});E.onAbort=g,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.A)(function*(){if(g.auth.currentUser===f)return;const E=[];try{for(const A of g.queue)yield A(f),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const R of E)try{R()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class hl{constructor(f,g,E,A){this.app=f,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xs(this),this.idTokenSubscription=new xs(this),this.beforeStateQueue=new Gi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=Nn(g)),this._initializationPromise=this.queue((0,h.A)(function*(){var A,R;if(!E._deleted&&(E.persistenceManager=yield U.create(E,f),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.A)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.A)(function*(){var E;const A=yield g.assertedPersistence.getCurrentUser();let R=A,j=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Y=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,xe=R?._redirectEventId,je=yield g.tryRedirectSignIn(f);(!Y||Y===xe)&&je?.user&&(R=je.user,j=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(j)try{yield g.beforeStateQueue.runMiddleware(R)}catch(Y){R=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Y))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return ue(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,h.A)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.A)(function*(){try{yield lt(f)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ua(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,h.A)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.A)(function*(){const E=f?(0,P.Ku)(f):null;return E&&ue(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f,g=!1){var E=this;return(0,h.A)(function*(){if(!E._deleted)return f&&ue(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,h.A)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.A)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.A)(function*(){yield g.assertedPersistence.setPersistence(Nn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,h.A)(function*(){const g=yield ct(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new zn(g);null==f.tenantId?f._agentRecaptchaConfig=E:f._tenantRecaptchaConfigs[f.tenantId]=E,E.emailPasswordEnabled&&new Ju(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.FA("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,h.A)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.A)(function*(){if(!g.redirectPersistenceManager){const E=f&&Nn(f)||g._popupRedirectResolver;ue(E,g,"argument-error"),g.redirectPersistenceManager=yield U.create(g,[Nn(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.A)(function*(){var E,A;return g._isInitialized&&(yield g.queue((0,h.A)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.A)(function*(){if(f===g.currentUser)return g.queue((0,h.A)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(j,this,"internal-error"),j.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,E,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.A)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=pe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.A)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();A&&(E["X-Firebase-Client"]=A);const R=yield f._getAppCheckToken();return R&&(E["X-Firebase-AppCheck"]=R),E})()}_getAppCheckToken(){var f=this;return(0,h.A)(function*(){var g;const E=yield null===(g=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return E?.error&&function ft(_,...f){Et.logLevel<=le.$b.WARN&&Et.warn(`Auth (${ee.SDK_VERSION}): ${_}`,...f)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Fn(_){return(0,P.Ku)(_)}class xs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.tD)(g=>this.observer=g)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function br(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function fl(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class _o{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ct("not implemented")}_getIdTokenResponse(f){return Ct("not implemented")}_linkToIdToken(f,g){return Ct("not implemented")}_getReauthenticationResolver(f){return Ct("not implemented")}}function vp(_,f){return nc.apply(this,arguments)}function nc(){return(nc=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:resetPassword",ve(_,f))})).apply(this,arguments)}function pl(_,f){return ah.apply(this,arguments)}function ah(){return(ah=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function gl(){return(gl=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:update",ve(_,f))})).apply(this,arguments)}function mr(_,f){return ml.apply(this,arguments)}function ml(){return(ml=(0,h.A)(function*(_,f){return wt(_,"POST","/v1/accounts:signInWithPassword",ve(_,f))})).apply(this,arguments)}function rc(_,f){return yl.apply(this,arguments)}function yl(){return(yl=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:sendOobCode",ve(_,f))})).apply(this,arguments)}function vl(){return(vl=(0,h.A)(function*(_,f){return rc(_,f)})).apply(this,arguments)}function ca(_,f){return _l.apply(this,arguments)}function _l(){return(_l=(0,h.A)(function*(_,f){return rc(_,f)})).apply(this,arguments)}function sc(_,f){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,h.A)(function*(_,f){return rc(_,f)})).apply(this,arguments)}function vr(){return(vr=(0,h.A)(function*(_,f){return rc(_,f)})).apply(this,arguments)}function ti(){return(ti=(0,h.A)(function*(_,f){return wt(_,"POST","/v1/accounts:signInWithEmailLink",ve(_,f))})).apply(this,arguments)}function El(){return(El=(0,h.A)(function*(_,f){return wt(_,"POST","/v1/accounts:signInWithEmailLink",ve(_,f))})).apply(this,arguments)}class Eo extends _o{constructor(f,g,E,A=null){super("password",E),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new Eo(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new Eo(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.A)(function*(){var E;switch(g.signInMethod){case"password":const A={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=f._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const R=yield Ti(f,A,"signInWithPassword");return mr(f,R)}return mr(f,A).catch(function(){var R=(0,h.A)(function*(j){if("auth/missing-recaptcha-token"===j.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield Ti(f,A,"signInWithPassword");return mr(f,Y)}return Promise.reject(j)});return function(j){return R.apply(this,arguments)}}());case"emailLink":return function eo(_,f){return ti.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:_e(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,h.A)(function*(){switch(E.signInMethod){case"password":return pl(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function _p(_,f){return El.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:_e(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Si(_,f){return wl.apply(this,arguments)}function wl(){return(wl=(0,h.A)(function*(_,f){return wt(_,"POST","/v1/accounts:signInWithIdp",ve(_,f))})).apply(this,arguments)}class $e extends _o{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new $e(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):_e("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A}=g,R=(0,re.Tt)(g,["providerId","signInMethod"]);if(!E||!A)return null;const j=new $e(E,A);return j.idToken=R.idToken||void 0,j.accessToken=R.accessToken||void 0,j.secret=R.secret,j.nonce=R.nonce,j.pendingToken=R.pendingToken||null,j}_getIdTokenResponse(f){return Si(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,Si(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Si(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,P.Am)(g)}return f}}function dn(){return(dn=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:sendVerificationCode",ve(_,f))})).apply(this,arguments)}function la(){return(la=(0,h.A)(function*(_,f){return wt(_,"POST","/v1/accounts:signInWithPhoneNumber",ve(_,f))})).apply(this,arguments)}function to(){return(to=(0,h.A)(function*(_,f){const g=yield wt(_,"POST","/v1/accounts:signInWithPhoneNumber",ve(_,f));if(g.temporaryProof)throw qt(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Rn={USER_NOT_FOUND:"user-not-found"};function zi(){return(zi=(0,h.A)(function*(_,f){return wt(_,"POST","/v1/accounts:signInWithPhoneNumber",ve(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Rn)})).apply(this,arguments)}class mt extends _o{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new mt({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new mt({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function gi(_,f){return la.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Ur(_,f){return to.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function no(_,f){return zi.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:R}=f;return E||g||A||R?new mt({verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:R}):null}}class Rs{constructor(f){var g,E,A,R,j,Y;const xe=(0,P.I9)((0,P.hp)(f)),je=null!==(g=xe.apiKey)&&void 0!==g?g:null,tt=null!==(E=xe.oobCode)&&void 0!==E?E:null,ot=function oc(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=xe.mode)&&void 0!==A?A:null);ue(je&&tt&&ot,"argument-error"),this.apiKey=je,this.operation=ot,this.code=tt,this.continueUrl=null!==(R=xe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(j=xe.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(Y=xe.tenantId)&&void 0!==Y?Y:null}static parseLink(f){const g=function su(_){const f=(0,P.I9)((0,P.hp)(_)).link,g=f?(0,P.I9)((0,P.hp)(f)).deep_link_id:null,E=(0,P.I9)((0,P.hp)(_)).deep_link_id;return(E?(0,P.I9)((0,P.hp)(E)).link:null)||E||g||f||_}(f);try{return new Rs(g)}catch{return null}}}let da=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,E){return Eo._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const A=Rs.parseLink(E);return ue(A,"argument-error"),Eo._fromEmailAndCode(g,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ni{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ri extends ni{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Mi extends ri{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return ue("providerId"in g&&"signInMethod"in g,"argument-error"),$e._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ue(f.idToken||f.accessToken,"argument-error"),$e._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Mi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Mi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:R,nonce:j,providerId:Y}=f;if(!E&&!A&&!g&&!R||!Y)return null;try{return new Mi(Y)._credential({idToken:g,accessToken:E,nonce:j,pendingToken:R})}catch{return null}}}let uh=(()=>{class _ extends ri{constructor(){super("facebook.com")}static credential(g){return $e._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Ki=(()=>{class _ extends ri{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return $e._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:A}=g;if(!E&&!A)return null;try{return _.credential(E,A)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Os=(()=>{class _ extends ri{constructor(){super("github.com")}static credential(g){return $e._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class os extends _o{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Si(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,Si(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Si(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A,pendingToken:R}=g;return E&&A&&R&&E===A?new os(E,R):null}static _create(f,g){return new os(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Il extends ni{constructor(f){ue(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Il.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Il.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=os.fromJSON(f);return ue(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return os._create(E,g)}catch{return null}}}let ou=(()=>{class _ extends ri{constructor(){super("twitter.com")}static credential(g,E){return $e._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=g;if(!E||!A)return null;try{return _.credential(E,A)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function as(_,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,h.A)(function*(_,f){return wt(_,"POST","/v1/accounts:signUp",ve(_,f))})).apply(this,arguments)}class Tr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,A=!1){return(0,h.A)(function*(){const R=yield or._fromIdTokenResponse(f,E,A),j=Ps(E);return new Tr({user:R,providerId:j,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,h.A)(function*(){yield f._updateTokensIfNecessary(E,!0);const A=Ps(E);return new Tr({user:f,providerId:A,_tokenResponse:E,operationType:g})})()}}function Ps(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function ar(){return(ar=(0,h.A)(function*(_){var f;const g=Fn(_);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Tr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield as(g,{returnSecureToken:!0}),A=yield Tr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class ac extends P.g{constructor(f,g,E,A){var R;super(g.code,g.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,A){return new ac(f,g,E,A)}}function Br(_,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?ac._fromErrorAndOperation(_,R,f,E):R})}function Ar(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Sr(){return Sr=(0,h.A)(function*(_,f){const g=(0,P.Ku)(_);yield io(!0,g,f);const{providerUserInfo:E}=yield function fr(_,f){return Fr.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=Ar(E||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Sr.apply(this,arguments)}function wo(_,f){return ii.apply(this,arguments)}function ii(){return(ii=(0,h.A)(function*(_,f,g=!1){const E=yield Tn(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return Tr._forOperation(_,"link",E)})).apply(this,arguments)}function io(_,f,g){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,h.A)(function*(_,f,g){yield lt(f);const A=!1===_?"provider-already-linked":"no-such-provider";ue(Ar(f.providerData).has(g)===_,f.auth,A)})).apply(this,arguments)}function Ep(_,f){return bl.apply(this,arguments)}function bl(){return(bl=(0,h.A)(function*(_,f,g=!1){const{auth:E}=_,A="reauthenticate";try{const R=yield Tn(_,Br(E,A,f,_),g);ue(R.idToken,E,"internal-error");const j=xt(R.idToken);ue(j,E,"internal-error");const{sub:Y}=j;return ue(_.uid===Y,E,"user-mismatch"),Tr._forOperation(_,A,R)}catch(R){throw"auth/user-not-found"===R?.code&&_e(E,"user-mismatch"),R}})).apply(this,arguments)}function Tl(_,f){return Al.apply(this,arguments)}function Al(){return(Al=(0,h.A)(function*(_,f,g=!1){const E="signIn",A=yield Br(_,E,f),R=yield Tr._fromIdTokenResponse(_,E,A);return g||(yield _._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Sl(_,f){return ch.apply(this,arguments)}function ch(){return(ch=(0,h.A)(function*(_,f){return Tl(Fn(_),f)})).apply(this,arguments)}function zm(_,f){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,h.A)(function*(_,f){const g=(0,P.Ku)(_);return yield io(!1,g,f.providerId),wo(g,f)})).apply(this,arguments)}function Km(_,f){return wp.apply(this,arguments)}function wp(){return(wp=(0,h.A)(function*(_,f){return Ep((0,P.Ku)(_),f)})).apply(this,arguments)}function Ip(){return(Ip=(0,h.A)(function*(_,f){return wt(_,"POST","/v1/accounts:signInWithCustomToken",ve(_,f))})).apply(this,arguments)}function ks(){return ks=(0,h.A)(function*(_,f){const g=Fn(_),E=yield function V_(_,f){return Ip.apply(this,arguments)}(g,{token:f,returnSecureToken:!0}),A=yield Tr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(A.user),A}),ks.apply(this,arguments)}class Ml{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?uc._fromServerResponse(f,g):"totpInfo"in g?Nl._fromServerResponse(f,g):_e(f,"internal-error")}}class uc extends Ml{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new uc(g)}}class Nl extends Ml{constructor(f){super("totp",f)}static _fromServerResponse(f,g){return new Nl(g)}}function Io(_,f,g){var E;ue((null===(E=g.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),ue(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ue(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(ue(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function uu(){return uu=(0,h.A)(function*(_,f,g){var E;const A=Fn(_),R={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const j=yield Ti(A,R,"getOobCode",!0);g&&Io(A,j,g),yield ca(A,j)}else g&&Io(A,R,g),yield ca(A,R).catch(function(){var j=(0,h.A)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const xe=yield Ti(A,R,"getOobCode",!0);g&&Io(A,xe,g),yield ca(A,xe)}});return function(Y){return j.apply(this,arguments)}}())}),uu.apply(this,arguments)}function Fs(){return(Fs=(0,h.A)(function*(_,f,g){yield vp((0,P.Ku)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ni(){return Ni=(0,h.A)(function*(_,f){yield function Ai(_,f){return gl.apply(this,arguments)}((0,P.Ku)(_),{oobCode:f})}),Ni.apply(this,arguments)}function xl(_,f){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,h.A)(function*(_,f){const g=(0,P.Ku)(_),E=yield vp(g,{oobCode:f}),A=E.requestType;switch(ue(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(E.mfaInfo,g,"internal-error");default:ue(E.email,g,"internal-error")}let R=null;return E.mfaInfo&&(R=Ml._fromServerResponse(Fn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function _r(){return(_r=(0,h.A)(function*(_,f){const{data:g}=yield xl((0,P.Ku)(_),f);return g.email})).apply(this,arguments)}function cu(){return cu=(0,h.A)(function*(_,f,g){var E;const A=Fn(_),R={returnSecureToken:!0,email:f,password:g,clientType:"CLIENT_TYPE_WEB"};let j;if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const je=yield Ti(A,R,"signUpPassword");j=as(A,je)}else j=as(A,R).catch(function(){var je=(0,h.A)(function*(tt){if("auth/missing-recaptcha-token"===tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ot=yield Ti(A,R,"signUpPassword");return as(A,ot)}return Promise.reject(tt)});return function(tt){return je.apply(this,arguments)}}());const Y=yield j.catch(je=>Promise.reject(je)),xe=yield Tr._fromIdTokenResponse(A,"signIn",Y);return yield A._updateCurrentUser(xe.user),xe}),cu.apply(this,arguments)}function fa(){return fa=(0,h.A)(function*(_,f,g){var E;const A=Fn(_),R={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function j(Y,xe){ue(xe.handleCodeInApp,A,"argument-error"),xe&&Io(A,Y,xe)}if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Y=yield Ti(A,R,"getOobCode",!0);j(Y,g),yield sc(A,Y)}else j(R,g),yield sc(A,R).catch(function(){var Y=(0,h.A)(function*(xe){if("auth/missing-recaptcha-token"!==xe.code)return Promise.reject(xe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const je=yield Ti(A,R,"getOobCode",!0);j(je,g),yield sc(A,je)}});return function(xe){return Y.apply(this,arguments)}}())}),fa.apply(this,arguments)}function lc(){return(lc=(0,h.A)(function*(_,f,g){const E=(0,P.Ku)(_),A=da.credentialWithLink(f,g||hr());return ue(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Sl(E,A)})).apply(this,arguments)}function Ol(){return(Ol=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:createAuthUri",ve(_,f))})).apply(this,arguments)}function pa(){return pa=(0,h.A)(function*(_,f){const E={identifier:f,continueUri:Xr()?hr():"http://localhost"},{signinMethods:A}=yield function Rl(_,f){return Ol.apply(this,arguments)}((0,P.Ku)(_),E);return A||[]}),pa.apply(this,arguments)}function Ls(){return Ls=(0,h.A)(function*(_,f){const g=(0,P.Ku)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Io(g.auth,A,f);const{email:R}=yield function ic(_,f){return vl.apply(this,arguments)}(g.auth,A);R!==_.email&&(yield _.reload())}),Ls.apply(this,arguments)}function hc(){return hc=(0,h.A)(function*(_,f,g){const E=(0,P.Ku)(_),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&Io(E.auth,R,g);const{email:j}=yield function yr(_,f){return vr.apply(this,arguments)}(E.auth,R);j!==_.email&&(yield _.reload())}),hc.apply(this,arguments)}function Cp(){return(Cp=(0,h.A)(function*(_,f){return be(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function fc(){return fc=(0,h.A)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,P.Ku)(_),R={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},j=yield Tn(E,function qm(_,f){return Cp.apply(this,arguments)}(E.auth,R));E.displayName=j.displayName||null,E.photoURL=j.photoUrl||null;const Y=E.providerData.find(({providerId:xe})=>"password"===xe);Y&&(Y.displayName=E.displayName,Y.photoURL=E.photoURL),yield E._updateTokensIfNecessary(j)}),fc.apply(this,arguments)}function Fl(_,f,g){return pc.apply(this,arguments)}function pc(){return(pc=(0,h.A)(function*(_,f,g){const{auth:E}=_,R={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const j=yield Tn(_,pl(E,R));yield _._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Co{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class gc extends Co{constructor(f,g,E,A){super(f,g,E),this.username=A}}class hh extends Co{constructor(f,g){super(f,"facebook.com",g)}}class fh extends gc{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class du extends Co{constructor(f,g){super(f,"google.com",g)}}class hu extends gc{constructor(f,g,E){super(f,"twitter.com",g,E)}}function Tp(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Ll(_){var f,g;if(!_)return null;const{providerId:E}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},R=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&_?.idToken){const j=null===(g=null===(f=xt(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new Co(R,"anonymous"!==j&&"custom"!==j?j:null)}if(!E)return null;switch(E){case"facebook.com":return new hh(R,A);case"github.com":return new fh(R,A);case"google.com":return new du(R,A);case"twitter.com":return new hu(R,A,_.screenName||null);case"custom":case"anonymous":return new Co(R,null);default:return new Co(R,E,A)}}(g)}class Vs{constructor(f,g,E){this.type=f,this.credential=g,this.auth=E}static _fromIdtoken(f,g){return new Vs("enroll",f,g)}static _fromMfaPendingCredential(f){return new Vs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Vs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return Vs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class To{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=Fn(f),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(Y=>Ml._fromServerResponse(E,Y));ue(A.mfaPendingCredential,E,"internal-error");const j=Vs._fromMfaPendingCredential(A.mfaPendingCredential);return new To(j,R,function(){var Y=(0,h.A)(function*(xe){const je=yield xe._process(E,j);delete A.mfaInfo,delete A.mfaPendingCredential;const tt=Object.assign(Object.assign({},A),{idToken:je.idToken,refreshToken:je.refreshToken});switch(g.operationType){case"signIn":const ot=yield Tr._fromIdTokenResponse(E,g.operationType,tt);return yield E._updateCurrentUser(ot.user),ot;case"reauthenticate":return ue(g.user,E,"internal-error"),Tr._forOperation(g.user,g.operationType,tt);default:_e(E,"internal-error")}});return function(xe){return Y.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.A)(function*(){return g.signInResolver(f)})()}}class Ao{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Ml._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Ao(f)}getSession(){var f=this;return(0,h.A)(function*(){return Vs._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var E=this;return(0,h.A)(function*(){const A=f,R=yield E.getSession(),j=yield Tn(E.user,A._process(E.user.auth,R,g));return yield E.user._updateTokensIfNecessary(j),E.user.reload()})()}unenroll(f){var g=this;return(0,h.A)(function*(){const E="string"==typeof f?f:f.uid,A=yield g.user.getIdToken();try{const R=yield Tn(g.user,function _h(_,f){return be(_,"POST","/v2/accounts/mfaEnrollment:withdraw",ve(_,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==E),yield g.user._updateTokensIfNecessary(R),yield g.user.reload()}catch(R){throw R}})()}}const on=new WeakMap,So="__sak";class si{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(So,"1"),this.storage.removeItem(So),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ya=(()=>{class _ extends si{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Eh(){const _=(0,P.ZQ)();return ie(_)||Rt(_)}()&&function ru(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ms(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),R=this.localCache[E];A!==R&&g(E,R,A)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((Y,xe,je)=>{this.notifyListeners(Y,je)});const A=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(A);if(g.newValue!==Y)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!E)return}const R=()=>{const Y=this.storage.getItem(A);!E&&this.localCache[A]===Y||this.notifyListeners(A,Y)},j=this.storage.getItem(A);!function Jr(){return(0,P.lT)()&&10===document.documentMode}()||j===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var A=()=>super._set,R=this;return(0,h.A)(function*(){yield A().call(R,g,E),R.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,A=this;return(0,h.A)(function*(){const R=yield E().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var E=()=>super._remove,A=this;return(0,h.A)(function*(){yield E().call(A,g),delete A.localCache[g]})()}}return _.type="LOCAL",_})(),Mo=(()=>{class _ extends si{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return _.type="SESSION",_})();let yc=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(R=>R.isListeningto(g));if(E)return E;const A=new _(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,h.A)(function*(){const A=g,{eventId:R,eventType:j,data:Y}=A.data,xe=E.handlersMap[j];if(!xe?.size)return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:j});const je=Array.from(xe).map(function(){var ot=(0,h.A)(function*(Wn){return Wn(A.origin,Y)});return function(Wn){return ot.apply(this,arguments)}}()),tt=yield function No(_){return Promise.all(_.map(function(){var f=(0,h.A)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(je);A.ports[0].postMessage({status:"done",eventId:R,eventType:j,response:tt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Hl(_="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return _+g}class Zm{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var A=this;return(0,h.A)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let j,Y;return new Promise((xe,je)=>{const tt=Hl("",20);R.port1.start();const ot=setTimeout(()=>{je(new Error("unsupported_event"))},E);Y={messageChannel:R,onMessage(Wn){const Hs=Wn;if(Hs.data.eventId===tt)switch(Hs.data.status){case"ack":clearTimeout(ot),j=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),xe(Hs.data.response);break;default:clearTimeout(ot),clearTimeout(j),je(new Error("invalid_response"))}}},A.handlers.add(Y),R.port1.addEventListener("message",Y.onMessage),A.target.postMessage({eventType:f,eventId:tt,data:g},[R.port2])}).finally(()=>{Y&&A.removeMessageHandler(Y)})})()}}function En(){return window}function Gl(){return typeof En().WorkerGlobalScope<"u"&&"function"==typeof En().importScripts}function vc(){return(vc=(0,h.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wh="firebaseLocalStorageDb",va="firebaseLocalStorage",Us="fbase_key";class _c{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ec(_,f){return _.transaction([va],f?"readwrite":"readonly").objectStore(va)}function Kl(){const _=indexedDB.open(wh,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(va,{keyPath:Us})}catch(A){g(A)}}),_.addEventListener("success",(0,h.A)(function*(){const E=_.result;E.objectStoreNames.contains(va)?f(E):(E.close(),yield function Jm(){const _=indexedDB.deleteDatabase(wh);return new _c(_).toPromise()}(),f(yield Kl()))}))})}function fu(_,f,g){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,h.A)(function*(_,f,g){const E=Ec(_,!0).put({[Us]:f,value:g});return new _c(E).toPromise()})).apply(this,arguments)}function wc(){return(wc=(0,h.A)(function*(_,f){const g=Ec(_,!1).get(f),E=yield new _c(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Wl(_,f){const g=Ec(_,!0).delete(f);return new _c(g).toPromise()}const oi=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.A)(function*(){return g.db||(g.db=yield Kl()),g.db})()}_withRetries(g){var E=this;return(0,h.A)(function*(){let A=0;for(;;)try{const R=yield E._openDb();return yield g(R)}catch(R){if(A++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.A)(function*(){return Gl()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.A)(function*(){g.receiver=yc._getInstance(function cr(){return Gl()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,h.A)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,h.A)(function*(A,R){return["keyChanged"]});return function(A,R){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.A)(function*(){var E,A;if(g.activeServiceWorker=yield function St(){return vc.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Zm(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);R&&null!==(E=R[0])&&void 0!==E&&E.fulfilled&&null!==(A=R[0])&&void 0!==A&&A.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,h.A)(function*(){if(E.sender&&E.activeServiceWorker&&function zl(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.A)(function*(){try{if(!indexedDB)return!1;const g=yield Kl();return yield fu(g,So,"1"),yield Wl(g,So),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,h.A)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var A=this;return(0,h.A)(function*(){return A._withPendingWrite((0,h.A)(function*(){return yield A._withRetries(R=>fu(R,g,E)),A.localCache[g]=E,A.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,h.A)(function*(){const A=yield E._withRetries(R=>function Lt(_,f){return wc.apply(this,arguments)}(R,g));return E.localCache[g]=A,A})()}_remove(g){var E=this;return(0,h.A)(function*(){return E._withPendingWrite((0,h.A)(function*(){return yield E._withRetries(A=>Wl(A,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.A)(function*(){const E=yield g._withRetries(j=>{const Y=Ec(j,!1).getAll();return new _c(Y).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:j,value:Y}of E)R.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(Y)&&(g.notifyListeners(j,Y),A.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!R.has(j)&&(g.notifyListeners(j,null),A.push(j));return A})()}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.A)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})(),tr=1e12;class Bs{constructor(f){this.auth=f,this.counter=tr,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new Zl(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||tr;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||tr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.A)(function*(){var E;return null===(E=g._widgets.get(f||tr))||void 0===E||E.execute(),""})()}}class Zl{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;ue(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xo(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)f.push(g.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wi=ei("rcb"),Ih=new Ts(3e4,6e4);class ty{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=En().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return ue(function Dh(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),f,"argument-error"),this.shouldResolveImmediately(g)&&Je(En().grecaptcha)?Promise.resolve(En().grecaptcha):new Promise((E,A)=>{const R=En().setTimeout(()=>{A(te(f,"network-request-failed"))},Ih.get());En()[Wi]=()=>{En().clearTimeout(R),delete En()[Wi];const Y=En().grecaptcha;if(!Y||!Je(Y))return void A(te(f,"internal-error"));const xe=Y.render;Y.render=(je,tt)=>{const ot=xe(je,tt);return this.counter++,ot},this.hostLanguage=g,E(Y)},ss(`https://www.google.com/recaptcha/api.js??${(0,P.Am)({onload:Wi,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(te(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=En().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ch{load(f){return(0,h.A)(function*(){return new Bs(f)})()}clearedOneInstance(){}}const gu="recaptcha",xp={theme:"light",type:"image"};class Ic{constructor(f,g=Object.assign({},xp),E){this.parameters=g,this.type=gu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fn(E),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;ue(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ch:new ty,this.validateStartingState()}verify(){var f=this;return(0,h.A)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(R=>{const j=Y=>{Y&&(f.tokenChangeListeners.delete(j),R(Y))};f.tokenChangeListeners.add(j),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=En()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.A)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.A)(function*(){ue(Xr()&&!Gl(),f.auth,"internal-error"),yield function ny(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function J(_){return Oe.apply(this,arguments)}(f.auth);ue(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class pn{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=mt._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function _a(){return(_a=(0,h.A)(function*(_,f,g){const E=Fn(_),A=yield mu(E,f,(0,P.Ku)(g));return new pn(A,R=>Sl(E,R))})).apply(this,arguments)}function Ea(){return(Ea=(0,h.A)(function*(_,f,g){const E=(0,P.Ku)(_);yield io(!1,E,"phone");const A=yield mu(E.auth,f,(0,P.Ku)(g));return new pn(A,R=>zm(E,R))})).apply(this,arguments)}function Ro(){return(Ro=(0,h.A)(function*(_,f,g){const E=(0,P.Ku)(_),A=yield mu(E.auth,f,(0,P.Ku)(g));return new pn(A,R=>Km(E,R))})).apply(this,arguments)}function mu(_,f,g){return wa.apply(this,arguments)}function wa(){return wa=(0,h.A)(function*(_,f,g){var E;const A=yield g.verify();try{let R;if(ue("string"==typeof A,_,"argument-error"),ue(g.type===gu,_,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const j=R.session;if("phoneNumber"in R)return ue("enroll"===j.type,_,"internal-error"),(yield function Bl(_,f){return be(_,"POST","/v2/accounts/mfaEnrollment:start",ve(_,f))}(_,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ue("signin"===j.type,_,"internal-error");const Y=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return ue(Y,_,"missing-multi-factor-info"),(yield function Xl(_,f){return be(_,"POST","/v2/accounts/mfaSignIn:start",ve(_,f))}(_,{mfaPendingCredential:j.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield function Ft(_,f){return dn.apply(this,arguments)}(_,{phoneNumber:R.phoneNumber,recaptchaToken:A});return j}}finally{g._reset()}}),wa.apply(this,arguments)}function Vn(){return(Vn=(0,h.A)(function*(_,f){yield wo((0,P.Ku)(_),f)})).apply(this,arguments)}let et=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=Fn(g)}verifyPhoneNumber(g,E){return mu(this.auth,g,(0,P.Ku)(E))}static credential(g,E){return mt._fromVerification(g,E)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:A}=g;return E&&A?mt._fromTokenResponse(E,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Oo(_,f){return f?Nn(f):(ue(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class xi extends _o{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Si(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Si(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Si(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Jl(_){return Tl(_.auth,new xi(_),_.bypassAuthState)}function ed(_){const{auth:f,user:g}=_;return ue(g,f,"internal-error"),Ep(g,new xi(_),_.bypassAuthState)}function yu(_){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,h.A)(function*(_){const{auth:f,user:g}=_;return ue(g,f,"internal-error"),wo(g,new xi(_),_.bypassAuthState)})).apply(this,arguments)}class Ri{constructor(f,g,E,A,R=!1){this.auth=f,this.resolver=E,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.A)(function*(E,A){f.pendingPromise={resolve:E,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(E,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.A)(function*(){const{urlResponse:E,sessionId:A,postBody:R,tenantId:j,error:Y,type:xe}=f;if(Y)return void g.reject(Y);const je={auth:g.auth,requestUri:E,sessionId:A,tenantId:j||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(xe)(je))}catch(tt){g.reject(tt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Jl;case"linkViaPopup":case"linkViaRedirect":return yu;case"reauthViaPopup":case"reauthViaRedirect":return ed;default:_e(this.auth,"internal-error")}}resolve(f){Gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mn=new Ts(2e3,1e4);function Da(){return(Da=(0,h.A)(function*(_,f,g){const E=Fn(_);Fe(_,f,ni);const A=Oo(E,g);return new Qi(E,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function Ca(){return(Ca=(0,h.A)(function*(_,f,g){const E=(0,P.Ku)(_);Fe(E.auth,f,ni);const A=Oo(E.auth,g);return new Qi(E.auth,"reauthViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}function Po(){return(Po=(0,h.A)(function*(_,f,g){const E=(0,P.Ku)(_);Fe(E.auth,f,ni);const A=Oo(E.auth,g);return new Qi(E.auth,"linkViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}let Qi=(()=>{class _ extends Ri{constructor(g,E,A,R,j){super(g,E,R,j),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.A)(function*(){const E=yield g.execute();return ue(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,h.A)(function*(){Gt(1===g.filter.length,"Popup operations only handle one event");const E=Hl();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(te(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,mn.get())};g()}}return _.currentPopupAction=null,_})();const bc="pendingRedirect",bn=new Map;class Xi extends Ri{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.A)(function*(){let E=bn.get(g.auth._key());if(!E){try{const R=(yield function nd(_,f){return ry.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(R)}catch(A){E=()=>Promise.reject(A)}bn.set(g.auth._key(),E)}return g.bypassAuthState||bn.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,h.A)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const A=yield E.auth._redirectUserForId(f.eventId);if(A)return E.user=A,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.A)(function*(){})()}cleanUp(){}}function ry(){return(ry=(0,h.A)(function*(_,f){const g=rd(f),E=Op(_);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(g));return yield E._remove(g),A})).apply(this,arguments)}function vu(_,f){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,h.A)(function*(_,f){return Op(_)._set(rd(f),"true")})).apply(this,arguments)}function Tc(_,f){bn.set(_._key(),f)}function Op(_){return Nn(_._redirectPersistence)}function rd(_){return B(bc,_.config.apiKey,_.name)}function _u(_,f,g){return function ba(_,f,g){return Ta.apply(this,arguments)}(_,f,g)}function Ta(){return(Ta=(0,h.A)(function*(_,f,g){const E=Fn(_);Fe(_,f,ni),yield E._initializationPromise;const A=Oo(E,g);return yield vu(A,E),A._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function Aa(_,f,g){return function Ac(_,f,g){return ko.apply(this,arguments)}(_,f,g)}function ko(){return(ko=(0,h.A)(function*(_,f,g){const E=(0,P.Ku)(_);Fe(E.auth,f,ni),yield E.auth._initializationPromise;const A=Oo(E.auth,g);yield vu(A,E.auth);const R=yield Fo(E);return A._openRedirect(E.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Pp(_,f,g){return function kp(_,f,g){return Eu.apply(this,arguments)}(_,f,g)}function Eu(){return(Eu=(0,h.A)(function*(_,f,g){const E=(0,P.Ku)(_);Fe(E.auth,f,ni),yield E.auth._initializationPromise;const A=Oo(E.auth,g);yield io(!1,E,f.providerId),yield vu(A,E.auth);const R=yield Fo(E);return A._openRedirect(E.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function ai(){return(ai=(0,h.A)(function*(_,f){return yield Fn(_)._initializationPromise,wu(_,f,!1)})).apply(this,arguments)}function wu(_,f){return so.apply(this,arguments)}function so(){return(so=(0,h.A)(function*(_,f,g=!1){const E=Fn(_),A=Oo(E,f),j=yield new Xi(E,A,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield E._persistUserIfCurrent(j.user),yield E._setRedirectUser(null,f)),j})).apply(this,arguments)}function Fo(_){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,h.A)(function*(_){const f=Hl(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class oo{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Iu(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sa(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!Sa(f)){const A=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(te(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uo(f))}saveEventToCache(f){this.cachedEventUids.add(Uo(f)),this.lastProcessedEventTime=Date.now()}}function Uo(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Sa({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function id(_){return Er.apply(this,arguments)}function Er(){return(Er=(0,h.A)(function*(_,f={}){return be(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Bo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Du=/^https?/;function jo(){return(jo=(0,h.A)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield id(_);for(const g of f)try{if(Sc(g))return}catch{}_e(_,"unauthorized-domain")})).apply(this,arguments)}function Sc(_){const f=hr(),{protocol:g,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const j=new URL(_);return""===j.hostname&&""===E?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===E}if(!Du.test(g))return!1;if(Bo.test(_))return E===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Mc=new Ts(3e4,6e4);function ao(){const _=En().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let lr=null;const Fp=new Ts(5e3,15e3),Lp="__/auth/iframe",Vp="emulator/auth/iframe",Up={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nc(_){const f=_.config;ue(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?oe(f,Vp):`https://${_.config.authDomain}/${Lp}`,E={apiKey:f.apiKey,appName:_.name,v:ee.SDK_VERSION},A=Mh.get(_.config.apiHost);A&&(E.eid=A);const R=_._getFrameworks();return R.length&&(E.fw=R.join(",")),`${g}?${(0,P.Am)(E).slice(1)}`}function b(){return b=(0,h.A)(function*(_){const f=yield function js(_){return lr=lr||function ds(_){return new Promise((f,g)=>{var E,A,R;function j(){ao(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ao(),g(te(_,"network-request-failed"))},timeout:Mc.get()})}if(null!==(A=null===(E=En().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(R=En().gapi)||void 0===R||!R.load){const Y=ei("iframefcb");return En()[Y]=()=>{gapi.load?j():g(te(_,"network-request-failed"))},ss(`https://apis.google.com/js/api.js?onload=${Y}`).catch(xe=>g(xe))}j()}}).catch(f=>{throw lr=null,f})}(_),lr}(_),g=En().gapi;return ue(g,_,"internal-error"),f.open({where:document.body,url:Nc(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Up,dontclear:!0},E=>new Promise(function(){var A=(0,h.A)(function*(R,j){yield E.restyle({setHideOnLeave:!1});const Y=te(_,"network-request-failed"),xe=En().setTimeout(()=>{j(Y)},Fp.get());function je(){En().clearTimeout(xe),R(E)}E.ping(je).then(je,()=>{j(Y)})});return function(R,j){return A.apply(this,arguments)}}()))}),b.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class He{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const At="__/auth/handler",Nt="emulator/auth/handler",Yi=encodeURIComponent("fac");function yn(_,f,g,E,A,R){return Na.apply(this,arguments)}function Na(){return(Na=(0,h.A)(function*(_,f,g,E,A,R){ue(_.config.authDomain,_,"auth-domain-config-required"),ue(_.config.apiKey,_,"invalid-api-key");const j={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:E,v:ee.SDK_VERSION,eventId:A};if(f instanceof ni){f.setDefaultLanguage(_.languageCode),j.providerId=f.providerId||"",(0,P.Im)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[tt,ot]of Object.entries(R||{}))j[tt]=ot}if(f instanceof ri){const tt=f.getScopes().filter(ot=>""!==ot);tt.length>0&&(j.scopes=tt.join(","))}_.tenantId&&(j.tid=_.tenantId);const Y=j;for(const tt of Object.keys(Y))void 0===Y[tt]&&delete Y[tt];const xe=yield _._getAppCheckToken(),je=xe?`#${Yi}=${encodeURIComponent(xe)}`:"";return`${function xa({config:_}){return _.emulator?oe(_,Nt):`https://${_.authDomain}/${At}`}(_)}?${(0,P.Am)(Y).slice(1)}${je}`})).apply(this,arguments)}const vn="webStorageSupport",jr=class Oi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mo,this._completeRedirectFn=wu,this._overrideRedirectResult=Tc}_openPopup(f,g,E,A){var R=this;return(0,h.A)(function*(){var j;Gt(null===(j=R.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const Y=yield yn(f,g,E,hr(),A);return function Be(_,f,g,E=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),j=Math.max((window.screen.availWidth-E)/2,0).toString();let Y="";const xe=Object.assign(Object.assign({},M),{width:E.toString(),height:A.toString(),top:R,left:j}),je=(0,P.ZQ)().toLowerCase();g&&(Y=rt(je)?"_blank":g),Ie(je)&&(f=f||"http://localhost",xe.scrollbars="yes");const tt=Object.entries(xe).reduce((Wn,[Hs,$h])=>`${Wn}${Hs}=${$h},`,"");if(function gr(_=(0,P.ZQ)()){var f;return Rt(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(je)&&"_self"!==Y)return function st(_,f){const g=document.createElement("a");g.href=_,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",Y),new He(null);const ot=window.open(f||"",Y,tt);ue(ot,_,"popup-blocked");try{ot.focus()}catch{}return new He(ot)}(f,Y,Hl())})()}_openRedirect(f,g,E,A){var R=this;return(0,h.A)(function*(){return yield R._originValidation(f),function Sp(_){En().location.href=_}(yield yn(f,g,E,hr(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(Gt(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,h.A)(function*(){const E=yield function I(_){return b.apply(this,arguments)}(f),A=new oo(f);return E.register("authEvent",R=>(ue(R?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=E,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(vn,{type:vn},A=>{var R;const j=null===(R=A?.[0])||void 0===R?void 0:R[vn];void 0!==j&&g(!!j),_e(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ma(_){return jo.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ms()||ie()||Rt()}};class Cu{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ct("unexpected MultiFactorSessionType")}}}class Zi extends Cu{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Zi(f)}_finalizeEnroll(f,g,E){return function jl(_,f){return be(_,"POST","/v2/accounts/mfaEnrollment:finalize",ve(_,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Yl(_,f){return be(_,"POST","/v2/accounts/mfaSignIn:finalize",ve(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sd=(()=>{class _{constructor(){}static assertion(g){return Zi._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var Nh="@firebase/auth";class Bp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.A)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{f(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);g&&(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Tu(){return window}(0,P.XA)("authIdTokenMaxAge"),function jp(_){(0,ee._registerComponent)(new ge.uA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),R=f.getProvider("app-check-internal"),{apiKey:j,authDomain:Y}=E.options;ue(j&&!j.includes(":"),"invalid-api-key",{appName:E.name});const xe={apiKey:j,authDomain:Y,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pe(_)},je=new hl(E,A,R,xe);return function yp(_,f){const g=f?.persistence||[],E=(Array.isArray(g)?g:[g]).map(Nn);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,f?.popupRedirectResolver)}(je,g),je},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new ge.uA("auth-internal",f=>{const g=Fn(f.getProvider("auth").getImmediate());return new Bp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Nh,"0.23.2",function ui(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ee.registerVersion)(Nh,"0.23.2","esm2017")}("Browser");function sy(){return sy=(0,h.A)(function*(_,f,g){var E;const{BuildInfo:A}=Tu();Gt(f.sessionId,"AuthEvent did not contain a session ID");const R=yield function oy(_){return Rc.apply(this,arguments)}(f.sessionId),j={};return Rt()?j.ibi=A.packageName:Yt()?j.apn=A.packageName:_e(_,"operation-not-supported-in-this-environment"),A.displayName&&(j.appDisplayName=A.displayName),j.sessionId=R,yn(_,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,j)}),sy.apply(this,arguments)}function Oa(){return(Oa=(0,h.A)(function*(_){const{BuildInfo:f}=Tu(),g={};Rt()?g.iosBundleId=f.packageName:Yt()?g.androidPackageName=f.packageName:_e(_,"operation-not-supported-in-this-environment"),yield id(_,g)})).apply(this,arguments)}function ad(){return(ad=(0,h.A)(function*(_,f,g){const{cordova:E}=Tu();let A=()=>{};try{yield new Promise((R,j)=>{let Y=null;function xe(){var ot;R();const Wn=null===(ot=E.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Wn&&Wn(),"function"==typeof g?.close&&g.close()}function je(){Y||(Y=window.setTimeout(()=>{j(te(_,"redirect-cancelled-by-user"))},2e3))}function tt(){"visible"===document?.visibilityState&&je()}f.addPassiveListener(xe),document.addEventListener("resume",je,!1),Yt()&&document.addEventListener("visibilitychange",tt,!1),A=()=>{f.removePassiveListener(xe),document.removeEventListener("resume",je,!1),document.removeEventListener("visibilitychange",tt,!1),Y&&window.clearTimeout(Y)}})}finally{A()}})).apply(this,arguments)}function Rc(){return(Rc=(0,h.A)(function*(_){const f=function Kp(_){if(Gt(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let E=0;E<_.length;E++)g[E]=_.charCodeAt(E);return g}(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ay extends oo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.A)(function*(){yield f.initPromise})()}}function Pa(_){return ka.apply(this,arguments)}function ka(){return(ka=(0,h.A)(function*(_){const f=yield Rh()._get(Oh(_));return f&&(yield Rh()._remove(Oh(_))),f})).apply(this,arguments)}function RA(){const _=[];for(let g=0;g<20;g++){const E=Math.floor(62*Math.random());_.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return _.join("")}function Rh(){return Nn(ya)}function Oh(_){return B("authEvent",_.config.apiKey,_.name)}function qp(_){if(!_?.includes("?"))return{};const[f,...g]=_.split("?");return(0,P.I9)(g.join("?"))}const Qp=class Ph{constructor(){this._redirectPersistence=Mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wu,this._overrideRedirectResult=Tc}_initialize(f){var g=this;return(0,h.A)(function*(){const E=f._key();let A=g.eventManagers.get(E);return A||(A=new ay(f),g.eventManagers.set(E,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){_e(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,A){var R=this;return(0,h.A)(function*(){!function xh(_){var f,g,E,A,R,j,Y,xe,je,tt;const ot=Tu();ue("function"==typeof(null===(f=ot?.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(typeof(null===(g=ot?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(R=null===(A=null===(E=ot?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(xe=null===(Y=null===(j=ot?.cordova)||void 0===j?void 0:j.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===xe?void 0:xe.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(tt=null===(je=ot?.cordova)||void 0===je?void 0:je.InAppBrowser)||void 0===tt?void 0:tt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield R._initialize(f);yield j.initialized(),j.resetRedirect(),function Rp(){bn.clear()}(),yield R._originValidation(f);const Y=function ud(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:RA(),postBody:null,tenantId:_.tenantId,error:te(_,"no-auth-event")}}(f,E,A);yield function cd(_,f){return Rh()._set(Oh(_),f)}(f,Y);const xe=yield function H_(_,f,g){return sy.apply(this,arguments)}(f,Y,g),je=yield function uD(_){const{cordova:f}=Tu();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let A=null;E?f.plugins.browsertab.openUrl(_):A=f.InAppBrowser.open(_,function Qt(_=(0,P.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(A)})})}(xe);return function zp(_,f,g){return ad.apply(this,arguments)}(f,j,je)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Gp(_){return Oa.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:A,BuildInfo:R}=Tu(),j=setTimeout((0,h.A)(function*(){yield Pa(f),g.onEvent(cy())}),500),Y=function(){var tt=(0,h.A)(function*(ot){clearTimeout(j);const Wn=yield Pa(f);let Hs=null;Wn&&ot?.url&&(Hs=function uy(_,f){var g,E;const A=function cD(_){const f=qp(_),g=f.link?decodeURIComponent(f.link):void 0,E=qp(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return qp(A).link||A||E||g||_}(f);if(A.includes("/__/auth/callback")){const R=qp(A),j=R.firebaseError?function OA(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,Y=null===(E=null===(g=j?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],xe=Y?te(Y):null;return xe?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:A,postBody:null}}return null}(Wn,ot.url)),g.onEvent(Hs||cy())});return function(Wn){return tt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Y);const xe=A,je=`${R.packageName.toLowerCase()}://`;Tu().handleOpenURL=function(){var tt=(0,h.A)(function*(ot){if(ot.toLowerCase().startsWith(je)&&Y({url:ot}),"function"==typeof xe)try{xe(ot)}catch(Wn){console.error(Wn)}});return function(ot){return tt.apply(this,arguments)}}()}};function cy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:te("no-auth-event")}}function Oc(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function Yp(_=(0,P.ZQ)()){return!("file:"!==Oc()&&"ionic:"!==Oc()&&"capacitor:"!==Oc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function dy(){try{const _=self.localStorage,f=Hl();if(_)return _.setItem(f,"1"),_.removeItem(f),!function fD(_=(0,P.ZQ)()){return function hD(){return(0,P.lT)()&&11===document?.documentMode}()||function Fh(_=(0,P.ZQ)()){return/Edge\/\d+/.test(_)}(_)}()||(0,P.zW)()}catch{return Zp()&&(0,P.zW)()}return!1}function Zp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function hy(){return(function G_(){return"http:"===Oc()||"https:"===Oc()}()||(0,P.sr)()||Yp())&&!function z_(){return(0,P.lV)()||(0,P.Ll)()}()&&dy()&&!Zp()}function fy(){return Yp()&&typeof document<"u"}function Fa(){return(Fa=(0,h.A)(function*(){return!!fy()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const ci={LOCAL:"local",NONE:"none",SESSION:"session"},Pc=ue,ld="persistence";function Vh(_){return dd.apply(this,arguments)}function dd(){return(dd=(0,h.A)(function*(_){yield _._initializationPromise;const f=kc(),g=B(ld,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())})).apply(this,arguments)}function kc(){var _;try{return(null===(_=function Lh(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const Bh=ue;class uo{constructor(){this.browserResolver=Nn(jr),this.cordovaResolver=Nn(Qp),this.underlyingResolver=null,this._redirectPersistence=Mo,this._completeRedirectFn=wu,this._overrideRedirectResult=Tc}_initialize(f){var g=this;return(0,h.A)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,A){var R=this;return(0,h.A)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,E,A)})()}_openRedirect(f,g,E,A){var R=this;return(0,h.A)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,E,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return fy()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Bh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.A)(function*(){if(f.underlyingResolver)return;const g=yield function K_(){return Fa.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function py(_){return _.unwrap()}function Jp(_){return q_(_)}function q_(_){const{_tokenResponse:f}=_ instanceof P.g?_.customData:_;if(!f)return null;if(!(_ instanceof P.g)&&"temporaryProof"in f&&"phoneNumber"in f)return et.credentialFromResult(_);const g=f.providerId;if(!g||g===he.PASSWORD)return null;let E;switch(g){case he.GOOGLE:E=Ki;break;case he.FACEBOOK:E=uh;break;case he.GITHUB:E=Os;break;case he.TWITTER:E=ou;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:j,pendingToken:Y,nonce:xe}=f;return R||j||A||Y?Y?g.startsWith("saml.")?os._create(g,Y):$e._fromParams({providerId:g,signInMethod:g,pendingToken:Y,idToken:A,accessToken:R}):new Mi(g).credential({idToken:A,accessToken:R,rawNonce:xe}):null}return _ instanceof P.g?E.credentialFromError(_):E.credentialFromResult(_)}function li(_,f){return f.catch(g=>{throw g instanceof P.g&&function eg(_,f){var g;const E=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new gy(_,function Ul(_,f){var g;const E=(0,P.Ku)(_),A=f;return ue(f.customData.operationType,E,"argument-error"),ue(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),To._fromError(E,A)}(_,f));else if(E){const A=q_(f),R=f;A&&(R.credential=A,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(_,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Jp(g),additionalUserInfo:Tp(g),user:vi.getOrCreate(A)}})}function tg(_,f){return hd.apply(this,arguments)}function hd(){return(hd=(0,h.A)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>li(_,g.confirm(E))}})).apply(this,arguments)}class gy{constructor(f,g){this.resolver=g,this.auth=function W_(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return li(py(this.auth),this.resolver.resolveSignIn(f))}}class vi{constructor(f){this._delegate=f,this.multiFactor=function ma(_){const f=(0,P.Ku)(_);return on.has(f)||on.set(f,Ao._fromUser(f)),on.get(f)}(f)}static getOrCreate(f){return vi.USER_MAP.has(f)||vi.USER_MAP.set(f,new vi(f)),vi.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.A)(function*(){return li(g.auth,zm(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,h.A)(function*(){return tg(E.auth,function bh(_,f,g){return Ea.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.A)(function*(){return li(g.auth,function Th(_,f,g){return Po.apply(this,arguments)}(g._delegate,f,uo))})()}linkWithRedirect(f){var g=this;return(0,h.A)(function*(){return yield Vh(Fn(g.auth)),Pp(g._delegate,f,uo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.A)(function*(){return li(g.auth,Km(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return tg(this.auth,function Dc(_,f,g){return Ro.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return li(this.auth,function Cc(_,f,g){return Ca.apply(this,arguments)}(this._delegate,f,uo))}reauthenticateWithRedirect(f){var g=this;return(0,h.A)(function*(){return yield Vh(Fn(g.auth)),Aa(g._delegate,f,uo)})()}sendEmailVerification(f){return function Do(_,f){return Ls.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.A)(function*(){return yield function Dl(_,f){return Sr.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function bp(_,f){return Fl((0,P.Ku)(_),f,null)}(this._delegate,f)}updatePassword(f){return function kl(_,f){return Fl((0,P.Ku)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Ln(_,f){return Vn.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Qm(_,f){return fc.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function dc(_,f,g){return hc.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}vi.USER_MAP=new WeakMap;const Nr=ue;let fd=(()=>{class _{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;Nr(A,"invalid-api-key",{appName:g.name}),Nr(A,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?uo:void 0;this._delegate=E.initialize({options:{persistence:jh(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function tc(_,f,g){const E=Fn(_);ue(E._canInitEmulator,E,"emulator-config-failed"),ue(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const A=!!g?.disableWarnings,R=br(f),{host:j,port:Y}=function oh(_){const f=br(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const R=A[1];return{host:R,port:fl(E.substr(R.length+1))}}{const[R,j]=E.split(":");return{host:R,port:fl(j)}}}(f);E.config.emulator={url:`${R}//${j}${null===Y?"":`:${Y}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:j,port:Y,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Gm(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,E)}applyActionCode(g){return function us(_,f){return Ni.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return xl(this._delegate,g)}confirmPasswordReset(g,E){return function Wm(_,f,g){return Fs.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var A=this;return(0,h.A)(function*(){return li(A._delegate,function cc(_,f,g){return cu.apply(this,arguments)}(A._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Pl(_,f){return pa.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Dp(_,f){const g=Rs.parseLink(f);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,h.A)(function*(){Nr(hy(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function Sh(_,f){return ai.apply(this,arguments)}(g._delegate,uo);return E?li(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Xp(_,f){Fn(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,A){const{next:R,error:j,complete:Y}=ng(g,E,A);return this._delegate.onAuthStateChanged(R,j,Y)}onIdTokenChanged(g,E,A){const{next:R,error:j,complete:Y}=ng(g,E,A);return this._delegate.onIdTokenChanged(R,j,Y)}sendSignInLinkToEmail(g,E){return function lu(_,f,g){return fa.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function U_(_,f,g){return uu.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,h.A)(function*(){let A;switch(function Au(_,f){Pc(Object.values(ci).includes(f),_,"invalid-persistence-type"),(0,P.lV)()?Pc(f!==ci.SESSION,_,"unsupported-persistence-type"):(0,P.Ll)()?Pc(f===ci.NONE,_,"unsupported-persistence-type"):Zp()?Pc(f===ci.NONE||f===ci.LOCAL&&(0,P.zW)(),_,"unsupported-persistence-type"):Pc(f===ci.NONE||dy(),_,"unsupported-persistence-type")}(E._delegate,g),g){case ci.SESSION:A=Mo;break;case ci.LOCAL:A=(yield Nn(oi)._isAvailable())?oi:ya;break;case ci.NONE:A=Vr;break;default:return _e("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return li(this._delegate,function au(_){return ar.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return li(this._delegate,Sl(this._delegate,g))}signInWithCustomToken(g){return li(this._delegate,function lh(_,f){return ks.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return li(this._delegate,function dh(_,f,g){return Sl((0,P.Ku)(_),da.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return li(this._delegate,function ur(_,f,g){return lc.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return tg(this._delegate,function qi(_,f,g){return _a.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,h.A)(function*(){return Nr(hy(),E._delegate,"operation-not-supported-in-this-environment"),li(E._delegate,function td(_,f,g){return Da.apply(this,arguments)}(E._delegate,g,uo))})()}signInWithRedirect(g){var E=this;return(0,h.A)(function*(){return Nr(hy(),E._delegate,"operation-not-supported-in-this-environment"),yield Vh(E._delegate),_u(E._delegate,g,uo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function ha(_,f){return _r.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=ci,_})();function ng(_,f,g){let E=_;"function"!=typeof _&&({next:E,error:f,complete:g}=_);const A=E;return{next:j=>A(j&&vi.getOrCreate(j)),error:f,complete:g}}function jh(_,f){const g=function Uh(_,f){const g=kc();if(!g)return[];const E=B(ld,_,f);switch(g.getItem(E)){case ci.NONE:return[Vr];case ci.LOCAL:return[oi,Mo];case ci.SESSION:return[Mo];default:return[]}}(_,f);if(typeof self<"u"&&!g.includes(oi)&&g.push(oi),typeof window<"u")for(const E of[ya,Mo])g.includes(E)||g.push(E);return g.includes(Vr)||g.push(Vr),g}class xr{constructor(){this.providerId="phone",this._delegate=new et(py(Z.A.auth()))}static credential(f,g){return et.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}xr.PHONE_SIGN_IN_METHOD=et.PHONE_SIGN_IN_METHOD,xr.PROVIDER_ID=et.PROVIDER_ID;const pd=ue;class gd{constructor(f,g,E=Z.A.app()){var A;pd(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ic(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Q_(_){_.INTERNAL.registerComponent(new ge.uA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new fd(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:da,FacebookAuthProvider:uh,GithubAuthProvider:Os,GoogleAuthProvider:Ki,OAuthProvider:Mi,SAMLAuthProvider:Il,PhoneAuthProvider:xr,PhoneMultiFactorGenerator:sd,RecaptchaVerifier:gd,TwitterAuthProvider:ou,Auth:fd,AuthCredential:_o,Error:P.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.4.2")}(Z.A)},467:(ht,Te,O)=>{function h(P,ee,re,le,ge,Pe,he){try{var V=P[Pe](he),$=V.value}catch(X){return void re(X)}V.done?ee($):Promise.resolve($).then(le,ge)}function Z(P){return function(){var ee=this,re=arguments;return new Promise(function(le,ge){var Pe=P.apply(ee,re);function he($){h(Pe,le,ge,he,V,"next",$)}function V($){h(Pe,le,ge,he,V,"throw",$)}he(void 0)})}}O.d(Te,{A:()=>Z})},1635:(ht,Te,O)=>{function ee(oe,de){var ye={};for(var we in oe)Object.prototype.hasOwnProperty.call(oe,we)&&de.indexOf(we)<0&&(ye[we]=oe[we]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var ve=0;for(we=Object.getOwnPropertySymbols(oe);ve<we.length;ve++)de.indexOf(we[ve])<0&&Object.prototype.propertyIsEnumerable.call(oe,we[ve])&&(ye[we[ve]]=oe[we[ve]])}return ye}function X(oe,de,ye,we){return new(ye||(ye=Promise))(function(be,Ye){function Ge(en){try{wt(we.next(en))}catch(Pt){Ye(Pt)}}function Dn(en){try{wt(we.throw(en))}catch(Pt){Ye(Pt)}}function wt(en){en.done?be(en.value):function ve(be){return be instanceof ye?be:new ye(function(Ye){Ye(be)})}(en.value).then(Ge,Dn)}wt((we=we.apply(oe,de||[])).next())})}function ne(oe){return this instanceof ne?(this.v=oe,this):new ne(oe)}function _e(oe,de,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,we=ye.apply(oe,de||[]),be=[];return ve=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Ge("next"),Ge("throw"),Ge("return",function Ye(qt){return function(Mn){return Promise.resolve(Mn).then(qt,Pt)}}),ve[Symbol.asyncIterator]=function(){return this},ve;function Ge(qt,Mn){we[qt]&&(ve[qt]=function(tn){return new Promise(function(fr,Fr){be.push([qt,tn,fr,Fr])>1||Dn(qt,tn)})},Mn&&(ve[qt]=Mn(ve[qt])))}function Dn(qt,Mn){try{!function wt(qt){qt.value instanceof ne?Promise.resolve(qt.value.v).then(en,Pt):is(be[0][2],qt)}(we[qt](Mn))}catch(tn){is(be[0][3],tn)}}function en(qt){Dn("next",qt)}function Pt(qt){Dn("throw",qt)}function is(qt,Mn){qt(Mn),be.shift(),be.length&&Dn(be[0][0],be[0][1])}}function Ce(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,de=oe[Symbol.asyncIterator];return de?de.call(oe):(oe=function Re(oe){var de="function"==typeof Symbol&&Symbol.iterator,ye=de&&oe[de],we=0;if(ye)return ye.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&we>=oe.length&&(oe=void 0),{value:oe&&oe[we++],done:!oe}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),ye={},we("next"),we("throw"),we("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function we(be){ye[be]=oe[be]&&function(Ye){return new Promise(function(Ge,Dn){!function ve(be,Ye,Ge,Dn){Promise.resolve(Dn).then(function(wt){be({value:wt,done:Ge})},Ye)}(Ge,Dn,(Ye=oe[be](Ye)).done,Ye.value)})}}}O.d(Te,{AQ:()=>_e,N3:()=>ne,Tt:()=>ee,sH:()=>X,xN:()=>Ce}),"function"==typeof SuppressedError&&SuppressedError}},ht=>{ht(ht.s=5283)}]);